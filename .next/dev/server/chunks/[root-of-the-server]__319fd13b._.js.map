{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/rubenoroz/scena-v1/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\n// Force reload for schema changes\n\nconst prismaClientSingleton = () => {\n  return new PrismaClient();\n};\n\ndeclare global {\n  var prisma: undefined | ReturnType<typeof prismaClientSingleton>;\n}\n\n// Workaround: Force new client instance to pick up schema changes in dev\nif (process.env.NODE_ENV !== \"production\") {\n  globalThis.prisma = undefined;\n}\n\nconst prisma = globalThis.prisma ?? prismaClientSingleton();\n\nexport default prisma;\n\nif (process.env.NODE_ENV !== \"production\") globalThis.prisma = prisma;"],"names":[],"mappings":";;;;AAAA;;AAEA,kCAAkC;AAElC,MAAM,wBAAwB;IAC5B,OAAO,IAAI,6IAAY;AACzB;AAMA,yEAAyE;AACzE,wCAA2C;IACzC,WAAW,MAAM,GAAG;AACtB;AAEA,MAAM,SAAS,WAAW,MAAM,IAAI;uCAErB;AAEf,wCAA2C,WAAW,MAAM,GAAG"}},
    {"offset": {"line": 133, "column": 0}, "map": {"version":3,"sources":["file:///Users/rubenoroz/scena-v1/src/lib/auth.ts"],"sourcesContent":["import NextAuth, { getServerSession, AuthOptions } from \"next-auth\"; // Import getServerSession\nimport { PrismaAdapter } from \"@auth/prisma-adapter\";\nimport GitHub from \"next-auth/providers/github\";\nimport CredentialsProvider from \"next-auth/providers/credentials\";\nimport bcrypt from \"bcryptjs\";\nimport prisma from \"@/lib/prisma\"; // Import the singleton Prisma client\n\n// This is your auth configuration\nexport const authOptions: AuthOptions = {\n  adapter: PrismaAdapter(prisma),\n  providers: [\n    GitHub({\n      clientId: process.env.GITHUB_ID ?? \"\",\n      clientSecret: process.env.GITHUB_SECRET ?? \"\",\n    }),\n    CredentialsProvider({\n      name: \"Credentials\",\n      credentials: {\n        email: { label: \"Email\", type: \"text\" },\n        password: { label: \"Password\", type: \"password\" },\n      },\n      async authorize(credentials, req) {\n        if (!credentials?.email || !credentials?.password) {\n          return null;\n        }\n\n        const user = await prisma.user.findUnique({\n          where: {\n            email: credentials.email,\n          },\n        });\n\n        if (!user || !user.hashedPassword) {\n          return null;\n        }\n\n        const isValid = await bcrypt.compare(\n          credentials.password,\n          user.hashedPassword\n        );\n\n        if (isValid) {\n          return user;\n        }\n\n        return null;\n      },\n    }),\n  ],\n  session: {\n    strategy: \"jwt\",\n  },\n  callbacks: {\n    async jwt({ token, user }) {\n      console.log(\"JWT Callback - Token:\", token);\n      console.log(\"JWT Callback - User:\", user);\n      if (user) {\n        token.id = user.id;\n        token.role = user.role; // Assign role from the user object\n      }\n\n      // If the user's role is SUPERADMIN, set isSuperAdmin to true\n      token.isSuperAdmin = token.role === \"SUPERADMIN\";\n\n      return token;\n    },\n    async session({ session, token }) {\n      console.log(\"Session Callback - Session:\", session);\n      console.log(\"Session Callback - Token:\", token);\n      if (session.user) {\n        session.user.id = token.id as string;\n        session.user.role = token.role; // Assign role from the token\n        session.user.isSuperAdmin = token.isSuperAdmin; // Assign isSuperAdmin from the token\n      }\n      return session;\n    },\n  },\n  pages: {\n    signIn: '/', // Specify your sign-in page\n  },\n  secret: process.env.NEXTAUTH_SECRET,\n  debug: process.env.NODE_ENV === 'development',\n};\n\n// This is the handler for the [...nextauth] route\n// It's used by app/api/auth/[...nextauth]/route.ts\nexport const { handlers } = NextAuth(authOptions);\n\n// This is the server-side auth helper for NextAuth.js v4 in App Router\nexport async function auth() {\n  return getServerSession(authOptions);\n}\n"],"names":[],"mappings":";;;;;;;;AAAA,6OAAqE,0BAA0B;AAC/F;AACA;AACA;AACA;AACA,8MAAmC,qCAAqC;;;;;;;AAGjE,MAAM,cAA2B;IACtC,SAAS,IAAA,uKAAa,EAAC,iIAAM;IAC7B,WAAW;QACT,IAAA,gKAAM,EAAC;YACL,UAAU,QAAQ,GAAG,CAAC,SAAS,IAAI;YACnC,cAAc,QAAQ,GAAG,CAAC,aAAa,IAAI;QAC7C;QACA,IAAA,qKAAmB,EAAC;YAClB,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAO;gBACtC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YAClD;YACA,MAAM,WAAU,WAAW,EAAE,GAAG;gBAC9B,IAAI,CAAC,aAAa,SAAS,CAAC,aAAa,UAAU;oBACjD,OAAO;gBACT;gBAEA,MAAM,OAAO,MAAM,iIAAM,CAAC,IAAI,CAAC,UAAU,CAAC;oBACxC,OAAO;wBACL,OAAO,YAAY,KAAK;oBAC1B;gBACF;gBAEA,IAAI,CAAC,QAAQ,CAAC,KAAK,cAAc,EAAE;oBACjC,OAAO;gBACT;gBAEA,MAAM,UAAU,MAAM,8IAAM,CAAC,OAAO,CAClC,YAAY,QAAQ,EACpB,KAAK,cAAc;gBAGrB,IAAI,SAAS;oBACX,OAAO;gBACT;gBAEA,OAAO;YACT;QACF;KACD;IACD,SAAS;QACP,UAAU;IACZ;IACA,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACvB,QAAQ,GAAG,CAAC,yBAAyB;YACrC,QAAQ,GAAG,CAAC,wBAAwB;YACpC,IAAI,MAAM;gBACR,MAAM,EAAE,GAAG,KAAK,EAAE;gBAClB,MAAM,IAAI,GAAG,KAAK,IAAI,EAAE,mCAAmC;YAC7D;YAEA,6DAA6D;YAC7D,MAAM,YAAY,GAAG,MAAM,IAAI,KAAK;YAEpC,OAAO;QACT;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,QAAQ,GAAG,CAAC,+BAA+B;YAC3C,QAAQ,GAAG,CAAC,6BAA6B;YACzC,IAAI,QAAQ,IAAI,EAAE;gBAChB,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,EAAE;gBAC1B,QAAQ,IAAI,CAAC,IAAI,GAAG,MAAM,IAAI,EAAE,6BAA6B;gBAC7D,QAAQ,IAAI,CAAC,YAAY,GAAG,MAAM,YAAY,EAAE,qCAAqC;YACvF;YACA,OAAO;QACT;IACF;IACA,OAAO;QACL,QAAQ;IACV;IACA,QAAQ,QAAQ,GAAG,CAAC,eAAe;IACnC,OAAO,oDAAyB;AAClC;AAIO,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,kJAAQ,EAAC;AAG9B,eAAe;IACpB,OAAO,IAAA,2JAAgB,EAAC;AAC1B"}},
    {"offset": {"line": 232, "column": 0}, "map": {"version":3,"sources":["file:///Users/rubenoroz/scena-v1/src/lib/permissions.ts"],"sourcesContent":["export const ROLES = {\n    ADMIN: 'ADMIN',\n    PROJECT_MANAGER: 'PROJECT_MANAGER',\n    ARTIST: 'ARTIST',\n    VIEWER: 'VIEWER',\n} as const;\n\nexport type Role = keyof typeof ROLES;\n\nexport const PERMISSIONS = {\n    // Workspace\n    MANAGE_WORKSPACE: ['ADMIN'],\n    CREATE_PROJECT: ['ADMIN', 'PROJECT_MANAGER'],\n    DELETE_PROJECT: ['ADMIN'],\n\n    // Project\n    MANAGE_PROJECT: ['ADMIN', 'PROJECT_MANAGER'],\n    VIEW_PROJECT: ['ADMIN', 'PROJECT_MANAGER', 'ARTIST', 'VIEWER'],\n    MANAGE_ROLES: ['ADMIN', 'PROJECT_MANAGER'],\n\n    // Tasks\n    CREATE_TASK: ['ADMIN', 'PROJECT_MANAGER'],\n    EDIT_ANY_TASK: ['ADMIN', 'PROJECT_MANAGER'],\n    EDIT_OWN_TASK: ['ADMIN', 'PROJECT_MANAGER', 'ARTIST'],\n    DELETE_TASK: ['ADMIN', 'PROJECT_MANAGER'],\n    ASSIGN_TASK: ['ADMIN', 'PROJECT_MANAGER'],\n\n    // Comments\n    ADD_COMMENT: ['ADMIN', 'PROJECT_MANAGER', 'ARTIST'],\n    DELETE_ANY_COMMENT: ['ADMIN', 'PROJECT_MANAGER'],\n    DELETE_OWN_COMMENT: ['ADMIN', 'PROJECT_MANAGER', 'ARTIST'],\n\n    // Files\n    UPLOAD_FILE: ['ADMIN', 'PROJECT_MANAGER', 'ARTIST'],\n    DELETE_FILE: ['ADMIN', 'PROJECT_MANAGER'],\n} as const;\n\nexport function hasPermission(userRole: string, allowedRoles: readonly string[]): boolean {\n    return allowedRoles.includes(userRole);\n}\n\nimport prisma from \"@/lib/prisma\";\n\nexport async function getUserRoleInProject(userId: string, projectId: string): Promise<string> {\n    // 1. Check direct project role\n    const projectUser = await prisma.projectUser.findUnique({\n        where: {\n            projectId_userId: {\n                projectId,\n                userId,\n            },\n        },\n    });\n\n    if (projectUser) return projectUser.role;\n\n    // 2. Check workspace role (if implemented, workspace admins might have access to all projects)\n    // For now, we'll assume project-level roles are primary. \n    // But we should check if the user is a workspace admin.\n\n    const project = await prisma.project.findUnique({\n        where: { id: projectId },\n        select: { workspaceId: true },\n    });\n\n    if (project) {\n        const workspaceUser = await prisma.workspaceUser.findUnique({\n            where: {\n                workspaceId_userId: {\n                    workspaceId: project.workspaceId,\n                    userId,\n                },\n            },\n        });\n\n        if (workspaceUser && workspaceUser.role === ROLES.ADMIN) {\n            return ROLES.ADMIN;\n        }\n    }\n\n    // Default fallback (e.g., if user is owner of project)\n    const projectOwner = await prisma.project.findUnique({\n        where: { id: projectId },\n        select: { ownerId: true },\n    });\n\n    if (projectOwner && projectOwner.ownerId === userId) {\n        return ROLES.ADMIN;\n    }\n\n    return ROLES.VIEWER; // Default role if found but no specific role assigned? Or maybe null?\n    // For safety, let's return a restricted role or handle \"not found\"\n}\n"],"names":[],"mappings":";;;;;;;;;;AAyCA;AAzCO,MAAM,QAAQ;IACjB,OAAO;IACP,iBAAiB;IACjB,QAAQ;IACR,QAAQ;AACZ;AAIO,MAAM,cAAc;IACvB,YAAY;IACZ,kBAAkB;QAAC;KAAQ;IAC3B,gBAAgB;QAAC;QAAS;KAAkB;IAC5C,gBAAgB;QAAC;KAAQ;IAEzB,UAAU;IACV,gBAAgB;QAAC;QAAS;KAAkB;IAC5C,cAAc;QAAC;QAAS;QAAmB;QAAU;KAAS;IAC9D,cAAc;QAAC;QAAS;KAAkB;IAE1C,QAAQ;IACR,aAAa;QAAC;QAAS;KAAkB;IACzC,eAAe;QAAC;QAAS;KAAkB;IAC3C,eAAe;QAAC;QAAS;QAAmB;KAAS;IACrD,aAAa;QAAC;QAAS;KAAkB;IACzC,aAAa;QAAC;QAAS;KAAkB;IAEzC,WAAW;IACX,aAAa;QAAC;QAAS;QAAmB;KAAS;IACnD,oBAAoB;QAAC;QAAS;KAAkB;IAChD,oBAAoB;QAAC;QAAS;QAAmB;KAAS;IAE1D,QAAQ;IACR,aAAa;QAAC;QAAS;QAAmB;KAAS;IACnD,aAAa;QAAC;QAAS;KAAkB;AAC7C;AAEO,SAAS,cAAc,QAAgB,EAAE,YAA+B;IAC3E,OAAO,aAAa,QAAQ,CAAC;AACjC;;AAIO,eAAe,qBAAqB,MAAc,EAAE,SAAiB;IACxE,+BAA+B;IAC/B,MAAM,cAAc,MAAM,iIAAM,CAAC,WAAW,CAAC,UAAU,CAAC;QACpD,OAAO;YACH,kBAAkB;gBACd;gBACA;YACJ;QACJ;IACJ;IAEA,IAAI,aAAa,OAAO,YAAY,IAAI;IAExC,+FAA+F;IAC/F,0DAA0D;IAC1D,wDAAwD;IAExD,MAAM,UAAU,MAAM,iIAAM,CAAC,OAAO,CAAC,UAAU,CAAC;QAC5C,OAAO;YAAE,IAAI;QAAU;QACvB,QAAQ;YAAE,aAAa;QAAK;IAChC;IAEA,IAAI,SAAS;QACT,MAAM,gBAAgB,MAAM,iIAAM,CAAC,aAAa,CAAC,UAAU,CAAC;YACxD,OAAO;gBACH,oBAAoB;oBAChB,aAAa,QAAQ,WAAW;oBAChC;gBACJ;YACJ;QACJ;QAEA,IAAI,iBAAiB,cAAc,IAAI,KAAK,MAAM,KAAK,EAAE;YACrD,OAAO,MAAM,KAAK;QACtB;IACJ;IAEA,uDAAuD;IACvD,MAAM,eAAe,MAAM,iIAAM,CAAC,OAAO,CAAC,UAAU,CAAC;QACjD,OAAO;YAAE,IAAI;QAAU;QACvB,QAAQ;YAAE,SAAS;QAAK;IAC5B;IAEA,IAAI,gBAAgB,aAAa,OAAO,KAAK,QAAQ;QACjD,OAAO,MAAM,KAAK;IACtB;IAEA,OAAO,MAAM,MAAM,EAAE,sEAAsE;AAC3F,mEAAmE;AACvE"}},
    {"offset": {"line": 382, "column": 0}, "map": {"version":3,"sources":["file:///Users/rubenoroz/scena-v1/src/app/api/projects/%5BprojectId%5D/tasks/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport prisma from \"@/lib/prisma\";\nimport { auth } from \"@/lib/auth\";\nimport { getUserRoleInProject, hasPermission, PERMISSIONS } from \"@/lib/permissions\";\n\n// GET /api/projects/[projectId]/tasks\n// This endpoint can optionally filter tasks by columnId\nexport async function GET(\n  req: NextRequest,\n  { params }: { params: Promise<{ projectId: string }> }\n) {\n  try {\n    const session = await auth();\n    if (!session) {\n      return NextResponse.json({ message: \"Unauthorized\" }, { status: 401 });\n    }\n\n    const { projectId } = await params;\n    const { searchParams } = new URL(req.url);\n    const columnId = searchParams.get(\"columnId\");\n\n    const tasks = await prisma.task.findMany({\n      where: {\n        projectId,\n        ...(columnId && { columnId }), // Conditionally add columnId filter\n      },\n      orderBy: { order: \"asc\" },\n      include: {\n        assignees: {\n          select: {\n            id: true,\n            name: true,\n            image: true,\n          },\n        },\n        children: true, // Include subtasks\n      },\n    });\n\n    return NextResponse.json(tasks);\n  } catch (error) {\n    console.error(\"Error fetching tasks:\", error);\n    return NextResponse.json(\n      { message: \"Error fetching tasks\" },\n      { status: 500 }\n    );\n  }\n}\n\n// POST /api/projects/[projectId]/tasks\nexport async function POST(\n  req: NextRequest,\n  { params }: { params: Promise<{ projectId: string }> }\n) {\n  try {\n    const session = await auth();\n    if (!session?.user?.id) {\n      return NextResponse.json({ message: \"Unauthorized\" }, { status: 401 });\n    }\n\n    const { projectId } = await params;\n    const { title, columnId, parentId, startDate, endDate, toleranceDate } = await req.json();\n\n    if (!title || !columnId) {\n      return NextResponse.json(\n        { message: \"Title and Column ID are required\" },\n        { status: 400 }\n      );\n    }\n\n    // Check permissions\n    const userRole = await getUserRoleInProject(session.user.id, projectId);\n    if (!hasPermission(userRole, PERMISSIONS.CREATE_TASK)) {\n      return NextResponse.json({ message: \"Forbidden\" }, { status: 403 });\n    }\n\n    let newOrder: number;\n\n    if (parentId) {\n      // If this is a subtask, place it right after the parent and all its existing subtasks\n      const parentTask = await prisma.task.findUnique({\n        where: { id: parentId },\n        include: {\n          children: {\n            orderBy: { order: 'desc' },\n            take: 1,\n          },\n        },\n      });\n\n      if (!parentTask) {\n        return NextResponse.json({ message: \"Parent task not found\" }, { status: 404 });\n      }\n\n      // Find the position after the last subtask (or after parent if no subtasks exist)\n      let insertAfterOrder: number;\n      if (parentTask.children.length > 0) {\n        // Place after the last existing subtask\n        insertAfterOrder = parentTask.children[0].order;\n      } else {\n        // Place right after the parent\n        insertAfterOrder = parentTask.order;\n      }\n\n      // Get all tasks in the same column with order > insertAfterOrder\n      const tasksToShift = await prisma.task.findMany({\n        where: {\n          columnId,\n          order: { gt: insertAfterOrder },\n        },\n        orderBy: { order: \"asc\" },\n      });\n\n      // Shift all tasks after the insertion point down by 1\n      for (const task of tasksToShift) {\n        await prisma.task.update({\n          where: { id: task.id },\n          data: { order: task.order + 1 },\n        });\n      }\n\n      // Place the new subtask right after the insertion point\n      newOrder = insertAfterOrder + 1;\n    } else {\n      // If not a subtask, append to the end of the column\n      const lastTask = await prisma.task.findFirst({\n        where: { columnId },\n        orderBy: { order: \"desc\" },\n      });\n\n      newOrder = lastTask ? lastTask.order + 1 : 0;\n    }\n\n    const newTask = await prisma.task.create({\n      data: {\n        title,\n        columnId,\n        projectId,\n        order: newOrder,\n        parentId: parentId || null,\n        startDate: startDate || null,\n        endDate: endDate || null,\n        toleranceDate: toleranceDate || null,\n      },\n      include: {\n        assignees: true,\n        children: true,\n      },\n    });\n\n    return NextResponse.json(newTask, { status: 201 });\n  } catch (error) {\n    console.error(\"Error creating task:\", error);\n    return NextResponse.json(\n      { message: \"Error creating task\" },\n      { status: 500 }\n    );\n  }\n}"],"names":[],"mappings":"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"}}]
}