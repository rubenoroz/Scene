{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/rubenoroz/scena-v1/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\n// Force reload for schema changes\n\nconst prismaClientSingleton = () => {\n  return new PrismaClient();\n};\n\ndeclare global {\n  var prisma: undefined | ReturnType<typeof prismaClientSingleton>;\n}\n\n// Workaround: Force new client instance to pick up schema changes in dev\nif (process.env.NODE_ENV !== \"production\") {\n  globalThis.prisma = undefined;\n}\n\nconst prisma = globalThis.prisma ?? prismaClientSingleton();\n\nexport default prisma;\n\nif (process.env.NODE_ENV !== \"production\") globalThis.prisma = prisma;"],"names":[],"mappings":";;;;AAAA;;AAEA,kCAAkC;AAElC,MAAM,wBAAwB;IAC5B,OAAO,IAAI,6IAAY;AACzB;AAMA,yEAAyE;AACzE,wCAA2C;IACzC,WAAW,MAAM,GAAG;AACtB;AAEA,MAAM,SAAS,WAAW,MAAM,IAAI;uCAErB;AAEf,wCAA2C,WAAW,MAAM,GAAG"}},
    {"offset": {"line": 133, "column": 0}, "map": {"version":3,"sources":["file:///Users/rubenoroz/scena-v1/src/lib/auth.ts"],"sourcesContent":["import NextAuth, { getServerSession, AuthOptions } from \"next-auth\"; // Import getServerSession\nimport { PrismaAdapter } from \"@auth/prisma-adapter\";\nimport GitHub from \"next-auth/providers/github\";\nimport CredentialsProvider from \"next-auth/providers/credentials\";\nimport bcrypt from \"bcryptjs\";\nimport prisma from \"@/lib/prisma\"; // Import the singleton Prisma client\n\n// This is your auth configuration\nexport const authOptions: AuthOptions = {\n  adapter: PrismaAdapter(prisma),\n  providers: [\n    GitHub({\n      clientId: process.env.GITHUB_ID ?? \"\",\n      clientSecret: process.env.GITHUB_SECRET ?? \"\",\n    }),\n    CredentialsProvider({\n      name: \"Credentials\",\n      credentials: {\n        email: { label: \"Email\", type: \"text\" },\n        password: { label: \"Password\", type: \"password\" },\n      },\n      async authorize(credentials, req) {\n        if (!credentials?.email || !credentials?.password) {\n          return null;\n        }\n\n        const user = await prisma.user.findUnique({\n          where: {\n            email: credentials.email,\n          },\n        });\n\n        if (!user || !user.hashedPassword) {\n          return null;\n        }\n\n        const isValid = await bcrypt.compare(\n          credentials.password,\n          user.hashedPassword\n        );\n\n        if (isValid) {\n          return user;\n        }\n\n        return null;\n      },\n    }),\n  ],\n  session: {\n    strategy: \"jwt\",\n  },\n  callbacks: {\n    async jwt({ token, user }) {\n      console.log(\"JWT Callback - Token:\", token);\n      console.log(\"JWT Callback - User:\", user);\n      if (user) {\n        token.id = user.id;\n        token.role = user.role; // Assign role from the user object\n      }\n\n      // If the user's role is SUPERADMIN, set isSuperAdmin to true\n      token.isSuperAdmin = token.role === \"SUPERADMIN\";\n\n      return token;\n    },\n    async session({ session, token }) {\n      console.log(\"Session Callback - Session:\", session);\n      console.log(\"Session Callback - Token:\", token);\n      if (session.user) {\n        session.user.id = token.id as string;\n        session.user.role = token.role; // Assign role from the token\n        session.user.isSuperAdmin = token.isSuperAdmin; // Assign isSuperAdmin from the token\n      }\n      return session;\n    },\n  },\n  pages: {\n    signIn: '/', // Specify your sign-in page\n  },\n  secret: process.env.NEXTAUTH_SECRET,\n  debug: process.env.NODE_ENV === 'development',\n};\n\n// This is the handler for the [...nextauth] route\n// It's used by app/api/auth/[...nextauth]/route.ts\nexport const { handlers } = NextAuth(authOptions);\n\n// This is the server-side auth helper for NextAuth.js v4 in App Router\nexport async function auth() {\n  return getServerSession(authOptions);\n}\n"],"names":[],"mappings":";;;;;;;;AAAA,6OAAqE,0BAA0B;AAC/F;AACA;AACA;AACA;AACA,8MAAmC,qCAAqC;;;;;;;AAGjE,MAAM,cAA2B;IACtC,SAAS,IAAA,uKAAa,EAAC,iIAAM;IAC7B,WAAW;QACT,IAAA,gKAAM,EAAC;YACL,UAAU,QAAQ,GAAG,CAAC,SAAS,IAAI;YACnC,cAAc,QAAQ,GAAG,CAAC,aAAa,IAAI;QAC7C;QACA,IAAA,qKAAmB,EAAC;YAClB,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAO;gBACtC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YAClD;YACA,MAAM,WAAU,WAAW,EAAE,GAAG;gBAC9B,IAAI,CAAC,aAAa,SAAS,CAAC,aAAa,UAAU;oBACjD,OAAO;gBACT;gBAEA,MAAM,OAAO,MAAM,iIAAM,CAAC,IAAI,CAAC,UAAU,CAAC;oBACxC,OAAO;wBACL,OAAO,YAAY,KAAK;oBAC1B;gBACF;gBAEA,IAAI,CAAC,QAAQ,CAAC,KAAK,cAAc,EAAE;oBACjC,OAAO;gBACT;gBAEA,MAAM,UAAU,MAAM,8IAAM,CAAC,OAAO,CAClC,YAAY,QAAQ,EACpB,KAAK,cAAc;gBAGrB,IAAI,SAAS;oBACX,OAAO;gBACT;gBAEA,OAAO;YACT;QACF;KACD;IACD,SAAS;QACP,UAAU;IACZ;IACA,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACvB,QAAQ,GAAG,CAAC,yBAAyB;YACrC,QAAQ,GAAG,CAAC,wBAAwB;YACpC,IAAI,MAAM;gBACR,MAAM,EAAE,GAAG,KAAK,EAAE;gBAClB,MAAM,IAAI,GAAG,KAAK,IAAI,EAAE,mCAAmC;YAC7D;YAEA,6DAA6D;YAC7D,MAAM,YAAY,GAAG,MAAM,IAAI,KAAK;YAEpC,OAAO;QACT;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,QAAQ,GAAG,CAAC,+BAA+B;YAC3C,QAAQ,GAAG,CAAC,6BAA6B;YACzC,IAAI,QAAQ,IAAI,EAAE;gBAChB,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,EAAE;gBAC1B,QAAQ,IAAI,CAAC,IAAI,GAAG,MAAM,IAAI,EAAE,6BAA6B;gBAC7D,QAAQ,IAAI,CAAC,YAAY,GAAG,MAAM,YAAY,EAAE,qCAAqC;YACvF;YACA,OAAO;QACT;IACF;IACA,OAAO;QACL,QAAQ;IACV;IACA,QAAQ,QAAQ,GAAG,CAAC,eAAe;IACnC,OAAO,oDAAyB;AAClC;AAIO,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,kJAAQ,EAAC;AAG9B,eAAe;IACpB,OAAO,IAAA,2JAAgB,EAAC;AAC1B"}},
    {"offset": {"line": 232, "column": 0}, "map": {"version":3,"sources":["file:///Users/rubenoroz/scena-v1/src/lib/permissions.ts"],"sourcesContent":["export const ROLES = {\n    ADMIN: 'ADMIN',\n    PROJECT_MANAGER: 'PROJECT_MANAGER',\n    ARTIST: 'ARTIST',\n    VIEWER: 'VIEWER',\n} as const;\n\nexport type Role = keyof typeof ROLES;\n\nexport const PERMISSIONS = {\n    // Workspace\n    MANAGE_WORKSPACE: ['ADMIN'],\n    CREATE_PROJECT: ['ADMIN', 'PROJECT_MANAGER'],\n    DELETE_PROJECT: ['ADMIN'],\n\n    // Project\n    MANAGE_PROJECT: ['ADMIN', 'PROJECT_MANAGER'],\n    VIEW_PROJECT: ['ADMIN', 'PROJECT_MANAGER', 'ARTIST', 'VIEWER'],\n    MANAGE_ROLES: ['ADMIN', 'PROJECT_MANAGER'],\n\n    // Tasks\n    CREATE_TASK: ['ADMIN', 'PROJECT_MANAGER'],\n    EDIT_ANY_TASK: ['ADMIN', 'PROJECT_MANAGER'],\n    EDIT_OWN_TASK: ['ADMIN', 'PROJECT_MANAGER', 'ARTIST'],\n    DELETE_TASK: ['ADMIN', 'PROJECT_MANAGER'],\n    ASSIGN_TASK: ['ADMIN', 'PROJECT_MANAGER'],\n\n    // Comments\n    ADD_COMMENT: ['ADMIN', 'PROJECT_MANAGER', 'ARTIST'],\n    DELETE_ANY_COMMENT: ['ADMIN', 'PROJECT_MANAGER'],\n    DELETE_OWN_COMMENT: ['ADMIN', 'PROJECT_MANAGER', 'ARTIST'],\n\n    // Files\n    UPLOAD_FILE: ['ADMIN', 'PROJECT_MANAGER', 'ARTIST'],\n    DELETE_FILE: ['ADMIN', 'PROJECT_MANAGER'],\n} as const;\n\nexport function hasPermission(userRole: string, allowedRoles: readonly string[]): boolean {\n    return allowedRoles.includes(userRole);\n}\n\nimport prisma from \"@/lib/prisma\";\n\nexport async function getUserRoleInProject(userId: string, projectId: string): Promise<string> {\n    // 1. Check direct project role\n    const projectUser = await prisma.projectUser.findUnique({\n        where: {\n            projectId_userId: {\n                projectId,\n                userId,\n            },\n        },\n    });\n\n    if (projectUser) return projectUser.role;\n\n    // 2. Check workspace role (if implemented, workspace admins might have access to all projects)\n    // For now, we'll assume project-level roles are primary. \n    // But we should check if the user is a workspace admin.\n\n    const project = await prisma.project.findUnique({\n        where: { id: projectId },\n        select: { workspaceId: true },\n    });\n\n    if (project) {\n        const workspaceUser = await prisma.workspaceUser.findUnique({\n            where: {\n                workspaceId_userId: {\n                    workspaceId: project.workspaceId,\n                    userId,\n                },\n            },\n        });\n\n        if (workspaceUser && workspaceUser.role === ROLES.ADMIN) {\n            return ROLES.ADMIN;\n        }\n    }\n\n    // Default fallback (e.g., if user is owner of project)\n    const projectOwner = await prisma.project.findUnique({\n        where: { id: projectId },\n        select: { ownerId: true },\n    });\n\n    if (projectOwner && projectOwner.ownerId === userId) {\n        return ROLES.ADMIN;\n    }\n\n    return ROLES.VIEWER; // Default role if found but no specific role assigned? Or maybe null?\n    // For safety, let's return a restricted role or handle \"not found\"\n}\n"],"names":[],"mappings":";;;;;;;;;;AAyCA;AAzCO,MAAM,QAAQ;IACjB,OAAO;IACP,iBAAiB;IACjB,QAAQ;IACR,QAAQ;AACZ;AAIO,MAAM,cAAc;IACvB,YAAY;IACZ,kBAAkB;QAAC;KAAQ;IAC3B,gBAAgB;QAAC;QAAS;KAAkB;IAC5C,gBAAgB;QAAC;KAAQ;IAEzB,UAAU;IACV,gBAAgB;QAAC;QAAS;KAAkB;IAC5C,cAAc;QAAC;QAAS;QAAmB;QAAU;KAAS;IAC9D,cAAc;QAAC;QAAS;KAAkB;IAE1C,QAAQ;IACR,aAAa;QAAC;QAAS;KAAkB;IACzC,eAAe;QAAC;QAAS;KAAkB;IAC3C,eAAe;QAAC;QAAS;QAAmB;KAAS;IACrD,aAAa;QAAC;QAAS;KAAkB;IACzC,aAAa;QAAC;QAAS;KAAkB;IAEzC,WAAW;IACX,aAAa;QAAC;QAAS;QAAmB;KAAS;IACnD,oBAAoB;QAAC;QAAS;KAAkB;IAChD,oBAAoB;QAAC;QAAS;QAAmB;KAAS;IAE1D,QAAQ;IACR,aAAa;QAAC;QAAS;QAAmB;KAAS;IACnD,aAAa;QAAC;QAAS;KAAkB;AAC7C;AAEO,SAAS,cAAc,QAAgB,EAAE,YAA+B;IAC3E,OAAO,aAAa,QAAQ,CAAC;AACjC;;AAIO,eAAe,qBAAqB,MAAc,EAAE,SAAiB;IACxE,+BAA+B;IAC/B,MAAM,cAAc,MAAM,iIAAM,CAAC,WAAW,CAAC,UAAU,CAAC;QACpD,OAAO;YACH,kBAAkB;gBACd;gBACA;YACJ;QACJ;IACJ;IAEA,IAAI,aAAa,OAAO,YAAY,IAAI;IAExC,+FAA+F;IAC/F,0DAA0D;IAC1D,wDAAwD;IAExD,MAAM,UAAU,MAAM,iIAAM,CAAC,OAAO,CAAC,UAAU,CAAC;QAC5C,OAAO;YAAE,IAAI;QAAU;QACvB,QAAQ;YAAE,aAAa;QAAK;IAChC;IAEA,IAAI,SAAS;QACT,MAAM,gBAAgB,MAAM,iIAAM,CAAC,aAAa,CAAC,UAAU,CAAC;YACxD,OAAO;gBACH,oBAAoB;oBAChB,aAAa,QAAQ,WAAW;oBAChC;gBACJ;YACJ;QACJ;QAEA,IAAI,iBAAiB,cAAc,IAAI,KAAK,MAAM,KAAK,EAAE;YACrD,OAAO,MAAM,KAAK;QACtB;IACJ;IAEA,uDAAuD;IACvD,MAAM,eAAe,MAAM,iIAAM,CAAC,OAAO,CAAC,UAAU,CAAC;QACjD,OAAO;YAAE,IAAI;QAAU;QACvB,QAAQ;YAAE,SAAS;QAAK;IAC5B;IAEA,IAAI,gBAAgB,aAAa,OAAO,KAAK,QAAQ;QACjD,OAAO,MAAM,KAAK;IACtB;IAEA,OAAO,MAAM,MAAM,EAAE,sEAAsE;AAC3F,mEAAmE;AACvE"}},
    {"offset": {"line": 382, "column": 0}, "map": {"version":3,"sources":["file:///Users/rubenoroz/scena-v1/src/app/api/projects/%5BprojectId%5D/users/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport prisma from \"@/lib/prisma\";\nimport { auth } from \"@/lib/auth\";\nimport { getUserRoleInProject, hasPermission, PERMISSIONS, ROLES } from \"@/lib/permissions\";\n\n// GET /api/projects/[projectId]/users\nexport async function GET(\n    req: NextRequest,\n    { params }: { params: Promise<{ projectId: string }> }\n) {\n    try {\n        const session = await auth();\n        if (!session) {\n            return NextResponse.json({ message: \"Unauthorized\" }, { status: 401 });\n        }\n\n        const { projectId } = await params;\n\n        // 1. Get explicit project users\n        const projectUsers = await prisma.projectUser.findMany({\n            where: { projectId },\n            include: {\n                user: {\n                    select: {\n                        id: true,\n                        name: true,\n                        email: true,\n                        image: true,\n                    }\n                }\n            }\n        });\n\n        // 2. Get workspace users (implicit access)\n        const project = await prisma.project.findUnique({\n            where: { id: projectId },\n            include: {\n                workspace: {\n                    include: {\n                        workspaceUsers: {\n                            include: {\n                                user: {\n                                    select: {\n                                        id: true,\n                                        name: true,\n                                        email: true,\n                                        image: true,\n                                    }\n                                }\n                            }\n                        }\n                    }\n                },\n                owner: {\n                    select: {\n                        id: true,\n                        name: true,\n                        email: true,\n                        image: true,\n                    }\n                }\n            }\n        });\n\n        if (!project) {\n            return NextResponse.json({ message: \"Project not found\" }, { status: 404 });\n        }\n\n        // Map to unify structure\n        const userMap = new Map();\n\n        // Add owner (Admin by default in context of project ownership, usually)\n        // Or we can check their workspace role. \n        // For simplicity, let's treat owner as having a role too if they are in workspace users.\n        // If not, we add them.\n\n        // Add workspace users first (base roles)\n        project.workspace.workspaceUsers.forEach(wu => {\n            userMap.set(wu.userId, {\n                user: wu.user,\n                role: wu.role === 'ADMIN' ? 'ADMIN' : 'ARTIST', // Default mapping if not explicit in project\n                source: 'workspace',\n                workspaceRole: wu.role\n            });\n        });\n\n        // Override with project specific roles\n        projectUsers.forEach(pu => {\n            const existing = userMap.get(pu.userId);\n            userMap.set(pu.userId, {\n                user: pu.user,\n                role: pu.role,\n                source: 'project',\n                workspaceRole: existing?.workspaceRole\n            });\n        });\n\n        // Ensure owner is in the list with ADMIN rights if not already\n        if (!userMap.has(project.ownerId)) {\n            userMap.set(project.ownerId, {\n                user: project.owner,\n                role: 'ADMIN',\n                source: 'owner'\n            });\n        } else {\n            // Force owner to be ADMIN effectively? Or just respect their role?\n            // Usually owner is ADMIN.\n            const ownerEntry = userMap.get(project.ownerId);\n            ownerEntry.role = 'ADMIN';\n            ownerEntry.source = 'owner';\n        }\n\n        return NextResponse.json(Array.from(userMap.values()));\n    } catch (error) {\n        console.error(\"Error fetching project users:\", error);\n        return NextResponse.json(\n            { message: \"Error fetching users\" },\n            { status: 500 }\n        );\n    }\n}\n\n// POST /api/projects/[projectId]/users\n// Add a user to the project (create ProjectUser record)\nexport async function POST(\n    req: NextRequest,\n    { params }: { params: Promise<{ projectId: string }> }\n) {\n    try {\n        const session = await auth();\n        if (!session?.user?.id) {\n            return NextResponse.json({ message: \"Unauthorized\" }, { status: 401 });\n        }\n\n        const { projectId } = await params;\n        const { email, role } = await req.json();\n\n        if (!email || !role) {\n            return NextResponse.json({ message: \"Email and role are required\" }, { status: 400 });\n        }\n\n        // Check permissions\n        const currentUserRole = await getUserRoleInProject(session.user.id, projectId);\n        if (!hasPermission(currentUserRole, PERMISSIONS.MANAGE_PROJECT)) {\n            return NextResponse.json({ message: \"Forbidden\" }, { status: 403 });\n        }\n\n        // Find user by email\n        const userToAdd = await prisma.user.findUnique({\n            where: { email }\n        });\n\n        if (!userToAdd) {\n            return NextResponse.json({ message: \"User not found\" }, { status: 404 });\n        }\n\n        // Check if user is already in the project explicitly\n        const existingProjectUser = await prisma.projectUser.findUnique({\n            where: {\n                projectId_userId: {\n                    projectId,\n                    userId: userToAdd.id\n                }\n            }\n        });\n\n        if (existingProjectUser) {\n            return NextResponse.json({ message: \"User already in project\" }, { status: 409 });\n        }\n\n        // Create ProjectUser\n        const newProjectUser = await prisma.projectUser.create({\n            data: {\n                projectId,\n                userId: userToAdd.id,\n                role: role\n            },\n            include: {\n                user: {\n                    select: {\n                        id: true,\n                        name: true,\n                        email: true,\n                        image: true\n                    }\n                }\n            }\n        });\n\n        return NextResponse.json(newProjectUser, { status: 201 });\n\n    } catch (error) {\n        console.error(\"Error adding user to project:\", error);\n        return NextResponse.json(\n            { message: \"Error adding user to project\" },\n            { status: 500 }\n        );\n    }\n}\n"],"names":[],"mappings":"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"}}]
}