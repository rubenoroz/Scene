(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55838,(e,t,r)=>{"use strict";var n=e.r(71645),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=n.useState,a=n.useEffect,l=n.useLayoutEffect,o=n.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!i(e,r)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=s({inst:{value:r,getSnapshot:t}}),i=n[0].inst,d=n[1];return l(function(){i.value=r,i.getSnapshot=t,c(i)&&d({inst:i})},[e,r,t]),a(function(){return c(i)&&d({inst:i}),e(function(){c(i)&&d({inst:i})})},[e]),o(r),r};r.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:d},2239,(e,t,r)=>{"use strict";t.exports=e.r(55838)},92865,(e,t,r)=>{"use strict";var n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,l=(e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})},o=(e,t,r)=>t.has(e)?(e=>{throw TypeError(e)})("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),c={};l(c,{Decimal:()=>tr,Public:()=>d,getRuntime:()=>M,makeStrictEnum:()=>k,objectEnumValues:()=>j}),t.exports=((e,t,r,l)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of s(t))a.call(e,o)||o===r||n(e,o,{get:()=>t[o],enumerable:!(l=i(t,o))||l.enumerable});return e})(n({},"__esModule",{value:!0}),c);var d={};function u(){return e=>e}l(d,{validator:()=>u});var h,f=Symbol(),p=new WeakMap,m=class{constructor(e){e===f?p.set(this,"Prisma.".concat(this._getName())):p.set(this,"new Prisma.".concat(this._getNamespace(),".").concat(this._getName(),"()"))}_getName(){return this.constructor.name}toString(){return p.get(this)}},g=class extends m{_getNamespace(){return"NullTypes"}},v=class extends g{constructor(){super(...arguments),o(this,h)}};h=new WeakMap,N(v,"DbNull");var x,y=class extends g{constructor(){super(...arguments),o(this,x)}};x=new WeakMap,N(y,"JsonNull");var b,w=class extends g{constructor(){super(...arguments),o(this,b)}};b=new WeakMap,N(w,"AnyNull");var j={classes:{DbNull:v,JsonNull:y,AnyNull:w},instances:{DbNull:new v(f),JsonNull:new y(f),AnyNull:new w(f)}};function N(e,t){Object.defineProperty(e,"name",{value:t,configurable:!0})}var E=new Set(["toJSON","$$typeof","asymmetricMatch",Symbol.iterator,Symbol.toStringTag,Symbol.isConcatSpreadable,Symbol.toPrimitive]);function k(e){return new Proxy(e,{get(e,t){if(t in e)return e[t];if(!E.has(t))throw TypeError("Invalid enum value: ".concat(String(t)))}})}var C=()=>{var e,t;return(null==(t=null==(e=globalThis.process)?void 0:e.release)?void 0:t.name)==="node"},S=()=>{var e,t;return!!globalThis.Bun||!!(null!=(t=null==(e=globalThis.process)?void 0:e.versions)&&t.bun)},D=()=>!!globalThis.Deno,T=()=>"object"==typeof globalThis.Netlify,R=()=>"object"==typeof globalThis.EdgeRuntime,I=()=>{var e;return(null==(e=globalThis.navigator)?void 0:e.userAgent)==="Cloudflare-Workers"},A={node:"Node.js",workerd:"Cloudflare Workers",deno:"Deno and Deno Deploy",netlify:"Netlify Edge Functions","edge-light":"Edge Runtime (Vercel Edge Functions, Vercel Edge Middleware, Next.js (Pages Router) Edge API Routes, Next.js (App Router) Edge Route Handlers or Next.js Middleware)"};function M(){var e;let t=null!=(e=[[T,"netlify"],[R,"edge-light"],[I,"workerd"],[D,"deno"],[S,"bun"],[C,"node"]].flatMap(e=>e[0]()?[e[1]]:[]).at(0))?e:"";return{id:t,prettyName:A[t]||t,isEdge:["workerd","deno","netlify","edge-light"].includes(t)}}var O,P,F="0123456789abcdef",L="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",U="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",_={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:9e15,crypto:!1},$=!0,V="[DecimalError] ",z=V+"Invalid argument: ",B=V+"Precision limit exceeded",H=V+"crypto unavailable",q="[object Decimal]",W=Math.floor,J=Math.pow,K=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Y=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Z=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,X=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,G=L.length-1,Q=U.length-1,ee={toStringTag:q};function et(e){var t,r,n,i=e.length-1,s="",a=e[0];if(i>0){for(s+=a,t=1;t<i;t++)(r=7-(n=e[t]+"").length)&&(s+=eh(r)),s+=n;(r=7-(n=(a=e[t])+"").length)&&(s+=eh(r))}else if(0===a)return"0";for(;a%10==0;)a/=10;return s+a}function er(e,t,r){if(e!==~~e||e<t||e>r)throw Error(z+e)}function en(e,t,r,n){var i,s,a,l;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=7,i=0):(i=Math.ceil((t+1)/7),t%=7),s=J(10,7-t),l=e[i]%s|0,null==n?t<3?(0==t?l=l/100|0:1==t&&(l=l/10|0),a=r<4&&99999==l||r>3&&49999==l||5e4==l||0==l):a=(r<4&&l+1==s||r>3&&l+1==s/2)&&(e[i+1]/s/100|0)==J(10,t-2)-1||(l==s/2||0==l)&&(e[i+1]/s/100|0)==0:t<4?(0==t?l=l/1e3|0:1==t?l=l/100|0:2==t&&(l=l/10|0),a=(n||r<4)&&9999==l||!n&&r>3&&4999==l):a=((n||r<4)&&l+1==s||!n&&r>3&&l+1==s/2)&&(e[i+1]/s/1e3|0)==J(10,t-3)-1,a}function ei(e,t,r){for(var n,i,s=[0],a=0,l=e.length;a<l;){for(i=s.length;i--;)s[i]*=t;for(s[0]+=F.indexOf(e.charAt(a++)),n=0;n<s.length;n++)s[n]>r-1&&(void 0===s[n+1]&&(s[n+1]=0),s[n+1]+=s[n]/r|0,s[n]%=r)}return s.reverse()}ee.absoluteValue=ee.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),ea(e)},ee.ceil=function(){return ea(new this.constructor(this),this.e+1,2)},ee.clampedTo=ee.clamp=function(e,t){var r=this.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(z+t);return 0>this.cmp(e)?e:this.cmp(t)>0?t:new r(this)},ee.comparedTo=ee.cmp=function(e){var t,r,n,i,s=this.d,a=(e=new this.constructor(e)).d,l=this.s,o=e.s;if(!s||!a)return l&&o?l!==o?l:s===a?0:!s^l<0?1:-1:NaN;if(!s[0]||!a[0])return s[0]?l:a[0]?-o:0;if(l!==o)return l;if(this.e!==e.e)return this.e>e.e^l<0?1:-1;for(n=s.length,i=a.length,t=0,r=n<i?n:i;t<r;++t)if(s[t]!==a[t])return s[t]>a[t]^l<0?1:-1;return n===i?0:n>i^l<0?1:-1},ee.cosine=ee.cos=function(){var e,t,r=this,n=r.constructor;return r.d?r.d[0]?(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+7,n.rounding=1,r=function(e,t){var r,n,i;if(t.isZero())return t;(n=t.d.length)<32?i=(1/ew(4,r=Math.ceil(n/3))).toString():(r=16,i="2.3283064365386962890625e-10"),e.precision+=r,t=eb(e,1,t.times(i),new e(1));for(var s=r;s--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=r,t}(n,ej(n,r)),n.precision=e,n.rounding=t,ea(2==P||3==P?r.neg():r,e,t,!0)):new n(1):new n(NaN)},ee.cubeRoot=ee.cbrt=function(){var e,t,r,n,i,s,a,l,o,c,d=this.constructor;if(!this.isFinite()||this.isZero())return new d(this);for($=!1,(s=this.s*J(this.s*this,1/3))&&Math.abs(s)!=1/0?n=new d(s.toString()):(r=et(this.d),(s=((e=this.e)-r.length+1)%3)&&(r+=1==s||-2==s?"0":"00"),s=J(r,1/3),e=W((e+1)/3)-(e%3==(e<0?-1:2)),(n=new d(r=s==1/0?"5e"+e:(r=s.toExponential()).slice(0,r.indexOf("e")+1)+e)).s=this.s),a=(e=d.precision)+3;;)if(n=es((c=(o=(l=n).times(l).times(l)).plus(this)).plus(this).times(l),c.plus(o),a+2,1),et(l.d).slice(0,a)===(r=et(n.d)).slice(0,a))if("9999"!=(r=r.slice(a-3,a+1))&&(i||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(ea(n,e+1,1),t=!n.times(n).times(n).eq(this));break}else{if(!i&&(ea(l,e+1,0),l.times(l).times(l).eq(this))){n=l;break}a+=4,i=1}return $=!0,ea(n,e,d.rounding,t)},ee.decimalPlaces=ee.dp=function(){var e,t=this.d,r=NaN;if(t){if(r=((e=t.length-1)-W(this.e/7))*7,e=t[e])for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r},ee.dividedBy=ee.div=function(e){return es(this,new this.constructor(e))},ee.dividedToIntegerBy=ee.divToInt=function(e){var t=this.constructor;return ea(es(this,new t(e),0,1,1),t.precision,t.rounding)},ee.equals=ee.eq=function(e){return 0===this.cmp(e)},ee.floor=function(){return ea(new this.constructor(this),this.e+1,3)},ee.greaterThan=ee.gt=function(e){return this.cmp(e)>0},ee.greaterThanOrEqualTo=ee.gte=function(e){var t=this.cmp(e);return 1==t||0===t},ee.hyperbolicCosine=ee.cosh=function(){var e,t,r,n,i,s=this,a=s.constructor,l=new a(1);if(!s.isFinite())return new a(s.s?1/0:NaN);if(s.isZero())return l;r=a.precision,n=a.rounding,a.precision=r+Math.max(s.e,s.sd())+4,a.rounding=1,(i=s.d.length)<32?t=(1/ew(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),s=eb(a,1,s.times(t),new a(1),!0);for(var o,c=e,d=new a(8);c--;)o=s.times(s),s=l.minus(o.times(d.minus(o.times(d))));return ea(s,a.precision=r,a.rounding=n,!0)},ee.hyperbolicSine=ee.sinh=function(){var e,t,r,n,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(t=s.precision,r=s.rounding,s.precision=t+Math.max(i.e,i.sd())+4,s.rounding=1,(n=i.d.length)<3)i=eb(s,2,i,i,!0);else{e=(e=1.4*Math.sqrt(n))>16?16:0|e,i=eb(s,2,i=i.times(1/ew(5,e)),i,!0);for(var a,l=new s(5),o=new s(16),c=new s(20);e--;)a=i.times(i),i=i.times(l.plus(a.times(o.times(a).plus(c))))}return s.precision=t,s.rounding=r,ea(i,t,r,!0)},ee.hyperbolicTangent=ee.tanh=function(){var e,t,r=this.constructor;return this.isFinite()?this.isZero()?new r(this):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,es(this.sinh(),this.cosh(),r.precision=e,r.rounding=t)):new r(this.s)},ee.inverseCosine=ee.acos=function(){var e=this,t=e.constructor,r=e.abs().cmp(1),n=t.precision,i=t.rounding;return -1!==r?0===r?e.isNeg()?ed(t,n,i):new t(0):new t(NaN):e.isZero()?ed(t,n+4,i).times(.5):(t.precision=n+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=n,t.rounding=i,e.times(2))},ee.inverseHyperbolicCosine=ee.acosh=function(){var e,t,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(e=n.precision,t=n.rounding,n.precision=e+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,$=!1,r=r.times(r).minus(1).sqrt().plus(r),$=!0,n.precision=e,n.rounding=t,r.ln()):new n(r)},ee.inverseHyperbolicSine=ee.asinh=function(){var e,t,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,$=!1,r=r.times(r).plus(1).sqrt().plus(r),$=!0,n.precision=e,n.rounding=t,r.ln())},ee.inverseHyperbolicTangent=ee.atanh=function(){var e,t,r,n,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=s.precision,t=s.rounding,Math.max(n=i.sd(),e)<-(2*i.e)-1?ea(new s(i),e,t,!0):(s.precision=r=n-i.e,i=es(i.plus(1),new s(1).minus(i),r+e,1),s.precision=e+4,s.rounding=1,i=i.ln(),s.precision=e,s.rounding=t,i.times(.5))):new s(NaN)},ee.inverseSine=ee.asin=function(){var e,t,r,n,i=this,s=i.constructor;return i.isZero()?new s(i):(t=i.abs().cmp(1),r=s.precision,n=s.rounding,-1!==t?0===t?((e=ed(s,r+4,n).times(.5)).s=i.s,e):new s(NaN):(s.precision=r+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=r,s.rounding=n,i.times(2)))},ee.inverseTangent=ee.atan=function(){var e,t,r,n,i,s,a,l,o,c=this,d=c.constructor,u=d.precision,h=d.rounding;if(c.isFinite()){if(c.isZero())return new d(c);if(c.abs().eq(1)&&u+4<=Q)return(a=ed(d,u+4,h).times(.25)).s=c.s,a}else{if(!c.s)return new d(NaN);if(u+4<=Q)return(a=ed(d,u+4,h).times(.5)).s=c.s,a}for(d.precision=l=u+10,d.rounding=1,e=r=Math.min(28,l/7+2|0);e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for($=!1,t=Math.ceil(l/7),n=1,o=c.times(c),a=new d(c),i=c;-1!==e;)if(i=i.times(o),s=a.minus(i.div(n+=2)),i=i.times(o),void 0!==(a=s.plus(i.div(n+=2))).d[t])for(e=t;a.d[e]===s.d[e]&&e--;);return r&&(a=a.times(2<<r-1)),$=!0,ea(a,d.precision=u,d.rounding=h,!0)},ee.isFinite=function(){return!!this.d},ee.isInteger=ee.isInt=function(){return!!this.d&&W(this.e/7)>this.d.length-2},ee.isNaN=function(){return!this.s},ee.isNegative=ee.isNeg=function(){return this.s<0},ee.isPositive=ee.isPos=function(){return this.s>0},ee.isZero=function(){return!!this.d&&0===this.d[0]},ee.lessThan=ee.lt=function(e){return 0>this.cmp(e)},ee.lessThanOrEqualTo=ee.lte=function(e){return 1>this.cmp(e)},ee.logarithm=ee.log=function(e){var t,r,n,i,s,a,l,o=this.constructor,c=o.precision,d=o.rounding;if(null==e)e=new o(10),t=!0;else{if(r=(e=new o(e)).d,e.s<0||!r||!r[0]||e.eq(1))return new o(NaN);t=e.eq(10)}if(r=this.d,this.s<0||!r||!r[0]||this.eq(1))return new o(r&&!r[0]?-1/0:1!=this.s?NaN:r?0:1/0);if(t)if(r.length>1)i=!0;else{for(n=r[0];n%10==0;)n/=10;i=1!==n}if($=!1,en((l=es(s=ev(this,a=c+5),t?ec(o,a+10):ev(e,a),a,1)).d,n=c,d))do if(a+=10,l=es(s=ev(this,a),t?ec(o,a+10):ev(e,a),a,1),!i){+et(l.d).slice(n+1,n+15)+1==1e14&&(l=ea(l,c+1,0));break}while(en(l.d,n+=10,d))return $=!0,ea(l,c,d)},ee.minus=ee.sub=function(e){var t,r,n,i,s,a,l,o,c,d,u,h,f=this.constructor;if(e=new f(e),!this.d||!e.d)return this.s&&e.s?this.d?e.s=-e.s:e=new f(e.d||this.s!==e.s?this:NaN):e=new f(NaN),e;if(this.s!=e.s)return e.s=-e.s,this.plus(e);if(c=this.d,h=e.d,l=f.precision,o=f.rounding,!c[0]||!h[0]){if(h[0])e.s=-e.s;else{if(!c[0])return new f(3===o?-0:0);e=new f(this)}return $?ea(e,l,o):e}if(r=W(e.e/7),d=W(this.e/7),c=c.slice(),s=d-r){for((u=s<0)?(t=c,s=-s,a=h.length):(t=h,r=d,a=c.length),s>(n=Math.max(Math.ceil(l/7),a)+2)&&(s=n,t.length=1),t.reverse(),n=s;n--;)t.push(0);t.reverse()}else{for((u=(n=c.length)<(a=h.length))&&(a=n),n=0;n<a;n++)if(c[n]!=h[n]){u=c[n]<h[n];break}s=0}for(u&&(t=c,c=h,h=t,e.s=-e.s),a=c.length,n=h.length-a;n>0;--n)c[a++]=0;for(n=h.length;n>s;){if(c[--n]<h[n]){for(i=n;i&&0===c[--i];)c[i]=1e7-1;--c[i],c[n]+=1e7}c[n]-=h[n]}for(;0===c[--a];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(e.d=c,e.e=eo(c,r),$?ea(e,l,o):e):new f(3===o?-0:0)},ee.modulo=ee.mod=function(e){var t,r=this.constructor;return e=new r(e),this.d&&e.s&&(!e.d||e.d[0])?e.d&&(!this.d||this.d[0])?($=!1,9==r.modulo?(t=es(this,e.abs(),0,3,1),t.s*=e.s):t=es(this,e,0,r.modulo,1),t=t.times(e),$=!0,this.minus(t)):ea(new r(this),r.precision,r.rounding):new r(NaN)},ee.naturalExponential=ee.exp=function(){return eg(this)},ee.naturalLogarithm=ee.ln=function(){return ev(this)},ee.negated=ee.neg=function(){var e=new this.constructor(this);return e.s=-e.s,ea(e)},ee.plus=ee.add=function(e){var t,r,n,i,s,a,l,o,c,d,u=this.constructor;if(e=new u(e),!this.d||!e.d)return this.s&&e.s?this.d||(e=new u(e.d||this.s===e.s?this:NaN)):e=new u(NaN),e;if(this.s!=e.s)return e.s=-e.s,this.minus(e);if(c=this.d,d=e.d,l=u.precision,o=u.rounding,!c[0]||!d[0])return d[0]||(e=new u(this)),$?ea(e,l,o):e;if(s=W(this.e/7),n=W(e.e/7),c=c.slice(),i=s-n){for(i<0?(r=c,i=-i,a=d.length):(r=d,n=s,a=c.length),i>(a=(s=Math.ceil(l/7))>a?s+1:a+1)&&(i=a,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for((a=c.length)-(i=d.length)<0&&(i=a,r=d,d=c,c=r),t=0;i;)t=(c[--i]=c[i]+d[i]+t)/1e7|0,c[i]%=1e7;for(t&&(c.unshift(t),++n),a=c.length;0==c[--a];)c.pop();return e.d=c,e.e=eo(c,n),$?ea(e,l,o):e},ee.precision=ee.sd=function(e){var t;if(void 0!==e&&!!e!==e&&1!==e&&0!==e)throw Error(z+e);return this.d?(t=eu(this.d),e&&this.e+1>t&&(t=this.e+1)):t=NaN,t},ee.round=function(){var e=this.constructor;return ea(new e(this),this.e+1,e.rounding)},ee.sine=ee.sin=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+7,n.rounding=1,r=function(e,t){var r,n=t.d.length;if(n<3)return t.isZero()?t:eb(e,2,t,t);r=(r=1.4*Math.sqrt(n))>16?16:0|r,t=eb(e,2,t=t.times(1/ew(5,r)),t);for(var i,s=new e(5),a=new e(16),l=new e(20);r--;)i=t.times(t),t=t.times(s.plus(i.times(a.times(i).minus(l))));return t}(n,ej(n,r)),n.precision=e,n.rounding=t,ea(P>2?r.neg():r,e,t,!0)):new n(NaN)},ee.squareRoot=ee.sqrt=function(){var e,t,r,n,i,s,a=this.d,l=this.e,o=this.s,c=this.constructor;if(1!==o||!a||!a[0])return new c(!o||o<0&&(!a||a[0])?NaN:a?this:1/0);for($=!1,0==(o=Math.sqrt(+this))||o==1/0?(((t=et(a)).length+l)%2==0&&(t+="0"),o=Math.sqrt(t),l=W((l+1)/2)-(l<0||l%2),n=new c(t=o==1/0?"5e"+l:(t=o.toExponential()).slice(0,t.indexOf("e")+1)+l)):n=new c(o.toString()),r=(l=c.precision)+3;;)if(n=(s=n).plus(es(this,s,r+2,1)).times(.5),et(s.d).slice(0,r)===(t=et(n.d)).slice(0,r))if("9999"!=(t=t.slice(r-3,r+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(ea(n,l+1,1),e=!n.times(n).eq(this));break}else{if(!i&&(ea(s,l+1,0),s.times(s).eq(this))){n=s;break}r+=4,i=1}return $=!0,ea(n,l,c.rounding,e)},ee.tangent=ee.tan=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+10,n.rounding=1,(r=r.sin()).s=1,r=es(r,new n(1).minus(r.times(r)).sqrt(),e+10,0),n.precision=e,n.rounding=t,ea(2==P||4==P?r.neg():r,e,t,!0)):new n(NaN)},ee.times=ee.mul=function(e){var t,r,n,i,s,a,l,o,c,d=this.constructor,u=this.d,h=(e=new d(e)).d;if(e.s*=this.s,!u||!u[0]||!h||!h[0])return new d(!e.s||u&&!u[0]&&!h||h&&!h[0]&&!u?NaN:!u||!h?e.s/0:0*e.s);for(r=W(this.e/7)+W(e.e/7),(o=u.length)<(c=h.length)&&(s=u,u=h,h=s,a=o,o=c,c=a),s=[],n=a=o+c;n--;)s.push(0);for(n=c;--n>=0;){for(t=0,i=o+n;i>n;)l=s[i]+h[n]*u[i-n-1]+t,s[i--]=l%1e7|0,t=l/1e7|0;s[i]=(s[i]+t)%1e7|0}for(;!s[--a];)s.pop();return t?++r:s.shift(),e.d=s,e.e=eo(s,r),$?ea(e,d.precision,d.rounding):e},ee.toBinary=function(e,t){return eN(this,2,e,t)},ee.toDecimalPlaces=ee.toDP=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(er(e,0,1e9),void 0===t?t=n.rounding:er(t,0,8),ea(r,e+r.e+1,t))},ee.toExponential=function(e,t){var r,n=this,i=n.constructor;return void 0===e?r=el(n,!0):(er(e,0,1e9),void 0===t?t=i.rounding:er(t,0,8),r=el(n=ea(new i(n),e+1,t),!0,e+1)),n.isNeg()&&!n.isZero()?"-"+r:r},ee.toFixed=function(e,t){var r,n,i=this.constructor;return void 0===e?r=el(this):(er(e,0,1e9),void 0===t?t=i.rounding:er(t,0,8),r=el(n=ea(new i(this),e+this.e+1,t),!1,e+n.e+1)),this.isNeg()&&!this.isZero()?"-"+r:r},ee.toFraction=function(e){var t,r,n,i,s,a,l,o,c,d,u,h,f=this.d,p=this.constructor;if(!f)return new p(this);if(c=r=new p(1),n=o=new p(0),a=(s=(t=new p(n)).e=eu(f)-this.e-1)%7,t.d[0]=J(10,a<0?7+a:a),null==e)e=s>0?t:c;else{if(!(l=new p(e)).isInt()||l.lt(c))throw Error(z+l);e=l.gt(t)?s>0?t:c:l}for($=!1,l=new p(et(f)),d=p.precision,p.precision=s=7*f.length*2;u=es(l,t,0,1,1),1!=(i=r.plus(u.times(n))).cmp(e);)r=n,n=i,i=c,c=o.plus(u.times(i)),o=i,i=t,t=l.minus(u.times(i)),l=i;return i=es(e.minus(r),n,0,1,1),o=o.plus(i.times(c)),r=r.plus(i.times(n)),o.s=c.s=this.s,h=1>es(c,n,s,1).minus(this).abs().cmp(es(o,r,s,1).minus(this).abs())?[c,n]:[o,r],p.precision=d,$=!0,h},ee.toHexadecimal=ee.toHex=function(e,t){return eN(this,16,e,t)},ee.toNearest=function(e,t){var r=this,n=r.constructor;if(r=new n(r),null==e){if(!r.d)return r;e=new n(1),t=n.rounding}else{if(e=new n(e),void 0===t?t=n.rounding:er(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?($=!1,r=es(r,e,0,t,1).times(e),$=!0,ea(r)):(e.s=r.s,r=e),r},ee.toNumber=function(){return+this},ee.toOctal=function(e,t){return eN(this,8,e,t)},ee.toPower=ee.pow=function(e){var t,r,n,i,s,a,l=this,o=l.constructor,c=+(e=new o(e));if(!l.d||!e.d||!l.d[0]||!e.d[0])return new o(J(+l,c));if((l=new o(l)).eq(1))return l;if(n=o.precision,s=o.rounding,e.eq(1))return ea(l,n,s);if((t=W(e.e/7))>=e.d.length-1&&(r=c<0?-c:c)<=0x1fffffffffffff)return i=ef(o,l,r,n),e.s<0?new o(1).div(i):ea(i,n,s);if((a=l.s)<0){if(t<e.d.length-1)return new o(NaN);if((1&e.d[t])==0&&(a=1),0==l.e&&1==l.d[0]&&1==l.d.length)return l.s=a,l}return(t=0!=(r=J(+l,c))&&isFinite(r)?new o(r+"").e:W(c*(Math.log("0."+et(l.d))/Math.LN10+l.e+1)))>o.maxE+1||t<o.minE-1?new o(t>0?a/0:0):($=!1,o.rounding=l.s=1,r=Math.min(12,(t+"").length),(i=eg(e.times(ev(l,n+r)),n)).d&&en((i=ea(i,n+5,1)).d,n,s)&&(t=n+10,+et((i=ea(eg(e.times(ev(l,t+r)),t),t+5,1)).d).slice(n+1,n+15)+1==1e14&&(i=ea(i,n+1,0))),i.s=a,$=!0,o.rounding=s,ea(i,n,s))},ee.toPrecision=function(e,t){var r,n=this,i=n.constructor;return void 0===e?r=el(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(er(e,1,1e9),void 0===t?t=i.rounding:er(t,0,8),r=el(n=ea(new i(n),e,t),e<=n.e||n.e<=i.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+r:r},ee.toSignificantDigits=ee.toSD=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(er(e,1,1e9),void 0===t?t=r.rounding:er(t,0,8)),ea(new r(this),e,t)},ee.toString=function(){var e=this.constructor,t=el(this,this.e<=e.toExpNeg||this.e>=e.toExpPos);return this.isNeg()&&!this.isZero()?"-"+t:t},ee.truncated=ee.trunc=function(){return ea(new this.constructor(this),this.e+1,1)},ee.valueOf=ee.toJSON=function(){var e=this.constructor,t=el(this,this.e<=e.toExpNeg||this.e>=e.toExpPos);return this.isNeg()?"-"+t:t};var es=function(){function e(e,t,r){var n,i=0,s=e.length;for(e=e.slice();s--;)n=e[s]*t+i,e[s]=n%r|0,i=n/r|0;return i&&e.unshift(i),e}function t(e,t,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=+(e[r]<t[r]),e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,i,s,a,l,o){var c,d,u,h,f,p,m,g,v,x,y,b,w,j,N,E,k,C,S,D,T=n.constructor,R=n.s==i.s?1:-1,I=n.d,A=i.d;if(!I||!I[0]||!A||!A[0])return new T(!n.s||!i.s||(I?A&&I[0]==A[0]:!A)?NaN:I&&0==I[0]||!A?0*R:R/0);for(o?(f=1,d=n.e-i.e):(o=1e7,f=7,d=W(n.e/f)-W(i.e/f)),S=A.length,k=I.length,x=(v=new T(R)).d=[],u=0;A[u]==(I[u]||0);u++);if(A[u]>(I[u]||0)&&d--,null==s?(j=s=T.precision,a=T.rounding):j=l?s+(n.e-i.e)+1:s,j<0)x.push(1),p=!0;else{if(j=j/f+2|0,u=0,1==S){for(h=0,A=A[0],j++;(u<k||h)&&j--;u++)N=h*o+(I[u]||0),x[u]=N/A|0,h=N%A|0;p=h||u<k}else{for((h=o/(A[0]+1)|0)>1&&(A=e(A,h,o),I=e(I,h,o),S=A.length,k=I.length),E=S,b=(y=I.slice(0,S)).length;b<S;)y[b++]=0;(D=A.slice()).unshift(0),C=A[0],A[1]>=o/2&&++C;do h=0,(c=t(A,y,S,b))<0?(w=y[0],S!=b&&(w=w*o+(y[1]||0)),(h=w/C|0)>1?(h>=o&&(h=o-1),g=(m=e(A,h,o)).length,b=y.length,1==(c=t(m,y,g,b))&&(h--,r(m,S<g?D:A,g,o))):(0==h&&(c=h=1),m=A.slice()),(g=m.length)<b&&m.unshift(0),r(y,m,b,o),-1==c&&(b=y.length,(c=t(A,y,S,b))<1&&(h++,r(y,S<b?D:A,b,o))),b=y.length):0===c&&(h++,y=[0]),x[u++]=h,c&&y[0]?y[b++]=I[E]||0:(y=[I[E]],b=1);while((E++<k||void 0!==y[0])&&j--)p=void 0!==y[0]}x[0]||x.shift()}if(1==f)v.e=d,O=p;else{for(u=1,h=x[0];h>=10;h/=10)u++;v.e=u+d*f-1,ea(v,l?s+v.e+1:s,a,p)}return v}}();function ea(e,t,r,n){var i,s,a,l,o,c,d,u,h,f=e.constructor;e:if(null!=t){if(!(u=e.d))return e;for(i=1,l=u[0];l>=10;l/=10)i++;if((s=t-i)<0)s+=7,a=t,o=(d=u[h=0])/J(10,i-a-1)%10|0;else if((h=Math.ceil((s+1)/7))>=(l=u.length))if(n){for(;l++<=h;)u.push(0);d=o=0,i=1,s%=7,a=s-7+1}else break e;else{for(d=l=u[h],i=1;l>=10;l/=10)i++;s%=7,o=(a=s-7+i)<0?0:d/J(10,i-a-1)%10|0}if(n=n||t<0||void 0!==u[h+1]||(a<0?d:d%J(10,i-a-1)),c=r<4?(o||n)&&(0==r||r==(e.s<0?3:2)):o>5||5==o&&(4==r||n||6==r&&(s>0?a>0?d/J(10,i-a):0:u[h-1])%10&1||r==(e.s<0?8:7)),t<1||!u[0])return u.length=0,c?(t-=e.e+1,u[0]=J(10,(7-t%7)%7),e.e=-t||0):u[0]=e.e=0,e;if(0==s?(u.length=h,l=1,h--):(u.length=h+1,l=J(10,7-s),u[h]=a>0?(d/J(10,i-a)%J(10,a)|0)*l:0),c)for(;;)if(0==h){for(s=1,a=u[0];a>=10;a/=10)s++;for(a=u[0]+=l,l=1;a>=10;a/=10)l++;s!=l&&(e.e++,1e7==u[0]&&(u[0]=1));break}else{if(u[h]+=l,1e7!=u[h])break;u[h--]=0,l=1}for(s=u.length;0===u[--s];)u.pop()}return $&&(e.e>f.maxE?(e.d=null,e.e=NaN):e.e<f.minE&&(e.e=0,e.d=[0])),e}function el(e,t,r){if(!e.isFinite())return ex(e);var n,i=e.e,s=et(e.d),a=s.length;return t?(r&&(n=r-a)>0?s=s.charAt(0)+"."+s.slice(1)+eh(n):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):i<0?(s="0."+eh(-i-1)+s,r&&(n=r-a)>0&&(s+=eh(n))):i>=a?(s+=eh(i+1-a),r&&(n=r-i-1)>0&&(s=s+"."+eh(n))):((n=i+1)<a&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-a)>0&&(i+1===a&&(s+="."),s+=eh(n))),s}function eo(e,t){var r=e[0];for(t*=7;r>=10;r/=10)t++;return t}function ec(e,t,r){if(t>G)throw $=!0,r&&(e.precision=r),Error(B);return ea(new e(L),t,1,!0)}function ed(e,t,r){if(t>Q)throw Error(B);return ea(new e(U),t,r,!0)}function eu(e){var t=e.length-1,r=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function eh(e){for(var t="";e--;)t+="0";return t}function ef(e,t,r,n){var i,s=new e(1),a=Math.ceil(n/7+4);for($=!1;;){if(r%2&&eE((s=s.times(t)).d,a)&&(i=!0),0===(r=W(r/2))){r=s.d.length-1,i&&0===s.d[r]&&++s.d[r];break}eE((t=t.times(t)).d,a)}return $=!0,s}function ep(e){return 1&e.d[e.d.length-1]}function em(e,t,r){for(var n,i,s=new e(t[0]),a=0;++a<t.length;){if(!(i=new e(t[a])).s){s=i;break}((n=s.cmp(i))===r||0===n&&s.s===r)&&(s=i)}return s}function eg(e,t){var r,n,i,s,a,l,o,c=0,d=0,u=0,h=e.constructor,f=h.rounding,p=h.precision;if(!e.d||!e.d[0]||e.e>17)return new h(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?($=!1,o=p):o=t,l=new h(.03125);e.e>-2;)e=e.times(l),u+=5;for(o+=n=Math.log(J(2,u))/Math.LN10*2+5|0,r=s=a=new h(1),h.precision=o;;){if(s=ea(s.times(e),o,1),r=r.times(++d),et((l=a.plus(es(s,r,o,1))).d).slice(0,o)===et(a.d).slice(0,o)){for(i=u;i--;)a=ea(a.times(a),o,1);if(null!=t)return h.precision=p,a;if(!(c<3&&en(a.d,o-n,f,c)))return ea(a,h.precision=p,f,$=!0);h.precision=o+=10,r=s=l=new h(1),d=0,c++}a=l}}function ev(e,t){var r,n,i,s,a,l,o,c,d,u,h,f=1,p=e,m=p.d,g=p.constructor,v=g.rounding,x=g.precision;if(p.s<0||!m||!m[0]||!p.e&&1==m[0]&&1==m.length)return new g(m&&!m[0]?-1/0:1!=p.s?NaN:m?0:p);if(null==t?($=!1,d=x):d=t,g.precision=d+=10,n=(r=et(m)).charAt(0),!(15e14>Math.abs(s=p.e)))return c=ec(g,d+2,x).times(s+""),p=ev(new g(n+"."+r.slice(1)),d-10).plus(c),g.precision=x,null==t?ea(p,x,v,$=!0):p;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=et((p=p.times(e)).d)).charAt(0),f++;for(s=p.e,n>1?(p=new g("0."+r),s++):p=new g(n+"."+r.slice(1)),u=p,o=a=p=es(p.minus(1),p.plus(1),d,1),h=ea(p.times(p),d,1),i=3;;){if(a=ea(a.times(h),d,1),et((c=o.plus(es(a,new g(i),d,1))).d).slice(0,d)===et(o.d).slice(0,d))if(o=o.times(2),0!==s&&(o=o.plus(ec(g,d+2,x).times(s+""))),o=es(o,new g(f),d,1),null!=t)return g.precision=x,o;else{if(!en(o.d,d-10,v,l))return ea(o,g.precision=x,v,$=!0);g.precision=d+=10,c=a=p=es(u.minus(1),u.plus(1),d,1),h=ea(p.times(p),d,1),i=l=1}o=c,i+=2}}function ex(e){return String(e.s*e.s/0)}function ey(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);n++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(n,i)){if(i-=n,e.e=r=r-n-1,e.d=[],n=(r+1)%7,r<0&&(n+=7),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=7;n<i;)e.d.push(+t.slice(n,n+=7));n=7-(t=t.slice(n)).length}else n-=i;for(;n--;)t+="0";e.d.push(+t),$&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function eb(e,t,r,n,i){var s,a,l,o,c=e.precision,d=Math.ceil(c/7);for($=!1,o=r.times(r),l=new e(n);;){if(a=es(l.times(o),new e(t++*t++),c,1),l=i?n.plus(a):n.minus(a),n=es(a.times(o),new e(t++*t++),c,1),void 0!==(a=l.plus(n)).d[d]){for(s=d;a.d[s]===l.d[s]&&s--;);if(-1==s)break}s=l,l=n,n=a,a=s}return $=!0,a.d.length=d+1,a}function ew(e,t){for(var r=e;--t;)r*=e;return r}function ej(e,t){var r,n=t.s<0,i=ed(e,e.precision,1),s=i.times(.5);if((t=t.abs()).lte(s))return P=n?4:1,t;if((r=t.divToInt(i)).isZero())P=n?3:2;else{if((t=t.minus(r.times(i))).lte(s))return P=ep(r)?n?2:3:n?4:1,t;P=ep(r)?n?1:4:n?3:2}return t.minus(i).abs()}function eN(e,t,r,n){var i,s,a,l,o,c,d,u,h,f=e.constructor,p=void 0!==r;if(p?(er(r,1,1e9),void 0===n?n=f.rounding:er(n,0,8)):(r=f.precision,n=f.rounding),e.isFinite()){for(a=(d=el(e)).indexOf("."),p?(i=2,16==t?r=4*r-3:8==t&&(r=3*r-2)):i=t,a>=0&&(d=d.replace(".",""),(h=new f(1)).e=d.length-a,h.d=ei(el(h),10,i),h.e=h.d.length),s=o=(u=ei(d,10,i)).length;0==u[--o];)u.pop();if(u[0]){if(a<0?s--:((e=new f(e)).d=u,e.e=s,u=(e=es(e,h,r,n,0,i)).d,s=e.e,c=O),a=u[r],l=i/2,c=c||void 0!==u[r+1],c=n<4?(void 0!==a||c)&&(0===n||n===(e.s<0?3:2)):a>l||a===l&&(4===n||c||6===n&&1&u[r-1]||n===(e.s<0?8:7)),u.length=r,c)for(;++u[--r]>i-1;)u[r]=0,r||(++s,u.unshift(1));for(o=u.length;!u[o-1];--o);for(a=0,d="";a<o;a++)d+=F.charAt(u[a]);if(p){if(o>1)if(16==t||8==t){for(a=16==t?4:3,--o;o%a;o++)d+="0";for(o=(u=ei(d,i,t)).length;!u[o-1];--o);for(a=1,d="1.";a<o;a++)d+=F.charAt(u[a])}else d=d.charAt(0)+"."+d.slice(1);d=d+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)d="0"+d;d="0."+d}else if(++s>o)for(s-=o;s--;)d+="0";else s<o&&(d=d.slice(0,s)+"."+d.slice(s))}else d=p?"0p+0":"0";d=(16==t?"0x":2==t?"0b":8==t?"0o":"")+d}else d=ex(e);return e.s<0?"-"+d:d}function eE(e,t){if(e.length>t)return e.length=t,!0}function ek(e){return new this(e).abs()}function eC(e){return new this(e).acos()}function eS(e){return new this(e).acosh()}function eD(e,t){return new this(e).plus(t)}function eT(e){return new this(e).asin()}function eR(e){return new this(e).asinh()}function eI(e){return new this(e).atan()}function eA(e){return new this(e).atanh()}function eM(e,t){e=new this(e),t=new this(t);var r,n=this.precision,i=this.rounding,s=n+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(r=t.s<0?ed(this,n,i):new this(0)).s=e.s:!e.d||t.isZero()?(r=ed(this,s,1).times(.5)).s=e.s:t.s<0?(this.precision=s,this.rounding=1,r=this.atan(es(e,t,s,1)),t=ed(this,s,1),this.precision=n,this.rounding=i,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(es(e,t,s,1)):(r=ed(this,s,1).times(t.s>0?.25:.75)).s=e.s:r=new this(NaN),r}function eO(e){return new this(e).cbrt()}function eP(e){return ea(e=new this(e),e.e+1,2)}function eF(e,t,r){return new this(e).clamp(t,r)}function eL(e){if(!e||"object"!=typeof e)throw Error(V+"Object expected");var t,r,n,i=!0===e.defaults,s=["precision",1,1e9,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,9e15,"maxE",0,9e15,"minE",-9e15,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(r=s[t],i&&(this[r]=_[r]),void 0!==(n=e[r]))if(W(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(z+r+": "+n);if(r="crypto",i&&(this[r]=_[r]),void 0!==(n=e[r]))if(!0===n||!1===n||0===n||1===n)if(n)if("u">typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(H);else this[r]=!1;else throw Error(z+r+": "+n);return this}function eU(e){return new this(e).cos()}function e_(e){return new this(e).cosh()}function e$(e,t){return new this(e).div(t)}function eV(e){return new this(e).exp()}function ez(e){return ea(e=new this(e),e.e+1,3)}function eB(){var e,t,r=new this(0);for($=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return $=!0,new this(1/0);r=t}return $=!0,r.sqrt()}function eH(e){return e instanceof tt||e&&e.toStringTag===q||!1}function eq(e){return new this(e).ln()}function eW(e,t){return new this(e).log(t)}function eJ(e){return new this(e).log(2)}function eK(e){return new this(e).log(10)}function eY(){return em(this,arguments,-1)}function eZ(){return em(this,arguments,1)}function eX(e,t){return new this(e).mod(t)}function eG(e,t){return new this(e).mul(t)}function eQ(e,t){return new this(e).pow(t)}function e0(e){var t,r,n,i,s=0,a=new this(1),l=[];if(void 0===e?e=this.precision:er(e,1,1e9),n=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(n));s<n;)(i=t[s])>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:l[s++]=i%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(n*=4);s<n;)(i=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((127&t[s+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,s):(l.push(i%1e7),s+=4);s=n/4}else throw Error(H);else for(;s<n;)l[s++]=1e7*Math.random()|0;for(n=l[--s],e%=7,n&&e&&(i=J(10,7-e),l[s]=(n/i|0)*i);0===l[s];s--)l.pop();if(s<0)r=0,l=[0];else{for(r=-1;0===l[0];r-=7)l.shift();for(n=1,i=l[0];i>=10;i/=10)n++;n<7&&(r-=7-n)}return a.e=r,a.d=l,a}function e1(e){return ea(e=new this(e),e.e+1,this.rounding)}function e2(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function e5(e){return new this(e).sin()}function e3(e){return new this(e).sinh()}function e4(e){return new this(e).sqrt()}function e7(e,t){return new this(e).sub(t)}function e6(){var e=0,t=arguments,r=new this(t[0]);for($=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return $=!0,ea(r,this.precision,this.rounding)}function e9(e){return new this(e).tan()}function e8(e){return new this(e).tanh()}function te(e){return ea(e=new this(e),e.e+1,1)}ee[Symbol.for("nodejs.util.inspect.custom")]=ee.toString,ee[Symbol.toStringTag]="Decimal";var tt=ee.constructor=function e(t){var r,n,i;function s(e){var t,r,n;if(!(this instanceof s))return new s(e);if(this.constructor=s,eH(e)){this.s=e.s,$?!e.d||e.e>s.maxE?(this.e=NaN,this.d=null):e.e<s.minE?(this.e=0,this.d=[0]):(this.e=e.e,this.d=e.d.slice()):(this.e=e.e,this.d=e.d?e.d.slice():e.d);return}if("number"==(n=typeof e)){if(0===e){this.s=1/e<0?-1:1,this.e=0,this.d=[0];return}if(e<0?(e=-e,this.s=-1):this.s=1,e===~~e&&e<1e7){for(t=0,r=e;r>=10;r/=10)t++;$?t>s.maxE?(this.e=NaN,this.d=null):t<s.minE?(this.e=0,this.d=[0]):(this.e=t,this.d=[e]):(this.e=t,this.d=[e]);return}if(0*e!=0){e||(this.s=NaN),this.e=NaN,this.d=null;return}return ey(this,e.toString())}if("string"===n)return 45===(r=e.charCodeAt(0))?(e=e.slice(1),this.s=-1):(43===r&&(e=e.slice(1)),this.s=1),X.test(e)?ey(this,e):function(e,t){var r,n,i,s,a,l,o,c,d;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),X.test(t))return ey(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Y.test(t))r=16,t=t.toLowerCase();else if(K.test(t))r=2;else if(Z.test(t))r=8;else throw Error(z+t);for((s=t.search(/p/i))>0?(o=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),a=(s=t.indexOf("."))>=0,n=e.constructor,a&&(s=(l=(t=t.replace(".","")).length)-s,i=ef(n,new n(r),s,2*s)),s=d=(c=ei(t,r,1e7)).length-1;0===c[s];--s)c.pop();return s<0?new n(0*e.s):(e.e=eo(c,d),e.d=c,$=!1,a&&(e=es(e,i,4*l)),o&&(e=e.times(54>Math.abs(o)?J(2,o):tt.pow(2,o))),$=!0,e)}(this,e);if("bigint"===n)return e<0?(e=-e,this.s=-1):this.s=1,ey(this,e.toString());throw Error(z+e)}if(s.prototype=ee,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=eL,s.clone=e,s.isDecimal=eH,s.abs=ek,s.acos=eC,s.acosh=eS,s.add=eD,s.asin=eT,s.asinh=eR,s.atan=eI,s.atanh=eA,s.atan2=eM,s.cbrt=eO,s.ceil=eP,s.clamp=eF,s.cos=eU,s.cosh=e_,s.div=e$,s.exp=eV,s.floor=ez,s.hypot=eB,s.ln=eq,s.log=eW,s.log10=eK,s.log2=eJ,s.max=eY,s.min=eZ,s.mod=eX,s.mul=eG,s.pow=eQ,s.random=e0,s.round=e1,s.sign=e2,s.sin=e5,s.sinh=e3,s.sqrt=e4,s.sub=e7,s.sum=e6,s.tan=e9,s.tanh=e8,s.trunc=te,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],r=0;r<i.length;)t.hasOwnProperty(n=i[r++])||(t[n]=this[n]);return s.config(t),s}(_);L=new tt(L),U=new tt(U);var tr=tt},23730,(e,t,r)=>{Object.defineProperty(r,"__esModule",{value:!0});let{Decimal:n,objectEnumValues:i,makeStrictEnum:s,Public:a,getRuntime:l,skip:o}=e.r(92865),c={};r.Prisma=c,r.$Enums={},c.prismaVersion={client:"6.19.0",engine:"2ba551f319ab1df4bc874a89965d8b3641056773"},c.PrismaClientKnownRequestError=()=>{let e=l().prettyName;throw Error(`PrismaClientKnownRequestError is unable to run in this browser environment, or has been bundled for the browser (running in ${e}).
In case this error is unexpected for you, please report it in https://pris.ly/prisma-prisma-bug-report`)},c.PrismaClientUnknownRequestError=()=>{let e=l().prettyName;throw Error(`PrismaClientUnknownRequestError is unable to run in this browser environment, or has been bundled for the browser (running in ${e}).
In case this error is unexpected for you, please report it in https://pris.ly/prisma-prisma-bug-report`)},c.PrismaClientRustPanicError=()=>{let e=l().prettyName;throw Error(`PrismaClientRustPanicError is unable to run in this browser environment, or has been bundled for the browser (running in ${e}).
In case this error is unexpected for you, please report it in https://pris.ly/prisma-prisma-bug-report`)},c.PrismaClientInitializationError=()=>{let e=l().prettyName;throw Error(`PrismaClientInitializationError is unable to run in this browser environment, or has been bundled for the browser (running in ${e}).
In case this error is unexpected for you, please report it in https://pris.ly/prisma-prisma-bug-report`)},c.PrismaClientValidationError=()=>{let e=l().prettyName;throw Error(`PrismaClientValidationError is unable to run in this browser environment, or has been bundled for the browser (running in ${e}).
In case this error is unexpected for you, please report it in https://pris.ly/prisma-prisma-bug-report`)},c.Decimal=n,c.sql=()=>{let e=l().prettyName;throw Error(`sqltag is unable to run in this browser environment, or has been bundled for the browser (running in ${e}).
In case this error is unexpected for you, please report it in https://pris.ly/prisma-prisma-bug-report`)},c.empty=()=>{let e=l().prettyName;throw Error(`empty is unable to run in this browser environment, or has been bundled for the browser (running in ${e}).
In case this error is unexpected for you, please report it in https://pris.ly/prisma-prisma-bug-report`)},c.join=()=>{let e=l().prettyName;throw Error(`join is unable to run in this browser environment, or has been bundled for the browser (running in ${e}).
In case this error is unexpected for you, please report it in https://pris.ly/prisma-prisma-bug-report`)},c.raw=()=>{let e=l().prettyName;throw Error(`raw is unable to run in this browser environment, or has been bundled for the browser (running in ${e}).
In case this error is unexpected for you, please report it in https://pris.ly/prisma-prisma-bug-report`)},c.validator=a.validator,c.getExtensionContext=()=>{let e=l().prettyName;throw Error(`Extensions.getExtensionContext is unable to run in this browser environment, or has been bundled for the browser (running in ${e}).
In case this error is unexpected for you, please report it in https://pris.ly/prisma-prisma-bug-report`)},c.defineExtension=()=>{let e=l().prettyName;throw Error(`Extensions.defineExtension is unable to run in this browser environment, or has been bundled for the browser (running in ${e}).
In case this error is unexpected for you, please report it in https://pris.ly/prisma-prisma-bug-report`)},c.DbNull=i.instances.DbNull,c.JsonNull=i.instances.JsonNull,c.AnyNull=i.instances.AnyNull,c.NullTypes={DbNull:i.classes.DbNull,JsonNull:i.classes.JsonNull,AnyNull:i.classes.AnyNull},r.Prisma.TransactionIsolationLevel=s({Serializable:"Serializable"}),r.Prisma.WorkspaceScalarFieldEnum={id:"id",name:"name",createdAt:"createdAt",updatedAt:"updatedAt"},r.Prisma.WorkspaceUserScalarFieldEnum={id:"id",workspaceId:"workspaceId",userId:"userId",role:"role",createdAt:"createdAt"},r.Prisma.ProjectScalarFieldEnum={id:"id",name:"name",description:"description",workspaceId:"workspaceId",ownerId:"ownerId",isArchived:"isArchived",createdAt:"createdAt",updatedAt:"updatedAt"},r.Prisma.ProjectUserScalarFieldEnum={id:"id",projectId:"projectId",userId:"userId",role:"role",createdAt:"createdAt"},r.Prisma.ColumnScalarFieldEnum={id:"id",name:"name",order:"order",projectId:"projectId",createdAt:"createdAt",updatedAt:"updatedAt"},r.Prisma.TaskScalarFieldEnum={id:"id",title:"title",description:"description",projectId:"projectId",columnId:"columnId",order:"order",createdAt:"createdAt",updatedAt:"updatedAt",startDate:"startDate",endDate:"endDate",toleranceDate:"toleranceDate",links:"links",attachments:"attachments",images:"images",tags:"tags",priority:"priority",checklist:"checklist",parentId:"parentId"},r.Prisma.AccountScalarFieldEnum={id:"id",userId:"userId",type:"type",provider:"provider",providerAccountId:"providerAccountId",refresh_token:"refresh_token",access_token:"access_token",expires_at:"expires_at",token_type:"token_type",scope:"scope",id_token:"id_token",session_state:"session_state"},r.Prisma.SessionScalarFieldEnum={id:"id",sessionToken:"sessionToken",userId:"userId",expires:"expires"},r.Prisma.UserScalarFieldEnum={id:"id",name:"name",email:"email",emailVerified:"emailVerified",hashedPassword:"hashedPassword",image:"image",createdAt:"createdAt",updatedAt:"updatedAt",role:"role"},r.Prisma.FilterScalarFieldEnum={id:"id",name:"name",userId:"userId",projectId:"projectId",criteria:"criteria",isDefault:"isDefault",createdAt:"createdAt",updatedAt:"updatedAt"},r.Prisma.VerificationTokenScalarFieldEnum={identifier:"identifier",token:"token",expires:"expires"},r.Prisma.InvitationScalarFieldEnum={id:"id",email:"email",token:"token",projectId:"projectId",role:"role",expiresAt:"expiresAt",createdAt:"createdAt"},r.Prisma.SortOrder={asc:"asc",desc:"desc"},r.Prisma.NullsOrder={first:"first",last:"last"},r.Role=r.$Enums.Role={USER:"USER",ADMIN:"ADMIN",SUPERADMIN:"SUPERADMIN"},r.Prisma.ModelName={Workspace:"Workspace",WorkspaceUser:"WorkspaceUser",Project:"Project",ProjectUser:"ProjectUser",Column:"Column",Task:"Task",Account:"Account",Session:"Session",User:"User",Filter:"Filter",VerificationToken:"VerificationToken",Invitation:"Invitation"},r.PrismaClient=class{constructor(){return new Proxy(this,{get(e,t){let r=l();throw Error((r.isEdge?`PrismaClient is not configured to run in ${r.prettyName}. In order to run Prisma Client on edge runtime, either:
- Use Prisma Accelerate: https://pris.ly/d/accelerate
- Use Driver Adapters: https://pris.ly/d/driver-adapters
`:"PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `"+r.prettyName+"`).")+`
If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report`)}})}},Object.assign(r,c)},18228,(e,t,r)=>{t.exports=e.r(23730)},97403,e=>{"use strict";let t,r;var n,i,s,a,l,o,c,d,u,h,f,p,m,g,v,x,y,b,w,j=e.i(43476),N=e.i(71645),E=e.i(22016),k=e.i(74080);let C="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function S(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function D(e){return"nodeType"in e}function T(e){var t,r;return e?S(e)?e:D(e)&&null!=(t=null==(r=e.ownerDocument)?void 0:r.defaultView)?t:window:window}function R(e){let{Document:t}=T(e);return e instanceof t}function I(e){return!S(e)&&e instanceof T(e).HTMLElement}function A(e){return e instanceof T(e).SVGElement}function M(e){return e?S(e)?e.document:D(e)?R(e)?e:I(e)||A(e)?e.ownerDocument:document:document:document}let O=C?N.useLayoutEffect:N.useEffect;function P(e){let t=(0,N.useRef)(e);return O(()=>{t.current=e}),(0,N.useCallback)(function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return null==t.current?void 0:t.current(...r)},[])}function F(e,t){void 0===t&&(t=[e]);let r=(0,N.useRef)(e);return O(()=>{r.current!==e&&(r.current=e)},t),r}function L(e,t){let r=(0,N.useRef)();return(0,N.useMemo)(()=>{let t=e(r.current);return r.current=t,t},[...t])}function U(e){let t=P(e),r=(0,N.useRef)(null),n=(0,N.useCallback)(e=>{e!==r.current&&(null==t||t(e,r.current)),r.current=e},[]);return[r,n]}function _(e){let t=(0,N.useRef)();return(0,N.useEffect)(()=>{t.current=e},[e]),t.current}let $={};function V(e,t){return(0,N.useMemo)(()=>{if(t)return t;let r=null==$[e]?0:$[e]+1;return $[e]=r,e+"-"+r},[e,t])}function z(e){return function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.reduce((t,r)=>{for(let[n,i]of Object.entries(r)){let r=t[n];null!=r&&(t[n]=r+e*i)}return t},{...t})}}let B=z(1),H=z(-1);function q(e){if(!e)return!1;let{KeyboardEvent:t}=T(e.target);return t&&e instanceof t}function W(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=T(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let J=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[J.Translate.toString(e),J.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),K="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",Y={display:"none"};function Z(e){let{id:t,value:r}=e;return N.default.createElement("div",{id:t,style:Y},r)}function X(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;return N.default.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":n,"aria-atomic":!0},r)}let G=(0,N.createContext)(null),Q={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},ee={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function et(e){var t;let r,{announcements:n=ee,container:i,hiddenTextDescribedById:s,screenReaderInstructions:a=Q}=e,{announce:l,announcement:o}=function(){let[e,t]=(0,N.useState)("");return{announce:(0,N.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),c=V("DndLiveRegion"),[d,u]=(0,N.useState)(!1);if((0,N.useEffect)(()=>{u(!0)},[]),t=(0,N.useMemo)(()=>({onDragStart(e){let{active:t}=e;l(n.onDragStart({active:t}))},onDragMove(e){let{active:t,over:r}=e;n.onDragMove&&l(n.onDragMove({active:t,over:r}))},onDragOver(e){let{active:t,over:r}=e;l(n.onDragOver({active:t,over:r}))},onDragEnd(e){let{active:t,over:r}=e;l(n.onDragEnd({active:t,over:r}))},onDragCancel(e){let{active:t,over:r}=e;l(n.onDragCancel({active:t,over:r}))}}),[l,n]),r=(0,N.useContext)(G),(0,N.useEffect)(()=>{if(!r)throw Error("useDndMonitor must be used within a children of <DndContext>");return r(t)},[t,r]),!d)return null;let h=N.default.createElement(N.default.Fragment,null,N.default.createElement(Z,{id:s,value:a.draggable}),N.default.createElement(X,{id:c,announcement:o}));return i?(0,k.createPortal)(h,i):h}function er(){}(n=h||(h={})).DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable";let en=Object.freeze({x:0,y:0});function ei(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function es(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}let ea=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e,i=[];for(let e of n){let{id:n}=e,s=r.get(n);if(s){let r=function(e,t){let r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height);if(n<i&&r<s){let a=t.width*t.height,l=e.width*e.height,o=(i-n)*(s-r);return Number((o/(a+l-o)).toFixed(4))}return 0}(s,t);r>0&&i.push({id:n,data:{droppableContainer:e,value:r}})}}return i.sort(es)},el=e=>{let{droppableContainers:t,droppableRects:r,pointerCoordinates:n}=e;if(!n)return[];let i=[];for(let e of t){let{id:t}=e,s=r.get(t);if(s&&function(e,t){let{top:r,left:n,bottom:i,right:s}=t;return r<=e.y&&e.y<=i&&n<=e.x&&e.x<=s}(n,s)){let r=Number(((function(e){let{left:t,top:r,height:n,width:i}=e;return[{x:t,y:r},{x:t+i,y:r},{x:t,y:r+n},{x:t+i,y:r+n}]})(s).reduce((e,t)=>e+Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2)),0)/4).toFixed(4));i.push({id:t,data:{droppableContainer:e,value:r}})}}return i.sort(ei)};function eo(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:en}let ec=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduce((e,t)=>({...e,top:e.top+ +t.y,bottom:e.bottom+ +t.y,left:e.left+ +t.x,right:e.right+ +t.x}),{...e})};function ed(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}let eu={ignoreTransform:!1};function eh(e,t){void 0===t&&(t=eu);let r=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:n}=T(e).getComputedStyle(e);t&&(r=function(e,t,r){let n=ed(t);if(!n)return e;let{scaleX:i,scaleY:s,x:a,y:l}=n,o=e.left-a-(1-i)*parseFloat(r),c=e.top-l-(1-s)*parseFloat(r.slice(r.indexOf(" ")+1)),d=i?e.width/i:e.width,u=s?e.height/s:e.height;return{width:d,height:u,top:c,right:o+d,bottom:c+u,left:o}}(r,t,n))}let{top:n,left:i,width:s,height:a,bottom:l,right:o}=r;return{top:n,left:i,width:s,height:a,bottom:l,right:o}}function ef(e){return eh(e,{ignoreTransform:!0})}function ep(e,t){let r=[];return e?function n(i){var s,a;let l;if(null!=t&&r.length>=t||!i)return r;if(R(i)&&null!=i.scrollingElement&&!r.includes(i.scrollingElement))return r.push(i.scrollingElement),r;if(!I(i)||A(i)||r.includes(i))return r;let o=T(e).getComputedStyle(i);return(i!==e&&(void 0===(s=o)&&(s=T(i).getComputedStyle(i)),l=/(auto|scroll|overlay)/,["overflow","overflowX","overflowY"].some(e=>{let t=s[e];return"string"==typeof t&&l.test(t)}))&&r.push(i),void 0===(a=o)&&(a=T(i).getComputedStyle(i)),"fixed"===a.position)?r:n(i.parentNode)}(e):r}function em(e){let[t]=ep(e,1);return null!=t?t:null}function eg(e){return C&&e?S(e)?e:D(e)?R(e)||e===M(e).scrollingElement?window:I(e)?e:null:null:null}function ev(e){return S(e)?e.scrollX:e.scrollLeft}function ex(e){return S(e)?e.scrollY:e.scrollTop}function ey(e){return{x:ev(e),y:ex(e)}}function eb(e){return!!C&&!!e&&e===document.scrollingElement}function ew(e){let t={x:0,y:0},r=eb(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},i=e.scrollTop<=t.y,s=e.scrollLeft<=t.x;return{isTop:i,isLeft:s,isBottom:e.scrollTop>=n.y,isRight:e.scrollLeft>=n.x,maxScroll:n,minScroll:t}}(i=f||(f={}))[i.Forward=1]="Forward",i[i.Backward=-1]="Backward";let ej={x:.2,y:.2};function eN(e){return e.reduce((e,t)=>B(e,ey(t)),en)}function eE(e,t){if(void 0===t&&(t=eh),!e)return;let{top:r,left:n,bottom:i,right:s}=t(e);em(e)&&(i<=0||s<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}let ek=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+ev(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+ex(t),0)}]];class eC{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=ep(t),n=eN(r);for(const[t,i,s]of(this.rect={...e},this.width=e.width,this.height=e.height,ek))for(const e of i)Object.defineProperty(this,e,{get:()=>{let i=s(r),a=n[t]-i;return this.rect[e]+a},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class eS{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,r){var n;null==(n=this.target)||n.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function eD(e,t){let r=Math.abs(e.x),n=Math.abs(e.y);return"number"==typeof t?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t&&n>t.y}function eT(e){e.preventDefault()}function eR(e){e.stopPropagation()}(s=p||(p={})).Click="click",s.DragStart="dragstart",s.Keydown="keydown",s.ContextMenu="contextmenu",s.Resize="resize",s.SelectionChange="selectionchange",s.VisibilityChange="visibilitychange",(a=m||(m={})).Space="Space",a.Down="ArrowDown",a.Right="ArrowRight",a.Left="ArrowLeft",a.Up="ArrowUp",a.Esc="Escape",a.Enter="Enter",a.Tab="Tab";let eI={start:[m.Space,m.Enter],cancel:[m.Esc],end:[m.Space,m.Enter,m.Tab]},eA=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case m.Right:return{...r,x:r.x+25};case m.Left:return{...r,x:r.x-25};case m.Down:return{...r,y:r.y+25};case m.Up:return{...r,y:r.y-25}}};class eM{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new eS(M(t)),this.windowListeners=new eS(T(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(p.Resize,this.handleCancel),this.windowListeners.add(p.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(p.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&eE(r),t(en)}handleKeyDown(e){if(q(e)){let{active:t,context:r,options:n}=this.props,{keyboardCodes:i=eI,coordinateGetter:s=eA,scrollBehavior:a="smooth"}=n,{code:l}=e;if(i.end.includes(l))return void this.handleEnd(e);if(i.cancel.includes(l))return void this.handleCancel(e);let{collisionRect:o}=r.current,c=o?{x:o.left,y:o.top}:en;this.referenceCoordinates||(this.referenceCoordinates=c);let d=s(e,{active:t,context:r.current,currentCoordinates:c});if(d){let t=H(d,c),n={x:0,y:0},{scrollableAncestors:i}=r.current;for(let r of i){let i=e.code,{isTop:s,isRight:l,isLeft:o,isBottom:c,maxScroll:u,minScroll:h}=ew(r),f=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:r,right:n,bottom:i}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:i,width:e.clientWidth,height:e.clientHeight}}(r),p={x:Math.min(i===m.Right?f.right-f.width/2:f.right,Math.max(i===m.Right?f.left:f.left+f.width/2,d.x)),y:Math.min(i===m.Down?f.bottom-f.height/2:f.bottom,Math.max(i===m.Down?f.top:f.top+f.height/2,d.y))},g=i===m.Right&&!l||i===m.Left&&!o,v=i===m.Down&&!c||i===m.Up&&!s;if(g&&p.x!==d.x){let e=r.scrollLeft+t.x,s=i===m.Right&&e<=u.x||i===m.Left&&e>=h.x;if(s&&!t.y)return void r.scrollTo({left:e,behavior:a});s?n.x=r.scrollLeft-e:n.x=i===m.Right?r.scrollLeft-u.x:r.scrollLeft-h.x,n.x&&r.scrollBy({left:-n.x,behavior:a});break}if(v&&p.y!==d.y){let e=r.scrollTop+t.y,s=i===m.Down&&e<=u.y||i===m.Up&&e>=h.y;if(s&&!t.x)return void r.scrollTo({top:e,behavior:a});s?n.y=r.scrollTop-e:n.y=i===m.Down?r.scrollTop-u.y:r.scrollTop-h.y,n.y&&r.scrollBy({top:-n.y,behavior:a});break}}this.handleMove(e,B(H(d,this.referenceCoordinates),n))}}}handleMove(e,t){let{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function eO(e){return!!(e&&"distance"in e)}function eP(e){return!!(e&&"delay"in e)}eM.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=eI,onActivation:i}=t,{active:s}=r,{code:a}=e.nativeEvent;if(n.start.includes(a)){let t=s.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==i||i({event:e.nativeEvent}),!0)}return!1}}];class eF{constructor(e,t,r){var n;void 0===r&&(r=function(e){let{EventTarget:t}=T(e);return e instanceof t?e:M(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:i}=e,{target:s}=i;this.props=e,this.events=t,this.document=M(s),this.documentListeners=new eS(this.document),this.listeners=new eS(r),this.windowListeners=new eS(T(s)),this.initialCoordinates=null!=(n=W(i))?n:en,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(p.Resize,this.handleCancel),this.windowListeners.add(p.DragStart,eT),this.windowListeners.add(p.VisibilityChange,this.handleCancel),this.windowListeners.add(p.ContextMenu,eT),this.documentListeners.add(p.Keydown,this.handleKeydown),t){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(eP(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(eO(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:r,onPending:n}=this.props;n(r,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(p.Click,eR,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(p.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:r,initialCoordinates:n,props:i}=this,{onMove:s,options:{activationConstraint:a}}=i;if(!n)return;let l=null!=(t=W(e))?t:en,o=H(n,l);if(!r&&a){if(eO(a)){if(null!=a.tolerance&&eD(o,a.tolerance))return this.handleCancel();if(eD(o,a.distance))return this.handleStart()}return eP(a)&&eD(o,a.tolerance)?this.handleCancel():void this.handlePending(a,o)}e.cancelable&&e.preventDefault(),s(l)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===m.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let eL={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class eU extends eF{constructor(e){const{event:t}=e;super(e,eL,M(t.target))}}eU.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!!r.isPrimary&&0===r.button&&(null==n||n({event:r}),!0)}}];(l=g||(g={}))[l.RightClick=2]="RightClick";(o=v||(v={}))[o.Pointer=0]="Pointer",o[o.DraggableRect=1]="DraggableRect",(c=x||(x={}))[c.TreeOrder=0]="TreeOrder",c[c.ReversedTreeOrder=1]="ReversedTreeOrder";let e_={x:{[f.Backward]:!1,[f.Forward]:!1},y:{[f.Backward]:!1,[f.Forward]:!1}};(d=y||(y={}))[d.Always=0]="Always",d[d.BeforeDragging=1]="BeforeDragging",d[d.WhileDragging=2]="WhileDragging",(b||(b={})).Optimized="optimized";let e$=new Map;function eV(e,t){return L(r=>e?r||("function"==typeof t?t(e):e):null,[t,e])}function ez(e){let{callback:t,disabled:r}=e,n=P(t),i=(0,N.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(n)},[r]);return(0,N.useEffect)(()=>()=>null==i?void 0:i.disconnect(),[i]),i}function eB(e){return new eC(eh(e),e)}function eH(e,t,r){void 0===t&&(t=eB);let[n,i]=(0,N.useState)(null);function s(){i(n=>{if(!e)return null;if(!1===e.isConnected){var i;return null!=(i=null!=n?n:r)?i:null}let s=t(e);return JSON.stringify(n)===JSON.stringify(s)?n:s})}let a=function(e){let{callback:t,disabled:r}=e,n=P(t),i=(0,N.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(n)},[n,r]);return(0,N.useEffect)(()=>()=>null==i?void 0:i.disconnect(),[i]),i}({callback(t){if(e)for(let r of t){let{type:t,target:n}=r;if("childList"===t&&n instanceof HTMLElement&&n.contains(e)){s();break}}}}),l=ez({callback:s});return O(()=>{s(),e?(null==l||l.observe(e),null==a||a.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==a||a.disconnect())},[e]),n}let eq=[];function eW(e,t){void 0===t&&(t=[]);let r=(0,N.useRef)(null);return(0,N.useEffect)(()=>{r.current=null},t),(0,N.useEffect)(()=>{let t=e!==en;t&&!r.current&&(r.current=e),!t&&r.current&&(r.current=null)},[e]),r.current?H(e,r.current):en}function eJ(e){return(0,N.useMemo)(()=>{let t,r;return e?(t=e.innerWidth,{top:0,left:0,right:t,bottom:r=e.innerHeight,width:t,height:r}):null},[e])}let eK=[];function eY(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return I(t)?t:e}let eZ=[{sensor:eU,options:{}},{sensor:eM,options:{}}],eX={current:{}},eG={draggable:{measure:ef},droppable:{measure:ef,strategy:y.WhileDragging,frequency:b.Optimized},dragOverlay:{measure:eh}};class eQ extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return null!=(t=null==(r=this.get(e))?void 0:r.node.current)?t:void 0}}let e0={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new eQ,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:er},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:eG,measureDroppableContainers:er,windowRect:null,measuringScheduled:!1},e1={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:er,draggableNodes:new Map,over:null,measureDroppableContainers:er},e2=(0,N.createContext)(e1),e5=(0,N.createContext)(e0);function e3(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new eQ}}}function e4(e,t){switch(t.type){case h.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case h.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case h.DragEnd:case h.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case h.RegisterDroppable:{let{element:r}=t,{id:n}=r,i=new eQ(e.droppable.containers);return i.set(n,r),{...e,droppable:{...e.droppable,containers:i}}}case h.SetDroppableDisabled:{let{id:r,key:n,disabled:i}=t,s=e.droppable.containers.get(r);if(!s||n!==s.key)return e;let a=new eQ(e.droppable.containers);return a.set(r,{...s,disabled:i}),{...e,droppable:{...e.droppable,containers:a}}}case h.UnregisterDroppable:{let{id:r,key:n}=t,i=e.droppable.containers.get(r);if(!i||n!==i.key)return e;let s=new eQ(e.droppable.containers);return s.delete(r),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function e7(e){let{disabled:t}=e,{active:r,activatorEvent:n,draggableNodes:i}=(0,N.useContext)(e2),s=_(n),a=_(null==r?void 0:r.id);return(0,N.useEffect)(()=>{if(!t&&!n&&s&&null!=a){if(!q(s)||document.activeElement===s.target)return;let e=i.get(a);if(!e)return;let{activatorNode:t,node:r}=e;(t.current||r.current)&&requestAnimationFrame(()=>{for(let e of[t.current,r.current]){if(!e)continue;let t=e.matches(K)?e:e.querySelector(K);if(t){t.focus();break}}})}},[n,t,i,a,s]),null}function e6(e,t){let{transform:r,...n}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...n}),r):r}let e9=(0,N.createContext)({...en,scaleX:1,scaleY:1});(u=w||(w={}))[u.Uninitialized=0]="Uninitialized",u[u.Initializing=1]="Initializing",u[u.Initialized=2]="Initialized";let e8=(0,N.memo)(function(e){var t,r,n,i,s,a,l,o;let c,d,u,p,m,g,b,j,{id:E,accessibility:S,autoScroll:D=!0,children:R,sensors:A=eZ,collisionDetection:M=ea,measuring:P,modifiers:$,...z}=e,[H,q]=(0,N.useReducer)(e4,void 0,e3),[J,K]=function(){let[e]=(0,N.useState)(()=>new Set),t=(0,N.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,N.useCallback)(t=>{let{type:r,event:n}=t;e.forEach(e=>{var t;return null==(t=e[r])?void 0:t.call(e,n)})},[e]),t]}(),[Y,Z]=(0,N.useState)(w.Uninitialized),X=Y===w.Initialized,{draggable:{active:Q,nodes:ee,translate:er},droppable:{containers:ei}}=H,es=null!=Q?ee.get(Q):null,el=(0,N.useRef)({initial:null,translated:null}),ed=(0,N.useMemo)(()=>{var e;return null!=Q?{id:Q,data:null!=(e=null==es?void 0:es.data)?e:eX,rect:el}:null},[Q,es]),eu=(0,N.useRef)(null),[ef,ev]=(0,N.useState)(null),[ex,eE]=(0,N.useState)(null),ek=F(z,Object.values(z)),eS=V("DndDescribedBy",E),eD=(0,N.useMemo)(()=>ei.getEnabled(),[ei]),eT=(0,N.useMemo)(()=>({draggable:{...eG.draggable,...null==P?void 0:P.draggable},droppable:{...eG.droppable,...null==P?void 0:P.droppable},dragOverlay:{...eG.dragOverlay,...null==P?void 0:P.dragOverlay}}),[null==P?void 0:P.draggable,null==P?void 0:P.droppable,null==P?void 0:P.dragOverlay]),{droppableRects:eR,measureDroppableContainers:eI,measuringScheduled:eA}=function(e,t){let{dragging:r,dependencies:n,config:i}=t,[s,a]=(0,N.useState)(null),{frequency:l,measure:o,strategy:c}=i,d=(0,N.useRef)(e),u=function(){switch(c){case y.Always:return!1;case y.BeforeDragging:return r;default:return!r}}(),h=F(u),f=(0,N.useCallback)(function(e){void 0===e&&(e=[]),h.current||a(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[h]),p=(0,N.useRef)(null),m=L(t=>{if(u&&!r)return e$;if(!t||t===e$||d.current!==e||null!=s){let t=new Map;for(let r of e){if(!r)continue;if(s&&s.length>0&&!s.includes(r.id)&&r.rect.current){t.set(r.id,r.rect.current);continue}let e=r.node.current,n=e?new eC(o(e),e):null;r.rect.current=n,n&&t.set(r.id,n)}return t}return t},[e,s,r,u,o]);return(0,N.useEffect)(()=>{d.current=e},[e]),(0,N.useEffect)(()=>{u||f()},[r,u]),(0,N.useEffect)(()=>{s&&s.length>0&&a(null)},[JSON.stringify(s)]),(0,N.useEffect)(()=>{u||"number"!=typeof l||null!==p.current||(p.current=setTimeout(()=>{f(),p.current=null},l))},[l,u,f,...n]),{droppableRects:m,measureDroppableContainers:f,measuringScheduled:null!=s}}(eD,{dragging:X,dependencies:[er.x,er.y],config:eT.droppable}),eM=L(e=>{var t;return null==Q?null:null!=(t=null!=m?m:e)?t:null},[m=(p=null!=Q?ee.get(Q):void 0)?p.node.current:null,Q]),eO=(0,N.useMemo)(()=>ex?W(ex):null,[ex]),eP=(c=(null==ef?void 0:ef.autoScrollEnabled)===!1,d="object"==typeof D?!1===D.enabled:!1===D,u=X&&!c&&!d,"object"==typeof D?{...D,enabled:u}:{enabled:u}),eF=eV(eM,eT.draggable.measure);!function(e){let{activeNode:t,measure:r,initialRect:n,config:i=!0}=e,s=(0,N.useRef)(!1),{x:a,y:l}="boolean"==typeof i?{x:i,y:i}:i;O(()=>{if(!a&&!l||!t){s.current=!1;return}if(s.current||!n)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let i=eo(r(e),n);if(a||(i.x=0),l||(i.y=0),s.current=!0,Math.abs(i.x)>0||Math.abs(i.y)>0){let t=em(e);t&&t.scrollBy({top:i.y,left:i.x})}},[t,a,l,n,r])}({activeNode:null!=Q?ee.get(Q):null,config:eP.layoutShiftCompensation,initialRect:eF,measure:eT.draggable.measure});let eL=eH(eM,eT.draggable.measure,eF),eU=eH(eM?eM.parentElement:null),eB=(0,N.useRef)({activatorEvent:null,active:null,activeNode:eM,collisionRect:null,collisions:null,droppableRects:eR,draggableNodes:ee,draggingNode:null,draggingNodeRect:null,droppableContainers:ei,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),eQ=ei.getNodeFor(null==(t=eB.current.over)?void 0:t.id),e0=function(e){let{measure:t}=e,[r,n]=(0,N.useState)(null),i=ez({callback:(0,N.useCallback)(e=>{for(let{target:r}of e)if(I(r)){n(e=>{let n=t(r);return e?{...e,width:n.width,height:n.height}:n});break}},[t])}),[s,a]=U((0,N.useCallback)(e=>{let r=eY(e);null==i||i.disconnect(),r&&(null==i||i.observe(r)),n(r?t(r):null)},[t,i]));return(0,N.useMemo)(()=>({nodeRef:s,rect:r,setRef:a}),[r,s,a])}({measure:eT.dragOverlay.measure}),e1=null!=(r=e0.nodeRef.current)?r:eM,e8=X?null!=(n=e0.rect)?n:eL:null,te=!!(e0.nodeRef.current&&e0.rect),tt=(g=eV(s=te?null:eL),eo(s,g)),tr=eJ(e1?T(e1):null),tn=(a=X?null!=eQ?eQ:eM:null,b=(0,N.useRef)(a),j=L(e=>a?e&&e!==eq&&a&&b.current&&a.parentNode===b.current.parentNode?e:ep(a):eq,[a]),(0,N.useEffect)(()=>{b.current=a},[a]),j),ti=function(e,t){void 0===t&&(t=eh);let[r]=e,n=eJ(r?T(r):null),[i,s]=(0,N.useState)(eK);function a(){s(()=>e.length?e.map(e=>eb(e)?n:new eC(t(e),e)):eK)}let l=ez({callback:a});return O(()=>{null==l||l.disconnect(),a(),e.forEach(e=>null==l?void 0:l.observe(e))},[e]),i}(tn),ts=e6($,{transform:{x:er.x-tt.x,y:er.y-tt.y,scaleX:1,scaleY:1},activatorEvent:ex,active:ed,activeNodeRect:eL,containerNodeRect:eU,draggingNodeRect:e8,over:eB.current.over,overlayNodeRect:e0.rect,scrollableAncestors:tn,scrollableAncestorRects:ti,windowRect:tr}),ta=eO?B(eO,er):null,tl=function(e){let[t,r]=(0,N.useState)(null),n=(0,N.useRef)(e),i=(0,N.useCallback)(e=>{let t=eg(e.target);t&&r(e=>e?(e.set(t,ey(t)),new Map(e)):null)},[]);return(0,N.useEffect)(()=>{let t=n.current;if(e!==t){s(t);let a=e.map(e=>{let t=eg(e);return t?(t.addEventListener("scroll",i,{passive:!0}),[t,ey(t)]):null}).filter(e=>null!=e);r(a.length?new Map(a):null),n.current=e}return()=>{s(e),s(t)};function s(e){e.forEach(e=>{let t=eg(e);null==t||t.removeEventListener("scroll",i)})}},[i,e]),(0,N.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>B(e,t),en):eN(e):en,[e,t])}(tn),to=eW(tl),tc=eW(tl,[eL]),td=B(ts,to),tu=e8?ec(e8,ts):null,th=ed&&tu?M({active:ed,collisionRect:tu,droppableRects:eR,droppableContainers:eD,pointerCoordinates:ta}):null,tf=function(e,t){if(!e||0===e.length)return null;let[r]=e;return r.id}(th,0),[tp,tm]=(0,N.useState)(null),tg=(l=te?ts:B(ts,tc),o=null!=(i=null==tp?void 0:tp.rect)?i:null,{...l,scaleX:o&&eL?o.width/eL.width:1,scaleY:o&&eL?o.height/eL.height:1}),tv=(0,N.useRef)(null),tx=(0,N.useCallback)((e,t)=>{let{sensor:r,options:n}=t;if(null==eu.current)return;let i=ee.get(eu.current);if(!i)return;let s=e.nativeEvent,a=new r({active:eu.current,activeNode:i,event:s,options:n,context:eB,onAbort(e){if(!ee.get(e))return;let{onDragAbort:t}=ek.current,r={id:e};null==t||t(r),J({type:"onDragAbort",event:r})},onPending(e,t,r,n){if(!ee.get(e))return;let{onDragPending:i}=ek.current,s={id:e,constraint:t,initialCoordinates:r,offset:n};null==i||i(s),J({type:"onDragPending",event:s})},onStart(e){let t=eu.current;if(null==t)return;let r=ee.get(t);if(!r)return;let{onDragStart:n}=ek.current,i={activatorEvent:s,active:{id:t,data:r.data,rect:el}};(0,k.unstable_batchedUpdates)(()=>{null==n||n(i),Z(w.Initializing),q({type:h.DragStart,initialCoordinates:e,active:t}),J({type:"onDragStart",event:i}),ev(tv.current),eE(s)})},onMove(e){q({type:h.DragMove,coordinates:e})},onEnd:l(h.DragEnd),onCancel:l(h.DragCancel)});function l(e){return async function(){let{active:t,collisions:r,over:n,scrollAdjustedTranslate:i}=eB.current,a=null;if(t&&i){let{cancelDrop:l}=ek.current;a={activatorEvent:s,active:t,collisions:r,delta:i,over:n},e===h.DragEnd&&"function"==typeof l&&await Promise.resolve(l(a))&&(e=h.DragCancel)}eu.current=null,(0,k.unstable_batchedUpdates)(()=>{q({type:e}),Z(w.Uninitialized),tm(null),ev(null),eE(null),tv.current=null;let t=e===h.DragEnd?"onDragEnd":"onDragCancel";if(a){let e=ek.current[t];null==e||e(a),J({type:t,event:a})}})}}tv.current=a},[ee]),ty=(0,N.useCallback)((e,t)=>(r,n)=>{let i=r.nativeEvent,s=ee.get(n);null!==eu.current||!s||i.dndKit||i.defaultPrevented||!0===e(r,t.options,{active:s})&&(i.dndKit={capturedBy:t.sensor},eu.current=n,tx(r,t))},[ee,tx]),tb=(0,N.useMemo)(()=>A.reduce((e,t)=>{let{sensor:r}=t;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:ty(e.handler,t)}))]},[]),[A,ty]);(0,N.useEffect)(()=>{if(!C)return;let e=A.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let t of e)null==t||t()}},A.map(e=>{let{sensor:t}=e;return t})),O(()=>{eL&&Y===w.Initializing&&Z(w.Initialized)},[eL,Y]),(0,N.useEffect)(()=>{let{onDragMove:e}=ek.current,{active:t,activatorEvent:r,collisions:n,over:i}=eB.current;if(!t||!r)return;let s={active:t,activatorEvent:r,collisions:n,delta:{x:td.x,y:td.y},over:i};(0,k.unstable_batchedUpdates)(()=>{null==e||e(s),J({type:"onDragMove",event:s})})},[td.x,td.y]),(0,N.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:r,droppableContainers:n,scrollAdjustedTranslate:i}=eB.current;if(!e||null==eu.current||!t||!i)return;let{onDragOver:s}=ek.current,a=n.get(tf),l=a&&a.rect.current?{id:a.id,rect:a.rect.current,data:a.data,disabled:a.disabled}:null,o={active:e,activatorEvent:t,collisions:r,delta:{x:i.x,y:i.y},over:l};(0,k.unstable_batchedUpdates)(()=>{tm(l),null==s||s(o),J({type:"onDragOver",event:o})})},[tf]),O(()=>{eB.current={activatorEvent:ex,active:ed,activeNode:eM,collisionRect:tu,collisions:th,droppableRects:eR,draggableNodes:ee,draggingNode:e1,draggingNodeRect:e8,droppableContainers:ei,over:tp,scrollableAncestors:tn,scrollAdjustedTranslate:td},el.current={initial:e8,translated:tu}},[ed,eM,th,tu,ee,e1,e8,eR,ei,tp,tn,td]),function(e){let t,{acceleration:r,activator:n=v.Pointer,canScroll:i,draggingRect:s,enabled:a,interval:l=5,order:o=x.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:h,threshold:p}=e,m=function(e){let{delta:t,disabled:r}=e,n=_(t);return L(e=>{if(r||!n||!e)return e_;let i={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[f.Backward]:e.x[f.Backward]||-1===i.x,[f.Forward]:e.x[f.Forward]||1===i.x},y:{[f.Backward]:e.y[f.Backward]||-1===i.y,[f.Forward]:e.y[f.Forward]||1===i.y}}},[r,t,n])}({delta:h,disabled:!a}),[g,y]=(t=(0,N.useRef)(null),[(0,N.useCallback)((e,r)=>{t.current=setInterval(e,r)},[]),(0,N.useCallback)(()=>{null!==t.current&&(clearInterval(t.current),t.current=null)},[])]),b=(0,N.useRef)({x:0,y:0}),w=(0,N.useRef)({x:0,y:0}),j=(0,N.useMemo)(()=>{switch(n){case v.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case v.DraggableRect:return s}},[n,s,c]),E=(0,N.useRef)(null),k=(0,N.useCallback)(()=>{let e=E.current;if(!e)return;let t=b.current.x*w.current.x,r=b.current.y*w.current.y;e.scrollBy(t,r)},[]),C=(0,N.useMemo)(()=>o===x.TreeOrder?[...d].reverse():d,[o,d]);(0,N.useEffect)(()=>{if(!a||!d.length||!j)return void y();for(let e of C){if((null==i?void 0:i(e))===!1)continue;let t=u[d.indexOf(e)];if(!t)continue;let{direction:n,speed:s}=function(e,t,r,n,i){let{top:s,left:a,right:l,bottom:o}=r;void 0===n&&(n=10),void 0===i&&(i=ej);let{isTop:c,isBottom:d,isLeft:u,isRight:h}=ew(e),p={x:0,y:0},m={x:0,y:0},g={height:t.height*i.y,width:t.width*i.x};return!c&&s<=t.top+g.height?(p.y=f.Backward,m.y=n*Math.abs((t.top+g.height-s)/g.height)):!d&&o>=t.bottom-g.height&&(p.y=f.Forward,m.y=n*Math.abs((t.bottom-g.height-o)/g.height)),!h&&l>=t.right-g.width?(p.x=f.Forward,m.x=n*Math.abs((t.right-g.width-l)/g.width)):!u&&a<=t.left+g.width&&(p.x=f.Backward,m.x=n*Math.abs((t.left+g.width-a)/g.width)),{direction:p,speed:m}}(e,t,j,r,p);for(let e of["x","y"])m[e][n[e]]||(s[e]=0,n[e]=0);if(s.x>0||s.y>0){y(),E.current=e,g(k,l),b.current=s,w.current=n;return}}b.current={x:0,y:0},w.current={x:0,y:0},y()},[r,k,i,y,a,l,JSON.stringify(j),JSON.stringify(m),g,d,C,u,JSON.stringify(p)])}({...eP,delta:er,draggingRect:tu,pointerCoordinates:ta,scrollableAncestors:tn,scrollableAncestorRects:ti});let tw=(0,N.useMemo)(()=>({active:ed,activeNode:eM,activeNodeRect:eL,activatorEvent:ex,collisions:th,containerNodeRect:eU,dragOverlay:e0,draggableNodes:ee,droppableContainers:ei,droppableRects:eR,over:tp,measureDroppableContainers:eI,scrollableAncestors:tn,scrollableAncestorRects:ti,measuringConfiguration:eT,measuringScheduled:eA,windowRect:tr}),[ed,eM,eL,ex,th,eU,e0,ee,ei,eR,tp,eI,tn,ti,eT,eA,tr]),tj=(0,N.useMemo)(()=>({activatorEvent:ex,activators:tb,active:ed,activeNodeRect:eL,ariaDescribedById:{draggable:eS},dispatch:q,draggableNodes:ee,over:tp,measureDroppableContainers:eI}),[ex,tb,ed,eL,q,eS,ee,tp,eI]);return N.default.createElement(G.Provider,{value:K},N.default.createElement(e2.Provider,{value:tj},N.default.createElement(e5.Provider,{value:tw},N.default.createElement(e9.Provider,{value:tg},R)),N.default.createElement(e7,{disabled:(null==S?void 0:S.restoreFocus)===!1})),N.default.createElement(et,{...S,hiddenTextDescribedById:eS}))}),te=(0,N.createContext)(null),tt="button";function tr(){return(0,N.useContext)(e5)}let tn={timeout:25};function ti(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:i}=e,s=V("Droppable"),{active:a,dispatch:l,over:o,measureDroppableContainers:c}=(0,N.useContext)(e2),d=(0,N.useRef)({disabled:r}),u=(0,N.useRef)(!1),f=(0,N.useRef)(null),p=(0,N.useRef)(null),{disabled:m,updateMeasurementsFor:g,timeout:v}={...tn,...i},x=F(null!=g?g:n),y=ez({callback:(0,N.useCallback)(()=>{if(!u.current){u.current=!0;return}null!=p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{c(Array.isArray(x.current)?x.current:[x.current]),p.current=null},v)},[v]),disabled:m||!a}),[b,w]=U((0,N.useCallback)((e,t)=>{y&&(t&&(y.unobserve(t),u.current=!1),e&&y.observe(e))},[y])),j=F(t);return(0,N.useEffect)(()=>{y&&b.current&&(y.disconnect(),u.current=!1,y.observe(b.current))},[b,y]),(0,N.useEffect)(()=>(l({type:h.RegisterDroppable,element:{id:n,key:s,disabled:r,node:b,rect:f,data:j}}),()=>l({type:h.UnregisterDroppable,key:s,id:n})),[n]),(0,N.useEffect)(()=>{r!==d.current.disabled&&(l({type:h.SetDroppableDisabled,id:n,key:s,disabled:r}),d.current.disabled=r)},[n,s,r,l]),{active:a,rect:f,isOver:(null==o?void 0:o.id)===n,node:b,over:o,setNodeRef:w}}function ts(e){let{animation:t,children:r}=e,[n,i]=(0,N.useState)(null),[s,a]=(0,N.useState)(null),l=_(r);return r||n||!l||i(l),O(()=>{if(!s)return;let e=null==n?void 0:n.key,r=null==n?void 0:n.props.id;null==e||null==r?i(null):Promise.resolve(t(r,s)).then(()=>{i(null)})},[t,n,s]),N.default.createElement(N.default.Fragment,null,r,n?(0,N.cloneElement)(n,{ref:a}):null)}let ta={x:0,y:0,scaleX:1,scaleY:1};function tl(e){let{children:t}=e;return N.default.createElement(e2.Provider,{value:e1},N.default.createElement(e9.Provider,{value:ta},t))}let to={position:"fixed",touchAction:"none"},tc=e=>q(e)?"transform 250ms ease":void 0,td=(0,N.forwardRef)((e,t)=>{let{as:r,activatorEvent:n,adjustScale:i,children:s,className:a,rect:l,style:o,transform:c,transition:d=tc}=e;if(!l)return null;let u=i?c:{...c,scaleX:1,scaleY:1},h={...to,width:l.width,height:l.height,top:l.top,left:l.left,transform:J.Transform.toString(u),transformOrigin:i&&n?function(e,t){let r=W(e);if(!r)return"0 0";let n={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return n.x+"% "+n.y+"%"}(n,l):void 0,transition:"function"==typeof d?d(n):d,...o};return N.default.createElement(r,{className:a,style:h,ref:t},s)}),tu={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:r}}=e;return[{transform:J.Transform.toString(t)},{transform:J.Transform.toString(r)}]},sideEffects:(t={styles:{active:{opacity:"0"}}},e=>{let{active:r,dragOverlay:n}=e,i={},{styles:s,className:a}=t;if(null!=s&&s.active)for(let[e,t]of Object.entries(s.active))void 0!==t&&(i[e]=r.node.style.getPropertyValue(e),r.node.style.setProperty(e,t));if(null!=s&&s.dragOverlay)for(let[e,t]of Object.entries(s.dragOverlay))void 0!==t&&n.node.style.setProperty(e,t);return null!=a&&a.active&&r.node.classList.add(a.active),null!=a&&a.dragOverlay&&n.node.classList.add(a.dragOverlay),function(){for(let[e,t]of Object.entries(i))r.node.style.setProperty(e,t);null!=a&&a.active&&r.node.classList.remove(a.active)}})},th=0,tf=N.default.memo(e=>{var t;let{adjustScale:r=!1,children:n,dropAnimation:i,style:s,transition:a,modifiers:l,wrapperElement:o="div",className:c,zIndex:d=999}=e,{activatorEvent:u,active:h,activeNodeRect:f,containerNodeRect:p,draggableNodes:m,droppableContainers:g,dragOverlay:v,over:x,measuringConfiguration:y,scrollableAncestors:b,scrollableAncestorRects:w,windowRect:j}=tr(),E=(0,N.useContext)(e9),k=(t=null==h?void 0:h.id,(0,N.useMemo)(()=>{if(null!=t)return++th},[t])),C=e6(l,{activatorEvent:u,active:h,activeNodeRect:f,containerNodeRect:p,draggingNodeRect:v.rect,over:x,overlayNodeRect:v.rect,scrollableAncestors:b,scrollableAncestorRects:w,transform:E,windowRect:j}),S=eV(f),D=function(e){let{config:t,draggableNodes:r,droppableContainers:n,measuringConfiguration:i}=e;return P((e,s)=>{if(null===t)return;let a=r.get(e);if(!a)return;let l=a.node.current;if(!l)return;let o=eY(s);if(!o)return;let{transform:c}=T(s).getComputedStyle(s),d=ed(c);if(!d)return;let u="function"==typeof t?t:function(e){let{duration:t,easing:r,sideEffects:n,keyframes:i}={...tu,...e};return e=>{let{active:s,dragOverlay:a,transform:l,...o}=e;if(!t)return;let c={x:a.rect.left-s.rect.left,y:a.rect.top-s.rect.top},d={scaleX:1!==l.scaleX?s.rect.width*l.scaleX/a.rect.width:1,scaleY:1!==l.scaleY?s.rect.height*l.scaleY/a.rect.height:1},u={x:l.x-c.x,y:l.y-c.y,...d},h=i({...o,active:s,dragOverlay:a,transform:{initial:l,final:u}}),[f]=h,p=h[h.length-1];if(JSON.stringify(f)===JSON.stringify(p))return;let m=null==n?void 0:n({active:s,dragOverlay:a,...o}),g=a.node.animate(h,{duration:t,easing:r,fill:"forwards"});return new Promise(e=>{g.onfinish=()=>{null==m||m(),e()}})}}(t);return eE(l,i.draggable.measure),u({active:{id:e,data:a.data,node:l,rect:i.draggable.measure(l)},draggableNodes:r,dragOverlay:{node:s,rect:i.dragOverlay.measure(o)},droppableContainers:n,measuringConfiguration:i,transform:d})})}({config:i,draggableNodes:m,droppableContainers:g,measuringConfiguration:y}),R=S?v.setRef:void 0;return N.default.createElement(tl,null,N.default.createElement(ts,{animation:D},h&&k?N.default.createElement(td,{key:k,id:h.id,ref:R,as:o,activatorEvent:u,adjustScale:r,className:c,transition:a,rect:S,style:{zIndex:d,...s},transform:C},n):null))});function tp(e,t,r){let n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function tm(e){return null!==e&&e>=0}let tg=e=>{let{rects:t,activeIndex:r,overIndex:n,index:i}=e,s=tp(t,n,r),a=t[i],l=s[i];return l&&a?{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}:null},tv="Sortable",tx=N.default.createContext({activeIndex:-1,containerId:tv,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:tg,disabled:{draggable:!1,droppable:!1}});function ty(e){let{children:t,id:r,items:n,strategy:i=tg,disabled:s=!1}=e,{active:a,dragOverlay:l,droppableRects:o,over:c,measureDroppableContainers:d}=tr(),u=V(tv,r),h=null!==l.rect,f=(0,N.useMemo)(()=>n.map(e=>"object"==typeof e&&"id"in e?e.id:e),[n]),p=null!=a,m=a?f.indexOf(a.id):-1,g=c?f.indexOf(c.id):-1,v=(0,N.useRef)(f),x=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(f,v.current),y=-1!==g&&-1===m||x,b="boolean"==typeof s?{draggable:s,droppable:s}:s;O(()=>{x&&p&&d(f)},[x,f,p,d]),(0,N.useEffect)(()=>{v.current=f},[f]);let w=(0,N.useMemo)(()=>({activeIndex:m,containerId:u,disabled:b,disableTransforms:y,items:f,overIndex:g,useDragOverlay:h,sortedRects:f.reduce((e,t,r)=>{let n=o.get(t);return n&&(e[r]=n),e},Array(f.length)),strategy:i}),[m,u,b.draggable,b.droppable,y,f,g,o,h,i]);return N.default.createElement(tx.Provider,{value:w},t)}let tb=e=>{let{id:t,items:r,activeIndex:n,overIndex:i}=e;return tp(r,n,i).indexOf(t)},tw=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:i,items:s,newIndex:a,previousItems:l,previousContainerId:o,transition:c}=e;return!!c&&!!n&&(l===s||i!==a)&&(!!r||a!==i&&t===o)},tj={duration:200,easing:"ease"},tN="transform",tE=J.Transition.toString({property:tN,duration:0,easing:"linear"}),tk={roleDescription:"sortable"};function tC(e){var t,r,n,i;let{animateLayoutChanges:s=tw,attributes:a,disabled:l,data:o,getNewIndex:c=tb,id:d,strategy:u,resizeObserverConfig:h,transition:f=tj}=e,{items:p,containerId:m,activeIndex:g,disabled:v,disableTransforms:x,sortedRects:y,overIndex:b,useDragOverlay:w,strategy:j}=(0,N.useContext)(tx),E=(t=l,r=v,"boolean"==typeof t?{draggable:t,droppable:!1}:{draggable:null!=(n=null==t?void 0:t.draggable)?n:r.draggable,droppable:null!=(i=null==t?void 0:t.droppable)?i:r.droppable}),k=p.indexOf(d),C=(0,N.useMemo)(()=>({sortable:{containerId:m,index:k,items:p},...o}),[m,o,k,p]),S=(0,N.useMemo)(()=>p.slice(p.indexOf(d)),[p,d]),{rect:D,node:T,isOver:R,setNodeRef:I}=ti({id:d,data:C,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...h}}),{active:A,activatorEvent:M,activeNodeRect:P,attributes:L,setNodeRef:_,listeners:$,isDragging:z,over:B,setActivatorNodeRef:H,transform:W}=function(e){let{id:t,data:r,disabled:n=!1,attributes:i}=e,s=V("Draggable"),{activators:a,activatorEvent:l,active:o,activeNodeRect:c,ariaDescribedById:d,draggableNodes:u,over:h}=(0,N.useContext)(e2),{role:f=tt,roleDescription:p="draggable",tabIndex:m=0}=null!=i?i:{},g=(null==o?void 0:o.id)===t,v=(0,N.useContext)(g?e9:te),[x,y]=U(),[b,w]=U(),j=(0,N.useMemo)(()=>a.reduce((e,r)=>{let{eventName:n,handler:i}=r;return e[n]=e=>{i(e,t)},e},{}),[a,t]),E=F(r);return O(()=>(u.set(t,{id:t,key:s,node:x,activatorNode:b,data:E}),()=>{let e=u.get(t);e&&e.key===s&&u.delete(t)}),[u,t]),{active:o,activatorEvent:l,activeNodeRect:c,attributes:(0,N.useMemo)(()=>({role:f,tabIndex:m,"aria-disabled":n,"aria-pressed":!!g&&f===tt||void 0,"aria-roledescription":p,"aria-describedby":d.draggable}),[n,f,m,g,p,d.draggable]),isDragging:g,listeners:n?void 0:j,node:x,over:h,setNodeRef:y,setActivatorNodeRef:w,transform:v}}({id:d,data:C,attributes:{...tk,...a},disabled:E.draggable}),K=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,N.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}(I,_),Y=!!A,Z=Y&&!x&&tm(g)&&tm(b),X=!w&&z,G=X&&Z?W:null,Q=Z?null!=G?G:(null!=u?u:j)({rects:y,activeNodeRect:P,activeIndex:g,overIndex:b,index:k}):null,ee=tm(g)&&tm(b)?c({id:d,items:p,activeIndex:g,overIndex:b}):k,et=null==A?void 0:A.id,er=(0,N.useRef)({activeId:et,items:p,newIndex:ee,containerId:m}),en=p!==er.current.items,ei=s({active:A,containerId:m,isDragging:z,isSorting:Y,id:d,index:k,items:p,newIndex:er.current.newIndex,previousItems:er.current.items,previousContainerId:er.current.containerId,transition:f,wasDragging:null!=er.current.activeId}),es=function(e){let{disabled:t,index:r,node:n,rect:i}=e,[s,a]=(0,N.useState)(null),l=(0,N.useRef)(r);return O(()=>{if(!t&&r!==l.current&&n.current){let e=i.current;if(e){let t=eh(n.current,{ignoreTransform:!0}),r={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(r.x||r.y)&&a(r)}}r!==l.current&&(l.current=r)},[t,r,n,i]),(0,N.useEffect)(()=>{s&&a(null)},[s]),s}({disabled:!ei,index:k,node:T,rect:D});return(0,N.useEffect)(()=>{Y&&er.current.newIndex!==ee&&(er.current.newIndex=ee),m!==er.current.containerId&&(er.current.containerId=m),p!==er.current.items&&(er.current.items=p)},[Y,ee,m,p]),(0,N.useEffect)(()=>{if(et===er.current.activeId)return;if(null!=et&&null==er.current.activeId){er.current.activeId=et;return}let e=setTimeout(()=>{er.current.activeId=et},50);return()=>clearTimeout(e)},[et]),{active:A,activeIndex:g,attributes:L,data:C,rect:D,index:k,newIndex:ee,items:p,isOver:R,isSorting:Y,isDragging:z,listeners:$,node:T,overIndex:b,over:B,setNodeRef:K,setActivatorNodeRef:H,setDroppableNodeRef:I,setDraggableNodeRef:_,transform:null!=es?es:Q,transition:es||en&&er.current.newIndex===k?tE:(!X||q(M))&&f&&(Y||ei)?J.Transition.toString({...f,property:tN}):void 0}}m.Down,m.Right,m.Up,m.Left;var tS=e.i(2239);e.s(["ERROR_REVALIDATE_EVENT",()=>3,"FOCUS_EVENT",()=>0,"MUTATE_EVENT",()=>2,"RECONNECT_EVENT",()=>1],11671);var tD=Object.prototype.hasOwnProperty;let tT=new WeakMap,tR=()=>{},tI=tR(),tA=Object,tM=e=>e===tI,tO=(e,t)=>({...e,...t}),tP={},tF={},tL="undefined",tU=typeof window!=tL,t_=typeof document!=tL,t$=tU&&"Deno"in window,tV=(e,t)=>{let r=tT.get(e);return[()=>!tM(t)&&e.get(t)||tP,n=>{if(!tM(t)){let i=e.get(t);t in tF||(tF[t]=i),r[5](t,tO(i,n),i||tP)}},r[6],()=>!tM(t)&&t in tF?tF[t]:!tM(t)&&e.get(t)||tP]},tz=!0,[tB,tH]=tU&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[tR,tR],tq={initFocus:e=>(t_&&document.addEventListener("visibilitychange",e),tB("focus",e),()=>{t_&&document.removeEventListener("visibilitychange",e),tH("focus",e)}),initReconnect:e=>{let t=()=>{tz=!0,e()},r=()=>{tz=!1};return tB("online",t),tB("offline",r),()=>{tH("online",t),tH("offline",r)}}},tW=!N.default.useId,tJ=!tU||t$,tK=tJ?N.useEffect:N.useLayoutEffect,tY="undefined"!=typeof navigator&&navigator.connection,tZ=!tJ&&tY&&(["slow-2g","2g"].includes(tY.effectiveType)||tY.saveData),tX=new WeakMap,tG=(e,t)=>e===`[object ${t}]`,tQ=0,t0=e=>{let t,r,n=typeof e,i=tA.prototype.toString.call(e),s=tG(i,"Date"),a=tG(i,"RegExp"),l=tG(i,"Object");if(tA(e)!==e||s||a)t=s?e.toJSON():"symbol"==n?e.toString():"string"==n?JSON.stringify(e):""+e;else{if(t=tX.get(e))return t;if(t=++tQ+"~",tX.set(e,t),Array.isArray(e)){for(r=0,t="@";r<e.length;r++)t+=t0(e[r])+",";tX.set(e,t)}if(l){t="#";let n=tA.keys(e).sort();for(;!tM(r=n.pop());)tM(e[r])||(t+=r+":"+t0(e[r])+",");tX.set(e,t)}}return t},t1=e=>{if("function"==typeof e)try{e=e()}catch(t){e=""}let t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?t0(e):"",t]},t2=0,t5=()=>++t2;async function t3(...e){let[t,r,n,i]=e,s=tO({populateCache:!0,throwOnError:!0},"boolean"==typeof i?{revalidate:i}:i||{}),a=s.populateCache,l=s.rollbackOnError,o=s.optimisticData,c=s.throwOnError;if("function"==typeof r){let e=[];for(let n of t.keys())!/^\$(inf|sub)\$/.test(n)&&r(t.get(n)._k)&&e.push(n);return Promise.all(e.map(d))}return d(r);async function d(r){let i,[d]=t1(r);if(!d)return;let[u,h]=tV(t,d),[f,p,m,g]=tT.get(t),v=()=>{let e=f[d];return("function"==typeof s.revalidate?s.revalidate(u().data,r):!1!==s.revalidate)&&(delete m[d],delete g[d],e&&e[0])?e[0](2).then(()=>u().data):u().data};if(e.length<3)return v();let x=n,y=!1,b=t5();p[d]=[b,0];let w=!tM(o),j=u(),N=j.data,E=j._c,k=tM(E)?N:E;if(w&&h({data:o="function"==typeof o?o(k,N):o,_c:k}),"function"==typeof x)try{x=x(k)}catch(e){i=e,y=!0}if(x&&"function"==typeof x.then){let e;if(x=await x.catch(e=>{i=e,y=!0}),b!==p[d][0]){if(y)throw i;return x}y&&w&&(e=i,"function"==typeof l?l(e):!1!==l)&&(a=!0,h({data:k,_c:tI}))}if(a&&!y&&("function"==typeof a?h({data:a(x,k),error:tI,_c:tI}):h({data:x,error:tI,_c:tI})),p[d][1]=t5(),Promise.resolve(v()).then(()=>{h({_c:tI})}),y){if(c)throw i;return}return x}}let t4=(e,t)=>{for(let r in e)e[r][0]&&e[r][0](t)},t7=(e,t)=>{if(!tT.has(e)){let r=tO(tq,t),n=Object.create(null),i=t3.bind(tI,e),s=tR,a=Object.create(null),l=(e,t)=>{let r=a[e]||[];return a[e]=r,r.push(t),()=>r.splice(r.indexOf(t),1)},o=(t,r,n)=>{e.set(t,r);let i=a[t];if(i)for(let e of i)e(r,n)},c=()=>{if(!tT.has(e)&&(tT.set(e,[n,Object.create(null),Object.create(null),Object.create(null),i,o,l]),!tJ)){let t=r.initFocus(setTimeout.bind(tI,t4.bind(tI,n,0))),i=r.initReconnect(setTimeout.bind(tI,t4.bind(tI,n,1)));s=()=>{t&&t(),i&&i(),tT.delete(e)}}};return c(),[e,i,c,s]}return[e,tT.get(e)[4]]},[t6,t9]=t7(new Map),t8=tO({onLoadingSlow:tR,onSuccess:tR,onError:tR,onErrorRetry:(e,t,r,n,i)=>{let s=r.errorRetryCount,a=i.retryCount,l=~~((Math.random()+.5)*(1<<(a<8?a:8)))*r.errorRetryInterval;(tM(s)||!(a>s))&&setTimeout(n,l,i)},onDiscarded:tR,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:tZ?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:tZ?5e3:3e3,compare:function e(t,r){var n,i;if(t===r)return!0;if(t&&r&&(n=t.constructor)===r.constructor){if(n===Date)return t.getTime()===r.getTime();if(n===RegExp)return t.toString()===r.toString();if(n===Array){if((i=t.length)===r.length)for(;i--&&e(t[i],r[i]););return -1===i}if(!n||"object"==typeof t){for(n in i=0,t)if(tD.call(t,n)&&++i&&!tD.call(r,n)||!(n in r)||!e(t[n],r[n]))return!1;return Object.keys(r).length===i}}return t!=t&&r!=r},isPaused:()=>!1,cache:t6,mutate:t9,fallback:{}},{isOnline:()=>tz,isVisible:()=>{let e=t_&&document.visibilityState;return tM(e)||"hidden"!==e}}),re=(e,t)=>{let r=tO(e,t);if(t){let{use:n,fallback:i}=e,{use:s,fallback:a}=t;n&&s&&(r.use=n.concat(s)),i&&a&&(r.fallback=tO(i,a))}return r},rt=(0,N.createContext)({});var rr=e.i(11671);let rn=tU&&window.__SWR_DEVTOOLS_USE__,ri=(rn?window.__SWR_DEVTOOLS_USE__:[]).concat(e=>(t,r,n)=>{let i=r&&((...e)=>{let[n]=t1(t),[,,,i]=tT.get(t6);if(n.startsWith("$inf$"))return r(...e);let s=i[n];return tM(s)?r(...e):(delete i[n],s)});return e(t,i,n)});rn&&(window.__SWR_DEVTOOLS_REACT__=N.default);let rs=()=>{},ra=rs(),rl=(new WeakMap,N.default.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}})),ro={dedupe:!0},rc=Promise.resolve(tI);tA.defineProperty(e=>{let{value:t}=e,r=(0,N.useContext)(rt),n="function"==typeof t,i=(0,N.useMemo)(()=>n?t(r):t,[n,r,t]),s=(0,N.useMemo)(()=>n?i:re(r,i),[n,r,i]),a=i&&i.provider,l=(0,N.useRef)(tI);a&&!l.current&&(l.current=t7(a(s.cache||t6),i));let o=l.current;return o&&(s.cache=o[0],s.mutate=o[1]),tK(()=>{if(o)return o[2]&&o[2](),o[3]},[]),(0,N.createElement)(rt.Provider,tO(e,{value:s}))},"defaultValue",{value:t8});let rd=(r=(e,t,r)=>{let{cache:n,compare:i,suspense:s,fallbackData:a,revalidateOnMount:l,revalidateIfStale:o,refreshInterval:c,refreshWhenHidden:d,refreshWhenOffline:u,keepPreviousData:h}=r,[f,p,m,g]=tT.get(n),[v,x]=t1(e),y=(0,N.useRef)(!1),b=(0,N.useRef)(!1),w=(0,N.useRef)(v),j=(0,N.useRef)(t),E=(0,N.useRef)(r),k=()=>E.current.isVisible()&&E.current.isOnline(),[C,S,D,T]=tV(n,v),R=(0,N.useRef)({}).current,I=tM(a)?tM(r.fallback)?tI:r.fallback[v]:a,A=(e,t)=>{for(let r in R)if("data"===r){if(!i(e[r],t[r])&&(!tM(e[r])||!i(V,t[r])))return!1}else if(t[r]!==e[r])return!1;return!0},M=(0,N.useMemo)(()=>{let e=!!v&&!!t&&(tM(l)?!E.current.isPaused()&&!s&&!1!==o:l),r=t=>{let r=tO(t);return(delete r._k,e)?{isValidating:!0,isLoading:!0,...r}:r},n=C(),i=T(),a=r(n),c=n===i?a:r(i),d=a;return[()=>{let e=r(C());return A(e,d)?(d.data=e.data,d.isLoading=e.isLoading,d.isValidating=e.isValidating,d.error=e.error,d):(d=e,e)},()=>c]},[n,v]),O=(0,tS.useSyncExternalStore)((0,N.useCallback)(e=>D(v,(t,r)=>{A(r,t)||e()}),[n,v]),M[0],M[1]),P=!y.current,F=f[v]&&f[v].length>0,L=O.data,U=tM(L)?I&&"function"==typeof I.then?rl(I):I:L,_=O.error,$=(0,N.useRef)(U),V=h?tM(L)?tM($.current)?U:$.current:L:U,z=(!F||!!tM(_))&&(P&&!tM(l)?l:!E.current.isPaused()&&(s?!tM(U)&&o:tM(U)||o)),B=!!(v&&t&&P&&z),H=tM(O.isValidating)?B:O.isValidating,q=tM(O.isLoading)?B:O.isLoading,W=(0,N.useCallback)(async e=>{let t,n,s=j.current;if(!v||!s||b.current||E.current.isPaused())return!1;let a=!0,l=e||{},o=!m[v]||!l.dedupe,c=()=>tW?!b.current&&v===w.current&&y.current:v===w.current,d={isValidating:!1,isLoading:!1},u=()=>{S(d)},h=()=>{let e=m[v];e&&e[1]===n&&delete m[v]},g={isValidating:!0};tM(C().data)&&(g.isLoading=!0);try{if(o&&(S(g),r.loadingTimeout&&tM(C().data)&&setTimeout(()=>{a&&c()&&E.current.onLoadingSlow(v,r)},r.loadingTimeout),m[v]=[s(x),t5()]),[t,n]=m[v],t=await t,o&&setTimeout(h,r.dedupingInterval),!m[v]||m[v][1]!==n)return o&&c()&&E.current.onDiscarded(v),!1;d.error=tI;let e=p[v];if(!tM(e)&&(n<=e[0]||n<=e[1]||0===e[1]))return u(),o&&c()&&E.current.onDiscarded(v),!1;let l=C().data;d.data=i(l,t)?l:t,o&&c()&&E.current.onSuccess(t,v,r)}catch(r){h();let e=E.current,{shouldRetryOnError:t}=e;!e.isPaused()&&(d.error=r,o&&c())&&(e.onError(r,v,e),(!0===t||"function"==typeof t&&t(r))&&(!E.current.revalidateOnFocus||!E.current.revalidateOnReconnect||k())&&e.onErrorRetry(r,v,e,e=>{let t=f[v];t&&t[0]&&t[0](rr.ERROR_REVALIDATE_EVENT,e)},{retryCount:(l.retryCount||0)+1,dedupe:!0}))}return a=!1,u(),!0},[v,n]),J=(0,N.useCallback)((...e)=>t3(n,w.current,...e),[]);if(tK(()=>{j.current=t,E.current=r,tM(L)||($.current=L)}),tK(()=>{var e;let t;if(!v)return;let r=W.bind(tI,ro),n=0;E.current.revalidateOnFocus&&(n=Date.now()+E.current.focusThrottleInterval);let i=(e=(e,t={})=>{if(e==rr.FOCUS_EVENT){let e=Date.now();E.current.revalidateOnFocus&&e>n&&k()&&(n=e+E.current.focusThrottleInterval,r())}else if(e==rr.RECONNECT_EVENT)E.current.revalidateOnReconnect&&k()&&r();else if(e==rr.MUTATE_EVENT)return W();else if(e==rr.ERROR_REVALIDATE_EVENT)return W(t)},(t=f[v]||(f[v]=[])).push(e),()=>{let r=t.indexOf(e);r>=0&&(t[r]=t[t.length-1],t.pop())});if(b.current=!1,w.current=v,y.current=!0,S({_k:x}),z&&!m[v])if(tM(U)||tJ)r();else tU&&typeof window.requestAnimationFrame!=tL?window.requestAnimationFrame(r):setTimeout(r,1);return()=>{b.current=!0,i()}},[v]),tK(()=>{let e;function t(){let t="function"==typeof c?c(C().data):c;t&&-1!==e&&(e=setTimeout(r,t))}function r(){!C().error&&(d||E.current.isVisible())&&(u||E.current.isOnline())?W(ro).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[c,d,u,v]),(0,N.useDebugValue)(V),s){let e=v&&tM(U);if(!tW&&tJ&&e)throw Error("Fallback data is required when using Suspense in SSR.");e&&(j.current=t,E.current=r,b.current=!1);let n=g[v];if(rl(!tM(n)&&e?J(n):rc),!tM(_)&&e)throw _;let i=e?W(ro):rc;!tM(V)&&e&&(i.status="fulfilled",i.value=!0),rl(i)}return{mutate:J,get data(){return R.data=!0,V},get error(){return R.error=!0,_},get isValidating(){return R.isValidating=!0,H},get isLoading(){return R.isLoading=!0,q}}},function(...e){let t,n=(t=(0,N.useContext)(rt),(0,N.useMemo)(()=>tO(t8,t),[t])),[i,s,a]="function"==typeof e[1]?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],l=re(n,a),o=r,{use:c}=l,d=(c||[]).concat(ri);for(let e=d.length;e--;)o=d[e](o);return o(i,s||l.fetcher||null,l)});var ru=e.i(17255),rh=e.i(75254);let rf=(0,rh.default)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),rp=(0,rh.default)("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),rm=["#E0F7FA","#F1F8E9","#FFF8E1","#F3E5F5","#E3F2FD","#FBE9E7","#FFF3E0","#E8F5E9","#FCE4EC","#E1F5FE"],rg={LOW:"#D1FAE5",MEDIUM:"#FEF3C7",HIGH:"#FED7AA",URGENT:"#FECACA"},rv={LOW:"Baja",MEDIUM:"Media",HIGH:"Alta",URGENT:"Urgente"};function rx({id:e,title:t,isActive:r,className:n,onClick:i,subtasksCount:s=0,isSubtask:a=!1,parentId:l,level:o=0,priority:c,assignees:d=[],links:u=[],checklist:h=[]}){let{attributes:f,listeners:p,setNodeRef:m,transform:g,transition:v,isDragging:x}=tC({id:e,data:{type:"Task"}}),y=function(e){let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);let r=Math.abs(t)%rm.length;return rm[r]}(l||e),b={transition:v,transform:J.Transform.toString(g),marginLeft:o>0?`${20*o}px`:"0",backgroundColor:r?void 0:y},w=h.filter(e=>e.completed).length,N=h.length;return(0,j.jsxs)("div",{ref:m,style:b,...f,...p,onClick:i?()=>i(e):void 0,className:`card ${r?"active":""} ${x?"dragging":""} ${n||""} `,children:[c&&"MEDIUM"!==c&&(0,j.jsx)("div",{className:"inline-block px-2 py-0.5 rounded text-xs font-medium mb-2",style:{backgroundColor:rg[c],color:"#1E293B"},children:rv[c]}),(0,j.jsx)("h3",{style:{color:"black !important"},className:"truncate overflow-hidden text-ellipsis",title:t,children:t}),(0,j.jsxs)("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[s>0&&(0,j.jsxs)("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,j.jsx)(rf,{size:14}),(0,j.jsx)("span",{children:s})]}),N>0&&(0,j.jsxs)("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,j.jsx)(rf,{size:14}),(0,j.jsxs)("span",{children:[w,"/",N]})]}),u.length>0&&(0,j.jsxs)("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,j.jsx)(rp,{size:14}),(0,j.jsx)("span",{children:u.length})]}),d.length>0&&(0,j.jsxs)("div",{className:"flex -space-x-2 ml-auto",children:[d.slice(0,3).map(e=>e.image?(0,j.jsx)("img",{src:e.image,alt:e.name||e.email||"User",className:"w-6 h-6 rounded-full border-2 border-white",title:e.name||e.email||""},e.id):(0,j.jsx)("div",{className:"w-6 h-6 rounded-full bg-blue-200 border-2 border-white flex items-center justify-center text-xs font-medium text-neutral-900",title:e.name||e.email||"",children:(e.name||e.email||"?")[0].toUpperCase()},e.id)),d.length>3&&(0,j.jsxs)("div",{className:"w-6 h-6 rounded-full bg-gray-300 border-2 border-white flex items-center justify-center text-xs font-medium text-gray-700",children:["+",d.length-3]})]})]})]})}let ry=(0,rh.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),rb=(0,rh.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),rw=(0,rh.default)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);function rj({id:e,title:t,tasks:r,onEditName:n,onDelete:i,onCreateTask:s,onTaskClick:a}){let{setNodeRef:l}=ti({id:e,data:{type:"Column"}}),{setNodeRef:o,attributes:c,listeners:d,transform:u,transition:h,isDragging:f}=tC({id:e,data:{type:"Column"}}),p={transition:h,transform:J.Transform.toString(u)},[m,g]=(0,N.useState)(!1),[v,x]=(0,N.useState)(t),y=()=>{v.trim()!==t&&n(e,v.trim()),g(!1)};return(0,j.jsxs)("section",{ref:e=>{l(e),o(e)},style:p,...c,className:`column flex-shrink-0 h-full ${f?"dragging":""}`,children:[(0,j.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[m?(0,j.jsx)("input",{type:"text",value:v,onChange:e=>{x(e.target.value)},onBlur:y,onKeyDown:e=>{"Enter"===e.key&&y(),"Escape"===e.key&&(x(t),g(!1))},className:"column-title-edit",autoFocus:!0}):(0,j.jsx)("h2",{className:"column-title",onDoubleClick:()=>{g(!0)},children:t}),(0,j.jsxs)("div",{className:"flex gap-2",children:[(0,j.jsx)("button",{onClick:()=>{s(e)},className:"rounded-full w-8 h-8 flex items-center justify-center bg-[#2563EB] hover:bg-[#3B82F6]",style:{borderWidth:"1px",borderColor:"white",borderStyle:"solid"},children:(0,j.jsx)(ry,{size:16,stroke:"white",fill:"white"})}),(0,j.jsx)("button",{onClick:()=>i(e),className:"rounded-full w-8 h-8 flex items-center justify-center bg-[#EF4444] hover:bg-[#DC2626]",style:{borderWidth:"1px",borderColor:"white",borderStyle:"solid"},children:(0,j.jsx)(rb,{size:16,stroke:"white",fill:"white"})}),(0,j.jsx)("button",{...d,className:"rounded-full w-8 h-8 flex items-center justify-center bg-[#FACC15] hover:bg-[#EAB308] cursor-grab",style:{borderWidth:"1px",borderColor:"white",borderStyle:"solid"},children:(0,j.jsx)(rw,{size:16,stroke:"white",fill:"white"})})]})]}),(0,j.jsx)("div",{className:"flex flex-col gap-[12px] flex-1 overflow-y-auto overflow-x-hidden min-h-[100px]",children:(0,j.jsx)(ty,{items:r.map(e=>e.id),children:r.map(e=>{let t=(e,r)=>{if(!e.parentId)return 0;let n=r.find(t=>t.id===e.parentId);return n?1+t(n,r):0},n=t(e,r);return(0,j.jsx)(rx,{id:e.id,title:e.title,isActive:e.isActive,onClick:a,subtasksCount:e.children?.length||0,isSubtask:!!e.parentId,parentId:e.parentId,level:n,priority:e.priority||void 0,assignees:e.assignees||[],links:e.links?JSON.parse(e.links):[],checklist:e.checklist?JSON.parse(e.checklist):[]},e.id)})})})]})}var rN=e.i(19455);let rE=(0,rh.default)("file",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]]),rk=(0,rh.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var rC=e.i(27612),rS=e.i(18566);let rD=(0,rh.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);function rT({projectId:e,taskId:t,onUploadComplete:r}){let[n,i]=(0,N.useState)(!1),[s,a]=(0,N.useState)(!1),[l,o]=(0,N.useState)(0),[c,d]=(0,N.useState)(null),u=(0,N.useCallback)(e=>{e.preventDefault(),i(!0)},[]),h=(0,N.useCallback)(e=>{e.preventDefault(),i(!1)},[]),f=async n=>{a(!0),d(null),o(0);try{let i=new FormData;i.append("file",n),i.append("projectId",e),i.append("taskId",t);let s=setInterval(()=>{o(e=>Math.min(e+10,90))},200),l=await fetch("/api/upload",{method:"POST",body:i});if(clearInterval(s),o(100),!l.ok){let e=await l.json();throw Error(e.message||"Upload failed")}let c=await l.json();r(c),setTimeout(()=>{a(!1),o(0)},500)}catch(e){console.error("Upload error:",e),d(e instanceof Error?e.message:"Upload failed"),a(!1),o(0)}},p=(0,N.useCallback)(async e=>{e.preventDefault(),i(!1);let t=Array.from(e.dataTransfer.files);t.length>0&&await f(t[0])},[e,t]),m=(0,N.useCallback)(async e=>{let t=e.target.files;t&&t.length>0&&await f(t[0]),e.target.value=""},[e,t]);return(0,j.jsxs)("div",{className:"w-full",children:[(0,j.jsxs)("div",{onDragOver:u,onDragLeave:h,onDrop:p,className:`
          border-2 border-dashed rounded-lg p-6 text-center transition-colors
          ${n?"border-blue-500 bg-blue-50":"border-gray-300 bg-gray-50"}
          ${s?"opacity-50 pointer-events-none":"cursor-pointer hover:border-blue-400"}
        `,children:[(0,j.jsx)("input",{type:"file",id:"file-upload",className:"hidden",onChange:m,disabled:s}),s?(0,j.jsxs)("div",{className:"space-y-3",children:[(0,j.jsx)(rD,{className:"w-8 h-8 mx-auto text-blue-500 animate-bounce"}),(0,j.jsx)("p",{className:"text-sm text-gray-600",children:"Subiendo archivo..."}),(0,j.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,j.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${l}%`}})}),(0,j.jsxs)("p",{className:"text-xs text-gray-500",children:[l,"%"]})]}):(0,j.jsxs)("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[(0,j.jsx)(rD,{className:"w-8 h-8 mx-auto text-gray-400 mb-2"}),(0,j.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Arrastra un archivo aqu o haz clic para seleccionar"}),(0,j.jsx)("p",{className:"text-xs text-gray-400",children:"Mximo 50MB  Imgenes, videos, PDFs, documentos"})]})]}),c&&(0,j.jsxs)("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[(0,j.jsx)(rb,{className:"w-4 h-4 text-red-500 mt-0.5 flex-shrink-0"}),(0,j.jsx)("p",{className:"text-sm text-red-600",children:c})]})]})}e.i(47167);var rR=e.i(18228);globalThis.prisma??new rR.PrismaClient;let rI="ADMIN",rA="PROJECT_MANAGER",rM="ARTIST",rO="VIEWER",rP=["ADMIN","PROJECT_MANAGER"],rF=["ADMIN","PROJECT_MANAGER"],rL=["ADMIN","PROJECT_MANAGER"],rU=["ADMIN","PROJECT_MANAGER","ARTIST"],r_=["ADMIN","PROJECT_MANAGER"],r$=["ADMIN","PROJECT_MANAGER"];function rV(e){let{data:t}=(0,ru.useSession)(),[r,n]=(0,N.useState)(null),[i,s]=(0,N.useState)(!0);return(0,N.useEffect)(()=>{e&&t?.user&&(s(!0),fetch(`/api/projects/${e}/role`).then(e=>e.json()).then(e=>{n(e.role),s(!1)}).catch(e=>{console.error("Error fetching user role:",e),s(!1)}))},[e,t]),{userRole:r,can:e=>!!r&&e.includes(r),isLoading:i,isAdmin:r===rI,isProjectManager:r===rA,isArtist:r===rM,isViewer:r===rO}}function rz({task:e,onClose:t,onTaskUpdate:r,availableUsers:n}){let i,s,[a,l]=(0,N.useState)(e?.assignees?.map(e=>e.id)||[]),o=async t=>{if(!t||a.includes(t))return;let n=[...a,t];l(n);try{await fetch(`/api/projects/${e?.projectId}/tasks/${e?.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({assignees:n})}),r()}catch(e){console.error("Error adding assignee:",e)}},[c,d]=(0,N.useState)(!1),u=(0,N.useRef)(null),[h,f]=(0,N.useState)(!1),[p,m]=(0,N.useState)({x:0,y:0}),[g,v]=(0,N.useState)({x:0,y:0}),[x,y]=(0,N.useState)(""),[b,w]=(0,N.useState)(!1);(0,rS.useRouter)();let{data:E}=(0,ru.useSession)(),{can:C}=rV(e?.projectId||""),S=e?.assignees?.some(e=>e.id===E?.user?.id)||!1,D=C(rL)||S&&C(rU),T=C(r_),R=C(r$),[I,A]=(0,N.useState)(e?.priority||"MEDIUM"),[M,O]=(0,N.useState)(e?.tags?JSON.parse(e.tags):[]),[P,F]=(0,N.useState)(e?.links?JSON.parse(e.links):[]),[L,U]=(0,N.useState)(e?.checklist?JSON.parse(e.checklist):[]),[_,$]=(0,N.useState)(e?.attachments?JSON.parse(e.attachments):[]),[V,z]=(0,N.useState)(""),[B,H]=(0,N.useState)(""),[q,W]=(0,N.useState)(""),[J,K]=(0,N.useState)("");(0,N.useEffect)(()=>{e?.assignees&&l(e.assignees.map(e=>e.id))},[e?.assignees]),(0,N.useEffect)(()=>(d(!0),m({x:(window.innerWidth-560)/2,y:(window.innerHeight-600)/2}),()=>d(!1)),[]);let Y=(0,N.useCallback)(e=>{f(!0),v({x:e.clientX-p.x,y:e.clientY-p.y})},[p]),Z=(0,N.useCallback)(e=>{h&&m({x:e.clientX-g.x,y:e.clientY-g.y})},[h,g]),X=(0,N.useCallback)(()=>{f(!1)},[]);(0,N.useEffect)(()=>(h?(window.addEventListener("mousemove",Z),window.addEventListener("mouseup",X)):(window.removeEventListener("mousemove",Z),window.removeEventListener("mouseup",X)),()=>{window.removeEventListener("mousemove",Z),window.removeEventListener("mouseup",X)}),[h,Z,X]);let G=async()=>{if(x.trim()&&e){w(!0);try{(await fetch(`/api/projects/${e.projectId}/tasks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:x,columnId:e.columnId,parentId:e.id})})).ok?(y(""),r()):console.error("Failed to create subtask")}catch(e){console.error("Error creating subtask:",e)}finally{w(!1)}}};return e&&c?(0,k.createPortal)((0,j.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 z-50",onClick:t,children:(0,j.jsxs)("div",{ref:u,className:"task-detail-modal",style:{position:"fixed",left:p.x,top:p.y,cursor:h?"grabbing":"grab",minWidth:"320px",maxWidth:"560px"},onMouseDown:Y,onClick:e=>e.stopPropagation(),children:[(0,j.jsxs)("div",{className:"modal-header flex justify-between items-center pb-4 border-b border-gray-200 mb-6 cursor-move -mt-[10px]",children:[(0,j.jsx)("h2",{className:"text-2xl font-bold text-[#0F172A]",children:e.title}),(0,j.jsx)("button",{onClick:t,className:"modal-close-btn",children:(0,j.jsx)(rb,{size:16,stroke:"white",fill:"white"})})]}),(0,j.jsxs)("div",{className:"modal-body overflow-y-auto max-h-[60vh] space-y-6 mt-[5px]",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Description"}),(0,j.jsx)("p",{className:"text-gray-700 leading-loose",children:e.description||"No description provided."})]}),(0,j.jsxs)("div",{className:"pt-[5px]",children:[(0,j.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Fechas"}),(0,j.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de inicio"}),(0,j.jsx)("input",{type:"date",className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#2563EB]",value:e.startDate?new Date(e.startDate).toISOString().split("T")[0]:"",onChange:async t=>{let n=t.target.value||null;try{await fetch(`/api/projects/${e.projectId}/tasks/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({startDate:n})}),r()}catch(e){console.error("Error updating start date:",e)}}})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de finalizacin"}),(0,j.jsx)("input",{type:"date",className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#2563EB]",value:e.endDate?new Date(e.endDate).toISOString().split("T")[0]:"",onChange:async t=>{let n=t.target.value||null;try{await fetch(`/api/projects/${e.projectId}/tasks/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({endDate:n})}),r()}catch(e){console.error("Error updating end date:",e)}}})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de tolerancia"}),(0,j.jsx)("input",{type:"date",className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#2563EB]",value:e.toleranceDate?new Date(e.toleranceDate).toISOString().split("T")[0]:"",onChange:async t=>{let n=t.target.value||null;try{await fetch(`/api/projects/${e.projectId}/tasks/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({toleranceDate:n})}),r()}catch(e){console.error("Error updating tolerance date:",e)}}})]})]})]}),(0,j.jsxs)("div",{className:"pt-[5px]",children:[(0,j.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Prioridad"}),(0,j.jsxs)("select",{className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",value:I,onChange:async t=>{let n=t.target.value;A(n);try{await fetch(`/api/projects/${e.projectId}/tasks/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({priority:n})}),r()}catch(e){console.error("Error updating priority:",e)}},children:[(0,j.jsx)("option",{value:"LOW",children:"Baja"}),(0,j.jsx)("option",{value:"MEDIUM",children:"Media"}),(0,j.jsx)("option",{value:"HIGH",children:"Alta"}),(0,j.jsx)("option",{value:"URGENT",children:"Urgente"})]})]}),(0,j.jsxs)("div",{className:"pt-[5px]",children:[(0,j.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Asignado a"}),(0,j.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:a.map(t=>{let i=n.find(e=>e.id===t)||e?.assignees?.find(e=>e.id===t);return i?(0,j.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-gray-100 rounded-full",children:[i.image?(0,j.jsx)("img",{src:i.image,alt:i.name||i.email||"User",className:"w-6 h-6 rounded-full"}):(0,j.jsx)("div",{className:"w-6 h-6 rounded-full bg-blue-200 flex items-center justify-center text-xs font-medium text-neutral-900",children:(i.name||i.email||"?")[0].toUpperCase()}),(0,j.jsx)("span",{className:"text-sm text-gray-700",children:i.name||i.email}),R&&(0,j.jsx)("button",{className:"text-gray-600 hover:text-red-600 ml-1",onClick:async()=>{let t=a.filter(e=>e!==i.id);l(t);try{await fetch(`/api/projects/${e.projectId}/tasks/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({assignees:t})}),r()}catch(e){console.error("Error removing assignee:",e)}},children:""})]},i.id):null})}),(0,j.jsxs)("select",{className:"w-full p-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-600",onChange:e=>{e.target.value&&(o(e.target.value),e.target.value="")},disabled:!R,children:[(0,j.jsx)("option",{value:"",children:"Agregar usuario..."}),n.filter(e=>!a.includes(e.id)).map(e=>(0,j.jsx)("option",{value:e.id,children:e.name||e.email},e.id))]})]}),(0,j.jsxs)("div",{className:"pt-[5px]",children:[(0,j.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Etiquetas"}),(0,j.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:M.map((t,n)=>(0,j.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium",style:{backgroundColor:t.color||"#E0E7FF",color:"#1E293B"},children:[t.name,D&&(0,j.jsx)("button",{className:"ml-2 text-gray-600 hover:text-red-600",onClick:async()=>{let t=M.filter((e,t)=>t!==n);O(t);try{await fetch(`/api/projects/${e.projectId}/tasks/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({tags:t})}),r()}catch(e){console.error("Error removing tag:",e)}},children:""})]},n))}),(0,j.jsxs)("div",{className:"flex gap-2",children:[(0,j.jsx)("input",{type:"text",placeholder:"Nueva etiqueta",className:"flex-1 p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",value:V,onChange:e=>z(e.target.value),onKeyPress:t=>{if("Enter"===t.key&&V.trim()){let t=["#E0E7FF","#FEF3C7","#D1FAE5","#FCE7F3","#E0F2FE"],n={name:V.trim(),color:t[M.length%t.length]},i=[...M,n];O(i),z(""),fetch(`/api/projects/${e.projectId}/tasks/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({tags:i})}).then(()=>r())}},disabled:!D}),(0,j.jsx)("button",{className:"px-4 py-2 bg-blue-200 text-neutral-900 rounded-lg hover:bg-blue-300 transition-colors font-medium",onClick:async()=>{if(!V.trim())return;let t=["#E0E7FF","#FEF3C7","#D1FAE5","#FCE7F3","#E0F2FE"],n={name:V.trim(),color:t[M.length%t.length]},i=[...M,n];O(i),z("");try{await fetch(`/api/projects/${e.projectId}/tasks/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({tags:i})}),r()}catch(e){console.error("Error adding tag:",e)}},children:"Agregar"})]})]}),(0,j.jsxs)("div",{className:"pt-[5px]",children:[(0,j.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Enlaces"}),(0,j.jsx)("div",{className:"space-y-2 mb-3",children:P.map((t,n)=>(0,j.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[(0,j.jsx)("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline flex-1 truncate",children:t.title||t.url}),(0,j.jsx)("button",{className:"ml-2 text-gray-600 hover:text-red-600",onClick:async()=>{let t=P.filter((e,t)=>t!==n);F(t);try{await fetch(`/api/projects/${e.projectId}/tasks/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({links:t})}),r()}catch(e){console.error("Error removing link:",e)}},children:""})]},n))}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)("input",{type:"text",placeholder:"Ttulo del enlace",className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",value:B,onChange:e=>H(e.target.value)}),(0,j.jsxs)("div",{className:"flex gap-2",children:[(0,j.jsx)("input",{type:"url",placeholder:"https://ejemplo.com",className:"flex-1 p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",value:q,onChange:e=>W(e.target.value)}),(0,j.jsx)("button",{className:"px-4 py-2 bg-blue-200 text-neutral-900 rounded-lg hover:bg-blue-300 transition-colors font-medium",onClick:async()=>{if(!q.trim())return;let t=[...P,{title:B.trim()||q,url:q.trim()}];F(t),H(""),W("");try{await fetch(`/api/projects/${e.projectId}/tasks/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({links:t})}),r()}catch(e){console.error("Error adding link:",e)}},children:"Agregar"})]})]})]}),(0,j.jsxs)("div",{className:"pt-[5px]",children:[(0,j.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Checklist"}),(0,j.jsx)("div",{className:"space-y-2 mb-3",children:L.map(t=>(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("input",{type:"checkbox",checked:t.completed,className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-600",onChange:async n=>{let i=L.map(e=>e.id===t.id?{...e,completed:n.target.checked}:e);U(i);try{await fetch(`/api/projects/${e.projectId}/tasks/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({checklist:i})}),r()}catch(e){console.error("Error updating checklist:",e)}}}),(0,j.jsx)("span",{className:`flex-1 ${t.completed?"line-through text-gray-500":"text-gray-700"}`,children:t.text}),(0,j.jsx)("button",{className:"text-gray-600 hover:text-red-600",onClick:async()=>{let n=L.filter(e=>e.id!==t.id);U(n);try{await fetch(`/api/projects/${e.projectId}/tasks/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({checklist:n})}),r()}catch(e){console.error("Error removing checklist item:",e)}},children:""})]},t.id))}),(0,j.jsxs)("div",{className:"flex gap-2",children:[(0,j.jsx)("input",{type:"text",placeholder:"Nuevo item",className:"flex-1 p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",value:J,onChange:e=>K(e.target.value),onKeyPress:t=>{if("Enter"===t.key&&J.trim()){let t=[...L,{id:Date.now().toString(),text:J.trim(),completed:!1}];U(t),K(""),fetch(`/api/projects/${e.projectId}/tasks/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({checklist:t})}).then(()=>r())}}}),(0,j.jsx)("button",{className:"px-4 py-2 bg-blue-200 text-neutral-900 rounded-lg hover:bg-blue-300 transition-colors font-medium",onClick:async()=>{if(!J.trim())return;let t=[...L,{id:Date.now().toString(),text:J.trim(),completed:!1}];U(t),K("");try{await fetch(`/api/projects/${e.projectId}/tasks/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({checklist:t})}),r()}catch(e){console.error("Error adding checklist item:",e)}},children:"Agregar"})]})]}),(0,j.jsxs)("div",{className:"pt-[5px]",children:[(0,j.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Archivos Adjuntos"}),_.length>0&&(0,j.jsx)("div",{className:"space-y-2 mb-4",children:_.map((t,n)=>(0,j.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,j.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,j.jsx)(rE,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),(0,j.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,j.jsx)("p",{className:"text-sm font-medium text-gray-700 truncate",children:t.name}),(0,j.jsxs)("p",{className:"text-xs text-gray-500",children:[(t.size/1024/1024).toFixed(2)," MB  ",new Date(t.uploadedAt).toLocaleDateString()]})]})]}),(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("a",{href:t.url,download:!0,className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Descargar",children:(0,j.jsx)(rk,{size:16})}),(0,j.jsx)("button",{className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Eliminar",onClick:async()=>{let t=_.filter((e,t)=>t!==n);$(t);try{await fetch(`/api/projects/${e.projectId}/tasks/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({attachments:t})}),r()}catch(e){console.error("Error removing attachment:",e)}},children:(0,j.jsx)(rC.Trash2,{size:16})})]})]},n))}),(0,j.jsx)(rT,{projectId:e.projectId,taskId:e.id,onUploadComplete:async t=>{let n=[..._,t];$(n);try{await fetch(`/api/projects/${e.projectId}/tasks/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({attachments:n})}),r()}catch(e){console.error("Error saving attachment:",e)}}})]}),(0,j.jsxs)("div",{className:"pt-[5px]",children:[(0,j.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"Subtasks"}),(i=(e,t=0)=>e&&0!==e.length?e.map(e=>(0,j.jsxs)("li",{style:{marginLeft:`${16*t}px`},className:"text-gray-700 flex items-start gap-2 leading-relaxed",children:[(0,j.jsx)("span",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-gray-400 flex-shrink-0"}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("span",{children:e.title}),e.children&&e.children.length>0&&(0,j.jsx)("ul",{className:"space-y-2 mt-2",children:i(e.children,t+1)})]})]},e.id)):[],s=5>((e,t=[])=>{let r=0;return e.parentId&&(r=1),r})(e),(0,j.jsxs)(j.Fragment,{children:[e.children&&e.children.length>0?(0,j.jsx)("ul",{className:"space-y-3 mb-4",children:i(e.children)}):(0,j.jsx)("p",{className:"text-gray-500 italic mb-4",children:"No subtasks yet."}),(0,j.jsxs)("div",{className:"flex gap-3 mt-[10px]",children:[(0,j.jsx)("input",{type:"text",placeholder:s?"New subtask title":"Max depth reached (5 levels)",className:"flex-grow p-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#2563EB] transition-shadow",value:x,onChange:e=>y(e.target.value),onKeyDown:e=>{"Enter"===e.key&&s&&G()},disabled:!s}),(0,j.jsx)("button",{className:"btn-primary whitespace-nowrap",onClick:G,disabled:b||!x.trim()||!s,children:b?"Adding...":"Add Subtask"})]})]}))]}),(0,j.jsx)("div",{className:"modal-footer mt-6 pt-4 border-t border-gray-200 flex justify-end",children:T&&(0,j.jsxs)("button",{className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-medium",onClick:async()=>{if(confirm(`\xbfEst\xe1s seguro de que quieres eliminar "${e.title}"?${e.children&&e.children.length>0?" Esto tambin eliminar todas sus subtareas.":""}`))try{(await fetch(`/api/projects/${e.projectId}/tasks/${e.id}`,{method:"DELETE"})).ok?(t(),r()):alert("Error al eliminar la tarea")}catch(e){console.error("Error deleting task:",e),alert("Error al eliminar la tarea")}},children:[(0,j.jsx)(rC.Trash2,{size:16,className:"inline-block mr-2"}),"Eliminar Tarea"]})})]})]})}),document.body):null}let rB=(0,rh.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),rH=(0,rh.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),rq=[{value:"assignee",label:"Asignado a"},{value:"priority",label:"Prioridad"},{value:"tags",label:"Etiquetas"},{value:"dueDate",label:"Fecha de vencimiento"},{value:"column",label:"Columna"},{value:"hasAttachments",label:"Tiene archivos"},{value:"checklistStatus",label:"Estado de checklist"}],rW=[{value:"LOW",label:"Baja"},{value:"MEDIUM",label:"Media"},{value:"HIGH",label:"Alta"},{value:"URGENT",label:"Urgente"}];function rJ({projectId:e,availableUsers:t,availableColumns:r,onClose:n,onSave:i}){let[s,a]=(0,N.useState)(!1),[l,o]=(0,N.useState)(""),[c,d]=(0,N.useState)("AND"),[u,h]=(0,N.useState)([{field:"assignee",operator:"equals",value:""}]);N.default.useEffect(()=>{a(!0)},[]);let f=(e,t)=>{let r=[...u];r[e]={...r[e],...t},h(r)};return s?(0,k.createPortal)((0,j.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,j.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,j.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Crear Filtro Personalizado"}),(0,j.jsx)("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,j.jsx)(rb,{size:20,className:"text-gray-500"})})]}),(0,j.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del Filtro"}),(0,j.jsx)("input",{type:"text",className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: Tareas Urgentes Sin Asignar",value:l,onChange:e=>o(e.target.value)})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Operador Lgico"}),(0,j.jsxs)("div",{className:"flex gap-4",children:[(0,j.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,j.jsx)("input",{type:"radio",name:"operator",value:"AND",checked:"AND"===c,onChange:()=>d("AND"),className:"text-blue-600"}),(0,j.jsx)("span",{className:"text-sm",children:"AND (todas las condiciones)"})]}),(0,j.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,j.jsx)("input",{type:"radio",name:"operator",value:"OR",checked:"OR"===c,onChange:()=>d("OR"),className:"text-blue-600"}),(0,j.jsx)("span",{className:"text-sm",children:"OR (cualquier condicin)"})]})]})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Condiciones"}),(0,j.jsx)("div",{className:"space-y-3",children:u.map((e,n)=>(0,j.jsxs)("div",{className:"flex gap-2 items-start",children:[(0,j.jsx)("select",{className:"w-40 p-2 border border-gray-300 rounded-lg text-sm",value:e.field,onChange:e=>f(n,{field:e.target.value,value:""}),children:rq.map(e=>(0,j.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,j.jsxs)("select",{className:"w-32 p-2 border border-gray-300 rounded-lg text-sm",value:e.operator,onChange:e=>f(n,{operator:e.target.value}),children:[(0,j.jsx)("option",{value:"equals",children:"es igual a"}),(0,j.jsx)("option",{value:"contains",children:"contiene"}),"dueDate"===e.field&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("option",{value:"before",children:"antes de"}),(0,j.jsx)("option",{value:"after",children:"despus de"})]}),(0,j.jsx)("option",{value:"isEmpty",children:"est vaco"}),(0,j.jsx)("option",{value:"isNotEmpty",children:"no est vaco"})]}),"isEmpty"!==e.operator&&"isNotEmpty"!==e.operator&&((e,n)=>{switch(e.field){case"assignee":return(0,j.jsxs)("select",{className:"flex-1 p-2 border border-gray-300 rounded-lg text-sm",value:e.value,onChange:e=>f(n,{value:e.target.value}),children:[(0,j.jsx)("option",{value:"",children:"Seleccionar usuario..."}),t.map(e=>(0,j.jsx)("option",{value:e.id,children:e.name||e.email},e.id))]});case"priority":return(0,j.jsxs)("select",{className:"flex-1 p-2 border border-gray-300 rounded-lg text-sm",value:e.value,onChange:e=>f(n,{value:e.target.value}),children:[(0,j.jsx)("option",{value:"",children:"Seleccionar prioridad..."}),rW.map(e=>(0,j.jsx)("option",{value:e.value,children:e.label},e.value))]});case"column":return(0,j.jsxs)("select",{className:"flex-1 p-2 border border-gray-300 rounded-lg text-sm",value:e.value,onChange:e=>f(n,{value:e.target.value}),children:[(0,j.jsx)("option",{value:"",children:"Seleccionar columna..."}),r.map(e=>(0,j.jsx)("option",{value:e.id,children:e.name},e.id))]});case"tags":return(0,j.jsx)("input",{type:"text",className:"flex-1 p-2 border border-gray-300 rounded-lg text-sm",placeholder:"Nombre de etiqueta...",value:e.value,onChange:e=>f(n,{value:e.target.value})});case"dueDate":return(0,j.jsx)("input",{type:"date",className:"flex-1 p-2 border border-gray-300 rounded-lg text-sm",value:e.value,onChange:e=>f(n,{value:e.target.value})});case"hasAttachments":case"checklistStatus":return(0,j.jsxs)("select",{className:"flex-1 p-2 border border-gray-300 rounded-lg text-sm",value:e.value,onChange:e=>f(n,{value:"true"===e.target.value}),children:[(0,j.jsx)("option",{value:"true",children:"S"}),(0,j.jsx)("option",{value:"false",children:"No"})]});default:return null}})(e,n),u.length>1&&(0,j.jsx)("button",{onClick:()=>{h(u.filter((e,t)=>t!==n))},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:(0,j.jsx)(rC.Trash2,{size:18})})]},n))}),(0,j.jsxs)("button",{onClick:()=>{h([...u,{field:"assignee",operator:"equals",value:""}])},className:"mt-3 flex items-center gap-2 px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[(0,j.jsx)(ry,{size:16}),"Agregar Condicin"]})]})]}),(0,j.jsxs)("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50",children:[(0,j.jsx)("button",{onClick:n,className:"px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancelar"}),(0,j.jsx)("button",{onClick:()=>{l.trim()?0===u.length?alert("Agrega al menos una condicin"):(i(l,{conditions:u,operator:c}),n()):alert("Por favor ingresa un nombre para el filtro")},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Guardar Filtro"})]})]})}),document.body):null}let rK=[{id:"all",label:"Todas las Tareas",description:"Mostrar todas las tareas"},{id:"my-tasks",label:"Mis Tareas",description:"Tareas asignadas a m"},{id:"unassigned",label:"Sin Asignar",description:"Tareas sin usuario asignado"},{id:"overdue",label:"Vencidas",description:"Tareas con fecha vencida"},{id:"this-week",label:"Esta Semana",description:"Vencen en los prximos 7 das"}];function rY({projectId:e,currentUserId:t,activeFilter:r,onFilterChange:n,availableUsers:i=[],availableColumns:s=[]}){let[a,l]=(0,N.useState)(!1),[o,c]=(0,N.useState)(!1),[d,u]=(0,N.useState)([]);(0,N.useEffect)(()=>{fetch(`/api/projects/${e}/filters`).then(e=>e.json()).then(e=>u(e)).catch(e=>console.error("Error loading filters:",e))},[e]);let h=async(t,r)=>{try{let i=await fetch(`/api/projects/${e}/filters`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,criteria:r})});if(i.ok){let e=await i.json();u([...d,e]),n(e.id,r)}}catch(e){console.error("Error saving filter:",e)}},f=async t=>{if(confirm("Eliminar este filtro?"))try{(await fetch(`/api/projects/${e}/filters/${t}`,{method:"DELETE"})).ok&&(u(d.filter(e=>e.id!==t)),r===t&&n("all"))}catch(e){console.error("Error deleting filter:",e)}},p=[...rK,...d.map(e=>({id:e.id,label:e.name,description:"Filtro personalizado",isCustom:!0}))],m=p.find(e=>e.id===r)?.label||"Filtros";return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"relative",children:[(0,j.jsxs)("button",{onClick:()=>l(!a),className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,j.jsx)(rB,{size:16,className:"text-gray-600"}),(0,j.jsx)("span",{className:"text-sm font-medium text-gray-700",children:m}),(0,j.jsx)(rH,{size:16,className:`text-gray-600 transition-transform ${a?"rotate-180":""}`})]}),"all"!==r&&(0,j.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full border-2 border-white"}),a&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>l(!1)}),(0,j.jsxs)("div",{className:"absolute top-full left-0 mt-2 w-72 bg-white border border-gray-200 rounded-lg shadow-lg z-20",children:[(0,j.jsxs)("div",{className:"p-2",children:[(0,j.jsx)("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider px-3 py-2",children:"Filtros Predefinidos"}),rK.map(e=>(0,j.jsxs)("button",{onClick:()=>{n(e.id),l(!1)},className:`
                      w-full text-left px-3 py-2 rounded-md transition-colors
                      ${r===e.id?"bg-blue-50 text-blue-700":"hover:bg-gray-50 text-gray-700"}
                    `,children:[(0,j.jsx)("div",{className:"font-medium text-sm",children:e.label}),(0,j.jsx)("div",{className:"text-xs text-gray-500 mt-0.5",children:e.description})]},e.id))]}),d.length>0&&(0,j.jsxs)("div",{className:"border-t border-gray-200 p-2",children:[(0,j.jsx)("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider px-3 py-2",children:"Filtros Personalizados"}),d.map(e=>(0,j.jsxs)("div",{className:`
                        flex items-center justify-between px-3 py-2 rounded-md transition-colors
                        ${r===e.id?"bg-blue-50":"hover:bg-gray-50"}
                      `,children:[(0,j.jsx)("button",{onClick:()=>{n(e.id,JSON.parse(e.criteria)),l(!1)},className:"flex-1 text-left",children:(0,j.jsx)("div",{className:"font-medium text-sm text-gray-700",children:e.name})}),(0,j.jsx)("button",{onClick:t=>{t.stopPropagation(),f(e.id)},className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:(0,j.jsx)(rC.Trash2,{size:14})})]},e.id))]}),(0,j.jsx)("div",{className:"border-t border-gray-200 p-2",children:(0,j.jsxs)("button",{onClick:()=>{l(!1),c(!0)},className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded-md transition-colors font-medium",children:[(0,j.jsx)(ry,{size:16}),"Crear Filtro Personalizado"]})}),"all"!==r&&(0,j.jsx)("div",{className:"border-t border-gray-200 p-2",children:(0,j.jsxs)("button",{onClick:()=>{n("all"),l(!1)},className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-gray-600 hover:bg-gray-50 rounded-md transition-colors",children:[(0,j.jsx)(rb,{size:14}),"Limpiar Filtro"]})})]})]})]}),o&&(0,j.jsx)(rJ,{projectId:e,availableUsers:i,availableColumns:s,onClose:()=>c(!1),onSave:h})]})}var rZ=e.i(93479);function rX(e,[t,r]){return Math.min(r,Math.max(t,e))}var rG=e.i(81140),rQ=e.i(75830),r0=e.i(20783),r1=e.i(30030),r2=e.i(86318),r5=e.i(26330),r3=e.i(3536),r4=e.i(65491),r7=e.i(10772),r6=e.i(53660),r9=e.i(74606);function r8(e){var t;let r,n=(t=e,(r=N.forwardRef((e,t)=>{let{children:r,...n}=e;if(N.isValidElement(r)){var i;let e,s,a=(i=r,(s=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(s=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),l=function(e,t){let r={...t};for(let n in t){let i=e[n],s=t[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...e)=>{let t=s(...e);return i(...e),t}:i&&(r[n]=i):"style"===n?r[n]={...i,...s}:"className"===n&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==N.Fragment&&(l.ref=t?(0,r0.composeRefs)(t,a):a),N.cloneElement(r,l)}return N.Children.count(r)>1?N.Children.only(null):null})).displayName=`${t}.SlotClone`,r),i=N.forwardRef((e,t)=>{let{children:r,...i}=e,s=N.Children.toArray(r),a=s.find(nt);if(a){let e=a.props.children,r=s.map(t=>t!==a?t:N.Children.count(e)>1?N.Children.only(null):N.isValidElement(e)?e.props.children:null);return(0,j.jsx)(n,{...i,ref:t,children:N.isValidElement(e)?N.cloneElement(e,void 0,r):null})}return(0,j.jsx)(n,{...i,ref:t,children:r})});return i.displayName=`${e}.Slot`,i}var ne=Symbol("radix.slottable");function nt(e){return N.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===ne}var nr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=r8(`Primitive.${t}`),n=N.forwardRef((e,n)=>{let{asChild:i,...s}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,j.jsx)(i?r:t,{...s,ref:n})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),nn=e.i(30207),ni=e.i(69340),ns=e.i(34620),na=Symbol("radix.slottable");function nl(e){return N.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===na}var no=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{var r,n;let i,s,a,l=(n=r=`Primitive.${t}`,(i=N.forwardRef((e,t)=>{let{children:r,...n}=e;if(N.isValidElement(r)){var i;let e,s,a=(i=r,(s=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(s=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),l=function(e,t){let r={...t};for(let n in t){let i=e[n],s=t[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...e)=>{let t=s(...e);return i(...e),t}:i&&(r[n]=i):"style"===n?r[n]={...i,...s}:"className"===n&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==N.Fragment&&(l.ref=t?(0,r0.composeRefs)(t,a):a),N.cloneElement(r,l)}return N.Children.count(r)>1?N.Children.only(null):null})).displayName=`${n}.SlotClone`,s=i,(a=N.forwardRef((e,t)=>{let{children:r,...n}=e,i=N.Children.toArray(r),a=i.find(nl);if(a){let e=a.props.children,r=i.map(t=>t!==a?t:N.Children.count(e)>1?N.Children.only(null):N.isValidElement(e)?e.props.children:null);return(0,j.jsx)(s,{...n,ref:t,children:N.isValidElement(e)?N.cloneElement(e,void 0,r):null})}return(0,j.jsx)(s,{...n,ref:t,children:r})})).displayName=`${r}.Slot`,a),o=N.forwardRef((e,r)=>{let{asChild:n,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,j.jsx)(n?l:t,{...i,ref:r})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),nc=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"});N.forwardRef((e,t)=>(0,j.jsx)(no.span,{...e,ref:t,style:{...nc,...e.style}})).displayName="VisuallyHidden";var nd=e.i(86312),nu=e.i(85369),nh=[" ","Enter","ArrowUp","ArrowDown"],nf=[" ","Enter"],np="Select",[nm,ng,nv]=(0,rQ.createCollection)(np),[nx,ny]=(0,r1.createContextScope)(np,[nv,r6.createPopperScope]),nb=(0,r6.createPopperScope)(),[nw,nj]=nx(np),[nN,nE]=nx(np),nk=e=>{let{__scopeSelect:t,children:r,open:n,defaultOpen:i,onOpenChange:s,value:a,defaultValue:l,onValueChange:o,dir:c,name:d,autoComplete:u,disabled:h,required:f,form:p}=e,m=nb(t),[g,v]=N.useState(null),[x,y]=N.useState(null),[b,w]=N.useState(!1),E=(0,r2.useDirection)(c),[k,C]=(0,ni.useControllableState)({prop:n,defaultProp:i??!1,onChange:s,caller:np}),[S,D]=(0,ni.useControllableState)({prop:a,defaultProp:l,onChange:o,caller:np}),T=N.useRef(null),R=!g||p||!!g.closest("form"),[I,A]=N.useState(new Set),M=Array.from(I).map(e=>e.props.value).join(";");return(0,j.jsx)(r6.Root,{...m,children:(0,j.jsxs)(nw,{required:f,scope:t,trigger:g,onTriggerChange:v,valueNode:x,onValueNodeChange:y,valueNodeHasChildren:b,onValueNodeHasChildrenChange:w,contentId:(0,r7.useId)(),value:S,onValueChange:D,open:k,onOpenChange:C,dir:E,triggerPointerDownPosRef:T,disabled:h,children:[(0,j.jsx)(nm.Provider,{scope:t,children:(0,j.jsx)(nN,{scope:e.__scopeSelect,onNativeOptionAdd:N.useCallback(e=>{A(t=>new Set(t).add(e))},[]),onNativeOptionRemove:N.useCallback(e=>{A(t=>{let r=new Set(t);return r.delete(e),r})},[]),children:r})}),R?(0,j.jsxs)(ie,{"aria-hidden":!0,required:f,tabIndex:-1,name:d,autoComplete:u,value:S,onChange:e=>D(e.target.value),disabled:h,form:p,children:[void 0===S?(0,j.jsx)("option",{value:""}):null,Array.from(I)]},M):null]})})};nk.displayName=np;var nC="SelectTrigger",nS=N.forwardRef((e,t)=>{let{__scopeSelect:r,disabled:n=!1,...i}=e,s=nb(r),a=nj(nC,r),l=a.disabled||n,o=(0,r0.useComposedRefs)(t,a.onTriggerChange),c=ng(r),d=N.useRef("touch"),[u,h,f]=ir(e=>{let t=c().filter(e=>!e.disabled),r=t.find(e=>e.value===a.value),n=ii(t,e,r);void 0!==n&&a.onValueChange(n.value)}),p=e=>{l||(a.onOpenChange(!0),f()),e&&(a.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,j.jsx)(r6.Anchor,{asChild:!0,...s,children:(0,j.jsx)(nr.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":it(a.value)?"":void 0,...i,ref:o,onClick:(0,rG.composeEventHandlers)(i.onClick,e=>{e.currentTarget.focus(),"mouse"!==d.current&&p(e)}),onPointerDown:(0,rG.composeEventHandlers)(i.onPointerDown,e=>{d.current=e.pointerType;let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(p(e),e.preventDefault())}),onKeyDown:(0,rG.composeEventHandlers)(i.onKeyDown,e=>{let t=""!==u.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||h(e.key),(!t||" "!==e.key)&&nh.includes(e.key)&&(p(),e.preventDefault())})})})});nS.displayName=nC;var nD="SelectValue",nT=N.forwardRef((e,t)=>{let{__scopeSelect:r,className:n,style:i,children:s,placeholder:a="",...l}=e,o=nj(nD,r),{onValueNodeHasChildrenChange:c}=o,d=void 0!==s,u=(0,r0.useComposedRefs)(t,o.onValueNodeChange);return(0,ns.useLayoutEffect)(()=>{c(d)},[c,d]),(0,j.jsx)(nr.span,{...l,ref:u,style:{pointerEvents:"none"},children:it(o.value)?(0,j.jsx)(j.Fragment,{children:a}):s})});nT.displayName=nD;var nR=N.forwardRef((e,t)=>{let{__scopeSelect:r,children:n,...i}=e;return(0,j.jsx)(nr.span,{"aria-hidden":!0,...i,ref:t,children:n||""})});nR.displayName="SelectIcon";var nI=e=>(0,j.jsx)(r9.Portal,{asChild:!0,...e});nI.displayName="SelectPortal";var nA="SelectContent",nM=N.forwardRef((e,t)=>{let r=nj(nA,e.__scopeSelect),[n,i]=N.useState();return((0,ns.useLayoutEffect)(()=>{i(new DocumentFragment)},[]),r.open)?(0,j.jsx)(nL,{...e,ref:t}):n?k.createPortal((0,j.jsx)(nO,{scope:e.__scopeSelect,children:(0,j.jsx)(nm.Slot,{scope:e.__scopeSelect,children:(0,j.jsx)("div",{children:e.children})})}),n):null});nM.displayName=nA;var[nO,nP]=nx(nA),nF=r8("SelectContent.RemoveScroll"),nL=N.forwardRef((e,t)=>{let{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:a,side:l,sideOffset:o,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:m,avoidCollisions:g,...v}=e,x=nj(nA,r),[y,b]=N.useState(null),[w,E]=N.useState(null),k=(0,r0.useComposedRefs)(t,e=>b(e)),[C,S]=N.useState(null),[D,T]=N.useState(null),R=ng(r),[I,A]=N.useState(!1),M=N.useRef(!1);N.useEffect(()=>{if(y)return(0,nd.hideOthers)(y)},[y]),(0,r3.useFocusGuards)();let O=N.useCallback(e=>{let[t,...r]=R().map(e=>e.ref.current),[n]=r.slice(-1),i=document.activeElement;for(let r of e)if(r===i||(r?.scrollIntoView({block:"nearest"}),r===t&&w&&(w.scrollTop=0),r===n&&w&&(w.scrollTop=w.scrollHeight),r?.focus(),document.activeElement!==i))return},[R,w]),P=N.useCallback(()=>O([C,y]),[O,C,y]);N.useEffect(()=>{I&&P()},[I,P]);let{onOpenChange:F,triggerPointerDownPosRef:L}=x;N.useEffect(()=>{if(y){let e={x:0,y:0},t=t=>{e={x:Math.abs(Math.round(t.pageX)-(L.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(L.current?.y??0))}},r=r=>{e.x<=10&&e.y<=10?r.preventDefault():y.contains(r.target)||F(!1),document.removeEventListener("pointermove",t),L.current=null};return null!==L.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",r,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",r,{capture:!0})}}},[y,F,L]),N.useEffect(()=>{let e=()=>F(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[F]);let[U,_]=ir(e=>{let t=R().filter(e=>!e.disabled),r=t.find(e=>e.ref.current===document.activeElement),n=ii(t,e,r);n&&setTimeout(()=>n.ref.current.focus())}),$=N.useCallback((e,t,r)=>{let n=!M.current&&!r;(void 0!==x.value&&x.value===t||n)&&(S(e),n&&(M.current=!0))},[x.value]),V=N.useCallback(()=>y?.focus(),[y]),z=N.useCallback((e,t,r)=>{let n=!M.current&&!r;(void 0!==x.value&&x.value===t||n)&&T(e)},[x.value]),B="popper"===n?n_:nU,H=B===n_?{side:l,sideOffset:o,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:m,avoidCollisions:g}:{};return(0,j.jsx)(nO,{scope:r,content:y,viewport:w,onViewportChange:E,itemRefCallback:$,selectedItem:C,onItemLeave:V,itemTextRefCallback:z,focusSelectedItem:P,selectedItemText:D,position:n,isPositioned:I,searchRef:U,children:(0,j.jsx)(nu.RemoveScroll,{as:nF,allowPinchZoom:!0,children:(0,j.jsx)(r4.FocusScope,{asChild:!0,trapped:x.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:(0,rG.composeEventHandlers)(i,e=>{x.trigger?.focus({preventScroll:!0}),e.preventDefault()}),children:(0,j.jsx)(r5.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:(0,j.jsx)(B,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:e=>e.preventDefault(),...v,...H,onPlaced:()=>A(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:(0,rG.composeEventHandlers)(v.onKeyDown,e=>{let t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||_(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=R().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){let r=e.target,n=t.indexOf(r);t=t.slice(n+1)}setTimeout(()=>O(t)),e.preventDefault()}})})})})})})});nL.displayName="SelectContentImpl";var nU=N.forwardRef((e,t)=>{let{__scopeSelect:r,onPlaced:n,...i}=e,s=nj(nA,r),a=nP(nA,r),[l,o]=N.useState(null),[c,d]=N.useState(null),u=(0,r0.useComposedRefs)(t,e=>d(e)),h=ng(r),f=N.useRef(!1),p=N.useRef(!0),{viewport:m,selectedItem:g,selectedItemText:v,focusSelectedItem:x}=a,y=N.useCallback(()=>{if(s.trigger&&s.valueNode&&l&&c&&m&&g&&v){let e=s.trigger.getBoundingClientRect(),t=c.getBoundingClientRect(),r=s.valueNode.getBoundingClientRect(),i=v.getBoundingClientRect();if("rtl"!==s.dir){let n=i.left-t.left,s=r.left-n,a=e.left-s,o=e.width+a,c=Math.max(o,t.width),d=rX(s,[10,Math.max(10,window.innerWidth-10-c)]);l.style.minWidth=o+"px",l.style.left=d+"px"}else{let n=t.right-i.right,s=window.innerWidth-r.right-n,a=window.innerWidth-e.right-s,o=e.width+a,c=Math.max(o,t.width),d=rX(s,[10,Math.max(10,window.innerWidth-10-c)]);l.style.minWidth=o+"px",l.style.right=d+"px"}let a=h(),o=window.innerHeight-20,d=m.scrollHeight,u=window.getComputedStyle(c),p=parseInt(u.borderTopWidth,10),x=parseInt(u.paddingTop,10),y=parseInt(u.borderBottomWidth,10),b=p+x+d+parseInt(u.paddingBottom,10)+y,w=Math.min(5*g.offsetHeight,b),j=window.getComputedStyle(m),N=parseInt(j.paddingTop,10),E=parseInt(j.paddingBottom,10),k=e.top+e.height/2-10,C=g.offsetHeight/2,S=p+x+(g.offsetTop+C);if(S<=k){let e=a.length>0&&g===a[a.length-1].ref.current;l.style.bottom="0px";let t=Math.max(o-k,C+(e?E:0)+(c.clientHeight-m.offsetTop-m.offsetHeight)+y);l.style.height=S+t+"px"}else{let e=a.length>0&&g===a[0].ref.current;l.style.top="0px";let t=Math.max(k,p+m.offsetTop+(e?N:0)+C);l.style.height=t+(b-S)+"px",m.scrollTop=S-k+m.offsetTop}l.style.margin="10px 0",l.style.minHeight=w+"px",l.style.maxHeight=o+"px",n?.(),requestAnimationFrame(()=>f.current=!0)}},[h,s.trigger,s.valueNode,l,c,m,g,v,s.dir,n]);(0,ns.useLayoutEffect)(()=>y(),[y]);let[b,w]=N.useState();(0,ns.useLayoutEffect)(()=>{c&&w(window.getComputedStyle(c).zIndex)},[c]);let E=N.useCallback(e=>{e&&!0===p.current&&(y(),x?.(),p.current=!1)},[y,x]);return(0,j.jsx)(n$,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:f,onScrollButtonChange:E,children:(0,j.jsx)("div",{ref:o,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:(0,j.jsx)(nr.div,{...i,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});nU.displayName="SelectItemAlignedPosition";var n_=N.forwardRef((e,t)=>{let{__scopeSelect:r,align:n="start",collisionPadding:i=10,...s}=e,a=nb(r);return(0,j.jsx)(r6.Content,{...a,...s,ref:t,align:n,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});n_.displayName="SelectPopperPosition";var[n$,nV]=nx(nA,{}),nz="SelectViewport",nB=N.forwardRef((e,t)=>{let{__scopeSelect:r,nonce:n,...i}=e,s=nP(nz,r),a=nV(nz,r),l=(0,r0.useComposedRefs)(t,s.onViewportChange),o=N.useRef(0);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),(0,j.jsx)(nm.Slot,{scope:r,children:(0,j.jsx)(nr.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:(0,rG.composeEventHandlers)(i.onScroll,e=>{let t=e.currentTarget,{contentWrapper:r,shouldExpandOnScrollRef:n}=a;if(n?.current&&r){let e=Math.abs(o.current-t.scrollTop);if(e>0){let n=window.innerHeight-20,i=Math.max(parseFloat(r.style.minHeight),parseFloat(r.style.height));if(i<n){let s=i+e,a=Math.min(n,s),l=s-a;r.style.height=a+"px","0px"===r.style.bottom&&(t.scrollTop=l>0?l:0,r.style.justifyContent="flex-end")}}}o.current=t.scrollTop})})})]})});nB.displayName=nz;var nH="SelectGroup",[nq,nW]=nx(nH);N.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,i=(0,r7.useId)();return(0,j.jsx)(nq,{scope:r,id:i,children:(0,j.jsx)(nr.div,{role:"group","aria-labelledby":i,...n,ref:t})})}).displayName=nH;var nJ="SelectLabel",nK=N.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,i=nW(nJ,r);return(0,j.jsx)(nr.div,{id:i.id,...n,ref:t})});nK.displayName=nJ;var nY="SelectItem",[nZ,nX]=nx(nY),nG=N.forwardRef((e,t)=>{let{__scopeSelect:r,value:n,disabled:i=!1,textValue:s,...a}=e,l=nj(nY,r),o=nP(nY,r),c=l.value===n,[d,u]=N.useState(s??""),[h,f]=N.useState(!1),p=(0,r0.useComposedRefs)(t,e=>o.itemRefCallback?.(e,n,i)),m=(0,r7.useId)(),g=N.useRef("touch"),v=()=>{i||(l.onValueChange(n),l.onOpenChange(!1))};if(""===n)throw Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,j.jsx)(nZ,{scope:r,value:n,disabled:i,textId:m,isSelected:c,onItemTextChange:N.useCallback(e=>{u(t=>t||(e?.textContent??"").trim())},[]),children:(0,j.jsx)(nm.ItemSlot,{scope:r,value:n,disabled:i,textValue:d,children:(0,j.jsx)(nr.div,{role:"option","aria-labelledby":m,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:p,onFocus:(0,rG.composeEventHandlers)(a.onFocus,()=>f(!0)),onBlur:(0,rG.composeEventHandlers)(a.onBlur,()=>f(!1)),onClick:(0,rG.composeEventHandlers)(a.onClick,()=>{"mouse"!==g.current&&v()}),onPointerUp:(0,rG.composeEventHandlers)(a.onPointerUp,()=>{"mouse"===g.current&&v()}),onPointerDown:(0,rG.composeEventHandlers)(a.onPointerDown,e=>{g.current=e.pointerType}),onPointerMove:(0,rG.composeEventHandlers)(a.onPointerMove,e=>{g.current=e.pointerType,i?o.onItemLeave?.():"mouse"===g.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:(0,rG.composeEventHandlers)(a.onPointerLeave,e=>{e.currentTarget===document.activeElement&&o.onItemLeave?.()}),onKeyDown:(0,rG.composeEventHandlers)(a.onKeyDown,e=>{(o.searchRef?.current===""||" "!==e.key)&&(nf.includes(e.key)&&v()," "===e.key&&e.preventDefault())})})})})});nG.displayName=nY;var nQ="SelectItemText",n0=N.forwardRef((e,t)=>{let{__scopeSelect:r,className:n,style:i,...s}=e,a=nj(nQ,r),l=nP(nQ,r),o=nX(nQ,r),c=nE(nQ,r),[d,u]=N.useState(null),h=(0,r0.useComposedRefs)(t,e=>u(e),o.onItemTextChange,e=>l.itemTextRefCallback?.(e,o.value,o.disabled)),f=d?.textContent,p=N.useMemo(()=>(0,j.jsx)("option",{value:o.value,disabled:o.disabled,children:f},o.value),[o.disabled,o.value,f]),{onNativeOptionAdd:m,onNativeOptionRemove:g}=c;return(0,ns.useLayoutEffect)(()=>(m(p),()=>g(p)),[m,g,p]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(nr.span,{id:o.textId,...s,ref:h}),o.isSelected&&a.valueNode&&!a.valueNodeHasChildren?k.createPortal(s.children,a.valueNode):null]})});n0.displayName=nQ;var n1="SelectItemIndicator",n2=N.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e;return nX(n1,r).isSelected?(0,j.jsx)(nr.span,{"aria-hidden":!0,...n,ref:t}):null});n2.displayName=n1;var n5="SelectScrollUpButton",n3=N.forwardRef((e,t)=>{let r=nP(n5,e.__scopeSelect),n=nV(n5,e.__scopeSelect),[i,s]=N.useState(!1),a=(0,r0.useComposedRefs)(t,n.onScrollButtonChange);return(0,ns.useLayoutEffect)(()=>{if(r.viewport&&r.isPositioned){let e=function(){s(t.scrollTop>0)},t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),i?(0,j.jsx)(n6,{...e,ref:a,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});n3.displayName=n5;var n4="SelectScrollDownButton",n7=N.forwardRef((e,t)=>{let r=nP(n4,e.__scopeSelect),n=nV(n4,e.__scopeSelect),[i,s]=N.useState(!1),a=(0,r0.useComposedRefs)(t,n.onScrollButtonChange);return(0,ns.useLayoutEffect)(()=>{if(r.viewport&&r.isPositioned){let e=function(){let e=t.scrollHeight-t.clientHeight;s(Math.ceil(t.scrollTop)<e)},t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),i?(0,j.jsx)(n6,{...e,ref:a,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});n7.displayName=n4;var n6=N.forwardRef((e,t)=>{let{__scopeSelect:r,onAutoScroll:n,...i}=e,s=nP("SelectScrollButton",r),a=N.useRef(null),l=ng(r),o=N.useCallback(()=>{null!==a.current&&(window.clearInterval(a.current),a.current=null)},[]);return N.useEffect(()=>()=>o(),[o]),(0,ns.useLayoutEffect)(()=>{let e=l().find(e=>e.ref.current===document.activeElement);e?.ref.current?.scrollIntoView({block:"nearest"})},[l]),(0,j.jsx)(nr.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:(0,rG.composeEventHandlers)(i.onPointerDown,()=>{null===a.current&&(a.current=window.setInterval(n,50))}),onPointerMove:(0,rG.composeEventHandlers)(i.onPointerMove,()=>{s.onItemLeave?.(),null===a.current&&(a.current=window.setInterval(n,50))}),onPointerLeave:(0,rG.composeEventHandlers)(i.onPointerLeave,()=>{o()})})}),n9=N.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e;return(0,j.jsx)(nr.div,{"aria-hidden":!0,...n,ref:t})});n9.displayName="SelectSeparator";var n8="SelectArrow";N.forwardRef((e,t)=>{let{__scopeSelect:r,...n}=e,i=nb(r),s=nj(n8,r),a=nP(n8,r);return s.open&&"popper"===a.position?(0,j.jsx)(r6.Arrow,{...i,...n,ref:t}):null}).displayName=n8;var ie=N.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{let i,s=N.useRef(null),a=(0,r0.useComposedRefs)(n,s),l=(i=N.useRef({value:t,previous:t}),N.useMemo(()=>(i.current.value!==t&&(i.current.previous=i.current.value,i.current.value=t),i.current.previous),[t]));return N.useEffect(()=>{let e=s.current;if(!e)return;let r=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(l!==t&&r){let n=new Event("change",{bubbles:!0});r.call(e,t),e.dispatchEvent(n)}},[l,t]),(0,j.jsx)(nr.select,{...r,style:{...nc,...r.style},ref:a,defaultValue:t})});function it(e){return""===e||void 0===e}function ir(e){let t=(0,nn.useCallbackRef)(e),r=N.useRef(""),n=N.useRef(0),i=N.useCallback(e=>{let i=r.current+e;t(i),function e(t){r.current=t,window.clearTimeout(n.current),""!==t&&(n.current=window.setTimeout(()=>e(""),1e3))}(i)},[t]),s=N.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,s]}function ii(e,t,r){var n,i;let s=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,a=r?e.indexOf(r):-1,l=(n=e,i=Math.max(a,0),n.map((e,t)=>n[(i+t)%n.length]));1===s.length&&(l=l.filter(e=>e!==r));let o=l.find(e=>e.textValue.toLowerCase().startsWith(s.toLowerCase()));return o!==r?o:void 0}ie.displayName="SelectBubbleInput";var is=e.i(43531);let ia=(0,rh.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var il=e.i(75157);let io=N.forwardRef(({className:e,children:t,...r},n)=>(0,j.jsxs)(nS,{ref:n,className:(0,il.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,(0,j.jsx)(nR,{asChild:!0,children:(0,j.jsx)(rH,{className:"h-4 w-4 opacity-50"})})]}));io.displayName=nS.displayName;let ic=N.forwardRef(({className:e,...t},r)=>(0,j.jsx)(n3,{ref:r,className:(0,il.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,j.jsx)(ia,{className:"h-4 w-4"})}));ic.displayName=n3.displayName;let id=N.forwardRef(({className:e,...t},r)=>(0,j.jsx)(n7,{ref:r,className:(0,il.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,j.jsx)(rH,{className:"h-4 w-4"})}));id.displayName=n7.displayName;let iu=N.forwardRef(({className:e,children:t,position:r="popper",...n},i)=>(0,j.jsx)(nI,{children:(0,j.jsxs)(nM,{ref:i,className:(0,il.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[(0,j.jsx)(ic,{}),(0,j.jsx)(nB,{className:(0,il.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,j.jsx)(id,{})]})}));iu.displayName=nM.displayName,N.forwardRef(({className:e,...t},r)=>(0,j.jsx)(nK,{ref:r,className:(0,il.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=nK.displayName;let ih=N.forwardRef(({className:e,children:t,...r},n)=>(0,j.jsxs)(nG,{ref:n,className:(0,il.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[(0,j.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,j.jsx)(n2,{children:(0,j.jsx)(is.Check,{className:"h-4 w-4"})})}),(0,j.jsx)(n0,{children:t})]}));ih.displayName=nG.displayName,N.forwardRef(({className:e,...t},r)=>(0,j.jsx)(n9,{ref:r,className:(0,il.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=n9.displayName;let ip=N.forwardRef(({className:e,...t},r)=>(0,j.jsx)("div",{className:"relative w-full overflow-auto",children:(0,j.jsx)("table",{ref:r,className:(0,il.cn)("w-full caption-bottom text-sm",e),...t})}));ip.displayName="Table";let im=N.forwardRef(({className:e,...t},r)=>(0,j.jsx)("thead",{ref:r,className:(0,il.cn)("[&_tr]:border-b",e),...t}));im.displayName="TableHeader";let ig=N.forwardRef(({className:e,...t},r)=>(0,j.jsx)("tbody",{ref:r,className:(0,il.cn)("[&_tr:last-child]:border-0",e),...t}));ig.displayName="TableBody",N.forwardRef(({className:e,...t},r)=>(0,j.jsx)("tfoot",{ref:r,className:(0,il.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let iv=N.forwardRef(({className:e,...t},r)=>(0,j.jsx)("tr",{ref:r,className:(0,il.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));iv.displayName="TableRow";let ix=N.forwardRef(({className:e,...t},r)=>(0,j.jsx)("th",{ref:r,className:(0,il.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));ix.displayName="TableHead";let iy=N.forwardRef(({className:e,...t},r)=>(0,j.jsx)("td",{ref:r,className:(0,il.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));iy.displayName="TableCell",N.forwardRef(({className:e,...t},r)=>(0,j.jsx)("caption",{ref:r,className:(0,il.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption";let ib=(0,rh.default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),iw=(0,rh.default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);function ij({projectId:e}){let{data:t}=(0,ru.useSession)(),{can:r}=rV(e),[n,i]=(0,N.useState)([]),[s,a]=(0,N.useState)(!0),[l,o]=(0,N.useState)(""),[c,d]=(0,N.useState)(rM),[u,h]=(0,N.useState)(!1),[f,p]=(0,N.useState)([]);(0,N.useEffect)(()=>{m(),g()},[e]);let m=async()=>{try{let t=await fetch(`/api/projects/${e}/users`);if(t.ok){let e=await t.json();i(e)}}catch(e){console.error("Error fetching users:",e)}finally{a(!1)}},g=async()=>{try{let t=await fetch(`/api/projects/${e}/invitations`);if(t.ok){let e=await t.json();p(e)}}catch(e){console.error("Error fetching invitations:",e)}},v=async t=>{if(t.preventDefault(),l){h(!0);try{let t=await fetch(`/api/projects/${e}/invitations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l,role:c})});if(t.ok)o(""),alert("Invitation created successfully!"),g();else{let e=await t.json();alert(e.message||"Failed to invite user")}}catch(e){console.error("Error inviting user:",e)}finally{h(!1)}}},x=async(t,r)=>{try{(await fetch(`/api/projects/${e}/users/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:r})})).ok?m():alert("Failed to update role")}catch(e){console.error("Error updating role:",e)}},y=async t=>{if(confirm("Are you sure you want to remove this user from the project?"))try{let r=await fetch(`/api/projects/${e}/users/${t}`,{method:"DELETE"});if(r.ok)m();else{let e=await r.json();alert(e.message||"Failed to remove user")}}catch(e){console.error("Error removing user:",e)}};return r(rP)?s?(0,j.jsx)("div",{children:"Loading users..."}):(0,j.jsxs)("div",{className:"space-y-8",children:[(0,j.jsx)("div",{className:"flex justify-between items-center",children:(0,j.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2",children:[(0,j.jsx)(iw,{className:"w-5 h-5"})," Project Access & Roles"]})}),(0,j.jsxs)("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[(0,j.jsx)("h3",{className:"text-sm font-medium mb-3 text-slate-700",children:"Invite User to Project"}),(0,j.jsxs)("form",{onSubmit:v,className:"grid grid-cols-12 gap-4 items-center",children:[(0,j.jsxs)("div",{className:"col-span-6 space-y-1.5",children:[(0,j.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Email Address"}),(0,j.jsx)(rZ.Input,{type:"email",placeholder:"user@example.com",value:l,onChange:e=>o(e.target.value),required:!0,className:"bg-white h-10"})]}),(0,j.jsxs)("div",{className:"col-span-4 space-y-1.5",children:[(0,j.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Role"}),(0,j.jsxs)(nk,{value:c,onValueChange:d,children:[(0,j.jsx)(io,{className:"bg-white h-10",children:(0,j.jsx)(nT,{})}),(0,j.jsxs)(iu,{children:[(0,j.jsx)(ih,{value:rA,children:"Project Manager"}),(0,j.jsx)(ih,{value:rM,children:"Artist"}),(0,j.jsx)(ih,{value:rO,children:"Viewer"})]})]})]}),(0,j.jsx)("div",{className:"col-span-2 pt-6",children:(0,j.jsx)(rN.Button,{type:"submit",disabled:u,className:"w-full h-10",children:u?"Inviting...":(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ib,{className:"w-4 h-4 mr-2"})," Invite"]})})})]})]}),f.length>0&&(0,j.jsxs)("div",{children:[(0,j.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Pending Invitations"}),(0,j.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,j.jsxs)(ip,{children:[(0,j.jsx)(im,{children:(0,j.jsxs)(iv,{children:[(0,j.jsx)(ix,{children:"Email"}),(0,j.jsx)(ix,{children:"Role"}),(0,j.jsx)(ix,{children:"Sent At"}),(0,j.jsx)(ix,{children:"Expires"}),(0,j.jsx)(ix,{className:"text-right",children:"Link"})]})}),(0,j.jsx)(ig,{children:f.map(e=>(0,j.jsxs)(iv,{children:[(0,j.jsx)(iy,{children:e.email}),(0,j.jsx)(iy,{children:e.role}),(0,j.jsx)(iy,{children:new Date(e.createdAt).toLocaleDateString()}),(0,j.jsx)(iy,{children:new Date(e.expiresAt).toLocaleDateString()}),(0,j.jsx)(iy,{className:"text-right",children:(0,j.jsx)(rN.Button,{variant:"ghost",size:"sm",onClick:()=>{let t=`${window.location.origin}/invite/${e.token}`;navigator.clipboard.writeText(t),alert("Invitation link copied to clipboard!")},children:"Copy Link"})})]},e.id))})]})})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Project Members"}),(0,j.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,j.jsxs)(ip,{children:[(0,j.jsx)(im,{children:(0,j.jsxs)(iv,{children:[(0,j.jsx)(ix,{children:"User"}),(0,j.jsx)(ix,{children:"Email"}),(0,j.jsx)(ix,{children:"Access Source"}),(0,j.jsx)(ix,{children:"Role"}),(0,j.jsx)(ix,{className:"text-right",children:"Actions"})]})}),(0,j.jsx)(ig,{children:n.map(e=>(0,j.jsxs)(iv,{children:[(0,j.jsx)(iy,{className:"font-medium",children:(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[e.user.image&&(0,j.jsx)("img",{src:e.user.image,alt:"",className:"w-6 h-6 rounded-full"}),e.user.name||"Unknown"]})}),(0,j.jsx)(iy,{children:e.user.email}),(0,j.jsx)(iy,{children:(0,j.jsx)("span",{className:`text-xs px-2 py-1 rounded-full ${"owner"===e.source?"bg-purple-100 text-purple-700":"workspace"===e.source?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:"owner"===e.source?"Owner":"workspace"===e.source?"Workspace":"Project"})}),(0,j.jsx)(iy,{children:"owner"===e.source?(0,j.jsx)("span",{className:"font-semibold text-slate-700",children:"Admin"}):(0,j.jsxs)(nk,{value:e.role,onValueChange:t=>x(e.user.id,t),disabled:e.user.id===t?.user?.id,children:[(0,j.jsx)(io,{className:"w-32 h-8",children:(0,j.jsx)(nT,{})}),(0,j.jsxs)(iu,{children:[(0,j.jsx)(ih,{value:rI,children:"Admin"}),(0,j.jsx)(ih,{value:rA,children:"Manager"}),(0,j.jsx)(ih,{value:rM,children:"Artist"}),(0,j.jsx)(ih,{value:rO,children:"Viewer"})]})]})}),(0,j.jsx)(iy,{className:"text-right",children:"project"===e.source&&e.user.id!==t?.user?.id&&(0,j.jsx)(rN.Button,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>y(e.user.id),children:(0,j.jsx)(rC.Trash2,{className:"w-4 h-4"})})})]},e.user.id))})]})})]})]}):(0,j.jsx)("div",{className:"p-4",children:"You do not have permission to view project settings."})}let iN=(0,rh.default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),iE=e=>fetch(e).then(e=>e.json());function ik({projectId:e}){var t;let{data:r}=(0,ru.useSession)(),{can:n}=rV(e),{data:i,error:s,mutate:a}=rd(`/api/projects/${e}/columns`,iE),[l,o]=(0,N.useState)([]),[c,d]=(0,N.useState)([]),[u,h]=(0,N.useState)(null),[f,p]=(0,N.useState)(null),[m,g]=(0,N.useState)(!1),[v,x]=(0,N.useState)("all"),[y,b]=(0,N.useState)(null),[w,C]=(0,N.useState)(!1),S=(0,N.useMemo)(()=>c.find(e=>e.id===f)||null,[c,f]),D=(0,N.useMemo)(()=>{let e=r?.user?.id;if(y&&"all"!==v&&"my-tasks"!==v&&"unassigned"!==v&&"overdue"!==v&&"this-week"!==v)return c.filter(e=>{let{conditions:t,operator:r}=y,n=t.map(t=>{switch(t.field){case"assignee":if("equals"===t.operator)return e.assignees?.some(e=>e.id===t.value);if("isEmpty"===t.operator)return!e.assignees||0===e.assignees.length;if("isNotEmpty"===t.operator)return e.assignees&&e.assignees.length>0;return!1;case"priority":if("equals"===t.operator)return e.priority===t.value;return!1;case"tags":if("contains"===t.operator)return(e.tags?JSON.parse(e.tags):[]).some(e=>e.name===t.value);return!1;case"column":if("equals"===t.operator)return e.columnId===t.value;return!1;case"dueDate":if(!e.endDate)return"isEmpty"===t.operator;let r=new Date(e.endDate),n=new Date(t.value);if("before"===t.operator)return r<n;if("after"===t.operator)return r>n;if("isNotEmpty"===t.operator)return!!e.endDate;return!1;case"hasAttachments":let i=e.attachments&&JSON.parse(e.attachments).length>0;return t.value?i:!i;case"checklistStatus":if(!e.checklist)return!1;let s=JSON.parse(e.checklist).every(e=>e.completed);return t.value?s:!s;default:return!1}});return"AND"===r?n.every(e=>e):n.some(e=>e)});switch(v){case"my-tasks":return c.filter(t=>t.assignees?.some(t=>t.id===e));case"unassigned":return c.filter(e=>!e.assignees||0===e.assignees.length);case"overdue":return c.filter(e=>!!e.endDate&&new Date(e.endDate)<new Date);case"this-week":return c.filter(e=>{if(!e.endDate)return!1;let t=new Date(e.endDate),r=new Date;return r.setDate(r.getDate()+7),t>=new Date&&t<=r});default:return c}},[c,v,y,r?.user?.id]);N.default.useEffect(()=>{i&&Array.isArray(i)&&(console.log("useEffect: fetchedColumns updated",i),o(i),d(i.flatMap(e=>e.tasks.map(t=>({...t,columnId:e.id})))))},[i]);let T=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,N.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}((t={activationConstraint:{distance:3}},(0,N.useMemo)(()=>({sensor:eU,options:null!=t?t:{}}),[eU,t]))),R=(0,N.useMemo)(()=>{let e=l.map(e=>e.id);return console.log("useMemo: columnsId updated",e),e},[l]),I=(0,N.useCallback)(e=>l.find(t=>t.id===e),[l]);(0,N.useCallback)(e=>c.find(t=>t.id===e),[c]);let A=(0,N.useCallback)(e=>{console.log("onDragStart: active",e.active.id,"type",e.active.data.current?.type),h(e.active)},[]),M=(0,N.useCallback)(e=>{},[]),O=(0,N.useCallback)(async t=>{let{active:r,over:n}=t;if(console.log("onDragEnd: active",r.id,"over",n?.id),h(null),!n){console.log("onDragEnd: Dropped outside, calling mutate()"),a();return}let i=r.id.toString(),s=n.id.toString();if(i===s)return;let u=r.data.current?.type==="Task",f=n.data.current?.type==="Task",p=r.data.current?.type==="Column",m=n.data.current?.type==="Column";if(p&&m){let t=l.findIndex(e=>e.id===i),r=l.findIndex(e=>e.id===s),n=tp(l,t,r);o(n),await Promise.all(n.map(async(t,r)=>{t.order!==r&&await fetch(`/api/projects/${e}/columns/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({order:r})})})),console.log("onDragEnd: Column reordered, calling mutate()"),a();return}if(u){let t=c.find(e=>e.id===i);if(!t)return;let r=t.columnId,n=t.order;if(f){let e=c.find(e=>e.id===s);e&&(r=e.columnId)}else m&&(r=s);let l=c.filter(e=>e.columnId===r&&e.id!==i);if(f){let e=l.findIndex(e=>e.id===s);n=-1===e?l.length:e}else n=l.length;d(e=>{let t=e.find(e=>e.id===i);if(!t)return e;let s=t.children&&t.children.length>0,a=t.columnId!==r,l={...t,columnId:r,order:n},o=e.filter(e=>e.id!==i);if(a&&s){let t=(e,r)=>{let n=r.filter(t=>t.parentId===e);if(0===n.length)return[];let i=n.map(e=>e.id),s=i.flatMap(e=>t(e,r));return[...i,...s]},n=t(i,e);o=o.map(e=>n.includes(e.id)?{...e,columnId:r}:e)}if(t.columnId===r){let t=o.filter(e=>e.columnId===r).concat(l).sort((e,t)=>e.order-t.order).map((e,t)=>({...e,order:t}));return[...e.filter(e=>e.columnId!==r),...t]}{let n=o.filter(e=>e.columnId===t.columnId).sort((e,t)=>e.order-t.order).map((e,t)=>({...e,order:t})),i=o.filter(e=>e.columnId===r).concat(l).sort((e,t)=>e.order-t.order).map((e,t)=>({...e,order:t}));return[...e.filter(e=>e.columnId!==t.columnId&&e.columnId!==r),...n,...i]}});try{let t=await fetch(`/api/projects/${e}/tasks/${i}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({columnId:r,order:n})});if(!t.ok){let e=await t.json();console.error("onDragEnd: Failed to move task",e),a(),alert(`Failed to move task: ${e.message||"Unknown error"}`);return}console.log("onDragEnd: Task moved successfully, calling mutate()"),a()}catch(e){console.error("onDragEnd: Error moving task",e),a(),alert("An error occurred while moving the task.")}return}console.log("onDragEnd: No valid drag operation, calling mutate()"),a()},[l,c,e,a]),P=async()=>{if(!n(rP))return;let t=prompt("Enter new column name:");if(t)try{(await fetch(`/api/projects/${e}/columns`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})})).ok?(console.log("handleAddColumn: Column added successfully, calling mutate()"),a()):console.error("Failed to add column")}catch(e){console.error("Error adding column:",e)}},F=async t=>{if(!n(rF))return;let r=prompt("Enter new task title:");if(r)try{(await fetch(`/api/projects/${e}/tasks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:r,columnId:t})})).ok?(console.log("handleCreateTask: Task added successfully, calling mutate()"),a()):console.error("Failed to add task")}catch(e){console.error("Error adding task:",e)}},L=async(t,r)=>{if(!n(rP))return;let i=prompt("Edit column name:",r);if(i&&i!==r)try{(await fetch(`/api/projects/${e}/columns/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i})})).ok?(console.log("handleEditColumnName: Column name edited successfully, calling mutate()"),a()):console.error("Failed to edit column name")}catch(e){console.error("Error editing column name:",e)}},U=async t=>{if(n(rP)&&confirm("Are you sure you want to delete this column and all its tasks?"))try{(await fetch(`/api/projects/${e}/columns/${t}`,{method:"DELETE"})).ok?(console.log("handleDeleteColumn: Column deleted successfully, calling mutate()"),a()):console.error("Failed to delete column")}catch(e){console.error("Error deleting column:",e)}},_=e=>{console.log("Task clicked:",e),p(e),g(!0),console.log("isModalOpen set to true")};if(s)return(0,j.jsx)("div",{children:"Failed to load kanban board."});if(!i)return(0,j.jsx)("div",{children:"Loading..."});let $=u?.data.current?.type==="Task"?c.find(e=>e.id===u.id):null;return(0,j.jsxs)("div",{children:[(0,j.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,j.jsx)("div",{className:"p-4 bg-white border-b border-gray-200",children:(0,j.jsx)(rY,{projectId:e,currentUserId:r?.user?.id||"",activeFilter:v,onFilterChange:(e,t)=>{x(e),b(t||null)},availableUsers:c.flatMap(e=>e.assignees||[]).filter((e,t,r)=>r.findIndex(t=>t.id===e.id)===t),availableColumns:l.map(e=>({id:e.id,name:e.name}))})}),(0,j.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,j.jsxs)("div",{className:"header",children:[(0,j.jsx)(E.default,{href:"/dashboard",className:"header-title hover:text-gray-300 transition-colors",children:"< Project"}),(0,j.jsx)("div",{className:"flex gap-2",children:n(rP)&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(rN.Button,{onClick:()=>C(!0),variant:"ghost",size:"sm",className:"bg-white text-slate-700 hover:bg-slate-100 border border-slate-200 shadow-sm",children:[(0,j.jsx)(iN,{className:"w-4 h-4 mr-2"}),"Settings"]}),(0,j.jsx)(rN.Button,{onClick:P,className:"btn-primary",children:"Add Column"})]})})]}),(0,j.jsxs)(e8,{sensors:T,collisionDetection:el,onDragStart:A,onDragEnd:O,onDragOver:M,children:[(0,j.jsx)("div",{className:"h-full overflow-x-auto overflow-y-hidden px-8 pt-8 pb-10 bg-neutral-50",children:(0,j.jsx)(ty,{items:R,children:(0,j.jsx)("div",{className:"flex gap-4 h-full min-h-screen",children:l.map(e=>{let t=D.filter(t=>t.columnId===e.id).sort((e,t)=>e.order-t.order);return(0,j.jsx)(rj,{id:e.id,title:e.name,tasks:t,onEditName:L,onDelete:U,onCreateTask:F,onTaskClick:_},e.id)})})})}),(0,k.createPortal)((0,j.jsxs)(tf,{children:[u&&u.data.current?.type==="Task"&&$?(0,j.jsx)(rx,{id:$.id,title:$.title,isActive:!1,className:"dragging",subtasksCount:$.children?.length||0,parentId:$.parentId}):null,u&&u.data.current?.type==="Column"?(0,j.jsx)("div",{className:"column dragging",children:(0,j.jsx)("h2",{className:"column-title",children:I(u.id.toString())?.name})}):null]}),document.body)]})]})]}),w&&(0,k.createPortal)((0,j.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:(0,j.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[(0,j.jsx)("button",{onClick:()=>C(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:(0,j.jsx)(rb,{size:24})}),(0,j.jsx)("div",{className:"p-6",children:(0,j.jsx)(ij,{projectId:e})})]})}),document.body),S&&m&&(0,j.jsx)(rz,{task:S,onClose:()=>{g(!1),p(null),console.log("Modal closed")},onTaskUpdate:a,availableUsers:c.flatMap(e=>e.assignees||[]).filter((e,t,r)=>r.findIndex(t=>t.id===e.id)===t)},S.id)]})}e.s(["KanbanBoard",()=>ik],97403)},3836,e=>{e.n(e.i(97403))}]);