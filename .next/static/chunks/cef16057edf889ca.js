(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,r)=>{t.exports=e.r(76562)},93479,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(75157);let s=r.forwardRef(({className:e,type:r,...s},i)=>(0,t.jsx)("input",{type:r,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...s}));s.displayName="Input",e.s(["Input",()=>s])},19455,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(91918),s=e.i(25913),i=e.i(75157);let n=(0,s.cva)("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",shiny:"bg-gradient-to-r from-primary to-primary/80 text-primary-foreground shadow-md hover:shadow-lg transition-shadow"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=r.forwardRef(({className:e,variant:r,size:s,asChild:l=!1,...o},d)=>{let c=l?a.Slot:"button";return(0,t.jsx)(c,{className:(0,i.cn)(n({variant:r,size:s,className:e})),ref:d,...o})});l.displayName="Button",e.s(["Button",()=>l])},15288,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(75157);let s=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...r}));s.displayName="Card";let i=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...r}));i.displayName="CardHeader";let n=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("h3",{ref:s,className:(0,a.cn)("font-semibold leading-none tracking-tight",e),...r}));n.displayName="CardTitle";let l=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("p",{ref:s,className:(0,a.cn)("text-sm text-muted-foreground",e),...r}));l.displayName="CardDescription";let o=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("p-6 pt-0",e),...r}));o.displayName="CardContent";let d=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("flex items-center p-6 pt-0",e),...r}));d.displayName="CardFooter",e.s(["Card",()=>s,"CardContent",()=>o,"CardDescription",()=>l,"CardFooter",()=>d,"CardHeader",()=>i,"CardTitle",()=>n])},87845,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),s=e.i(17255),i=e.i(19455),n=e.i(93479),l=e.i(15288),o=e.i(75254);let d=(0,o.default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),c=(0,o.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function u(){let e=(0,a.useParams)(),o=(0,a.useRouter)(),{data:u,status:f}=(0,s.useSession)(),m=e.token,[x,p]=(0,r.useState)(!0),[h,g]=(0,r.useState)(null),[v,y]=(0,r.useState)(null),[j,b]=(0,r.useState)(null),[N,C]=(0,r.useState)(""),[w,k]=(0,r.useState)(""),[S,R]=(0,r.useState)(!1);(0,r.useEffect)(()=>{m&&T()},[m]);let T=async()=>{try{let e=await fetch(`/api/invitations/${m}`);if(e.ok){let t=await e.json();y(t.invitation),b(t.existingUser)}else{let t=await e.json();g(t.message||"Invalid invitation")}}catch(e){g("Failed to validate invitation")}finally{p(!1)}},I=async()=>{R(!0);try{let e=await fetch("/api/invitations/accept",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:m,name:j?void 0:N,password:j?void 0:w})});if(e.ok)u?o.push(`/projects/${v.projectId}`):o.push("/login?message=Invitation accepted. Please login.");else{let t=await e.json();alert(t.message||"Failed to accept invitation")}}catch(e){console.error("Error accepting:",e),alert("An error occurred")}finally{R(!1)}};return x?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-neutral-50",children:(0,t.jsx)(d,{className:"w-8 h-8 animate-spin text-neutral-400"})}):h?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-neutral-50",children:(0,t.jsxs)(l.Card,{className:"w-full max-w-md",children:[(0,t.jsxs)(l.CardHeader,{children:[(0,t.jsxs)(l.CardTitle,{className:"text-red-600 flex items-center gap-2",children:[(0,t.jsx)(c,{})," Error"]}),(0,t.jsx)(l.CardDescription,{children:h})]}),(0,t.jsx)(l.CardFooter,{children:(0,t.jsx)(i.Button,{onClick:()=>o.push("/"),variant:"outline",className:"w-full",children:"Go Home"})})]})}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-neutral-50 p-4",children:(0,t.jsxs)(l.Card,{className:"w-full max-w-md",children:[(0,t.jsxs)(l.CardHeader,{children:[(0,t.jsx)(l.CardTitle,{children:"You're invited!"}),(0,t.jsxs)(l.CardDescription,{children:["You have been invited to join ",(0,t.jsx)("strong",{children:v.project.name})," as a ",(0,t.jsx)("strong",{children:v.role}),"."]})]}),(0,t.jsx)(l.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded-md text-sm text-blue-700",children:["Invited Email: ",(0,t.jsx)("strong",{children:v.email})]}),j?(0,t.jsxs)("div",{className:"text-center py-4",children:[(0,t.jsx)("p",{className:"mb-4 text-sm text-gray-600",children:"We found an existing account for this email."}),(0,t.jsx)(i.Button,{onClick:I,disabled:S,className:"w-full",children:S?"Joining...":"Join Project"})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Create your account to join:"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Full Name"}),(0,t.jsx)(n.Input,{value:N,onChange:e=>C(e.target.value),placeholder:"John Doe"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Password"}),(0,t.jsx)(n.Input,{type:"password",value:w,onChange:e=>k(e.target.value),placeholder:"••••••••"})]}),(0,t.jsx)(i.Button,{onClick:I,disabled:S||!N||!w,className:"w-full",children:S?"Creating Account...":"Create Account & Join"})]})]})})]})})}e.s(["default",()=>u],87845)}]);